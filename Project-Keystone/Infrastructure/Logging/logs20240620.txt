[20-06-2024 21:36:11034 +03:00 Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager ] User profile is available. Using '"C:\Users\alexs\AppData\Local\ASP.NET\DataProtection-Keys"' as key repository and Windows DPAPI to encrypt keys at rest.
[20-06-2024 21:36:11192 +03:00 Microsoft.Hosting.Lifetime ] Now listening on: "https://localhost:7298"
[20-06-2024 21:36:11192 +03:00 Microsoft.Hosting.Lifetime ] Now listening on: "http://localhost:5153"
[20-06-2024 21:36:11194 +03:00 Microsoft.Hosting.Lifetime ] Application started. Press Ctrl+C to shut down.
[20-06-2024 21:36:11194 +03:00 Microsoft.Hosting.Lifetime ] Hosting environment: "Development"
[20-06-2024 21:36:11195 +03:00 Microsoft.Hosting.Lifetime ] Content root path: "C:\WorkSpace\NetApps\Project-Keystone\Project-Keystone"
[20-06-2024 21:36:12380 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request starting "HTTP/2" "GET" "https"://"localhost:7298""""/swagger/index.html""" - null null
[20-06-2024 21:36:12488 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request finished "HTTP/2" "GET" "https"://"localhost:7298""""/swagger/index.html""" - 200 null "text/html;charset=utf-8" 110.8753ms
[20-06-2024 21:36:12514 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request starting "HTTP/2" "GET" "https"://"localhost:7298""""/swagger/swagger-ui.css""" - null null
[20-06-2024 21:36:12514 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request starting "HTTP/2" "GET" "https"://"localhost:7298""""/_framework/aspnetcore-browser-refresh.js""" - null null
[20-06-2024 21:36:12514 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request starting "HTTP/2" "GET" "https"://"localhost:7298""""/_vs/browserLink""" - null null
[20-06-2024 21:36:12523 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request finished "HTTP/2" "GET" "https"://"localhost:7298""""/_framework/aspnetcore-browser-refresh.js""" - 200 13768 "application/javascript; charset=utf-8" 9.3073ms
[20-06-2024 21:36:12527 +03:00 Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware ] Sending file. Request path: '"/swagger-ui.css"'. Physical path: '"N/A"'
[20-06-2024 21:36:12528 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request finished "HTTP/2" "GET" "https"://"localhost:7298""""/swagger/swagger-ui.css""" - 499 152034 "text/css" 14.808ms
[20-06-2024 21:36:12543 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request finished "HTTP/2" "GET" "https"://"localhost:7298""""/_vs/browserLink""" - 200 null "text/javascript; charset=UTF-8" 29.0999ms
[20-06-2024 21:36:12569 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request starting "HTTP/2" "GET" "https"://"localhost:7298""""/swagger/favicon-16x16.png""" - null null
[20-06-2024 21:36:12572 +03:00 Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware ] Sending file. Request path: '"/favicon-16x16.png"'. Physical path: '"N/A"'
[20-06-2024 21:36:12572 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request finished "HTTP/2" "GET" "https"://"localhost:7298""""/swagger/favicon-16x16.png""" - 499 665 "image/png" 2.8027ms
[20-06-2024 21:36:12599 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request starting "HTTP/2" "GET" "https"://"localhost:7298""""/swagger/v1/swagger.json""" - null null
[20-06-2024 21:36:12672 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request finished "HTTP/2" "GET" "https"://"localhost:7298""""/swagger/v1/swagger.json""" - 200 null "application/json;charset=utf-8" 73.2892ms
[20-06-2024 21:36:20070 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request starting "HTTP/2" "POST" "https"://"localhost:7298""""/api/Auth/login""" - "application/json" 66
[20-06-2024 21:36:20073 +03:00 Microsoft.AspNetCore.Cors.Infrastructure.CorsService ] CORS policy execution successful.
[20-06-2024 21:36:20119 +03:00 Microsoft.AspNetCore.Routing.EndpointMiddleware ] Executing endpoint '"Project_Keystone.Api.Controllers.AuthController.Login (Project-Keystone)"'
[20-06-2024 21:36:20133 +03:00 Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker ] Route matched with "{action = \"Login\", controller = \"Auth\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(Project_Keystone.Api.Models.DTOs.UserLoginDTO)" on controller "Project_Keystone.Api.Controllers.AuthController" ("Project-Keystone").
[20-06-2024 21:36:21142 +03:00 Microsoft.EntityFrameworkCore.Database.Command ] Executed DbCommand ("27"ms) [Parameters=["@__normalizedEmail_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[Id], [u].[CONCURRENCY_STAMP], [u].[CREATED_AT], [u].[EMAIL], [u].[FIRSTNAME], [u].[LASTNAME], [u].[NormalizedEmail], [u].[NORMALIZED_USER_NAME], [u].[PASSWORD_HASH], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[UPDATED_AT], [u].[UserName]
FROM [USERS] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0"
[20-06-2024 21:36:21271 +03:00 Microsoft.EntityFrameworkCore.Database.Command ] Executed DbCommand ("3"ms) [Parameters=["@__normalizedUserName_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[CONCURRENCY_STAMP], [u].[CREATED_AT], [u].[EMAIL], [u].[FIRSTNAME], [u].[LASTNAME], [u].[NormalizedEmail], [u].[NORMALIZED_USER_NAME], [u].[PASSWORD_HASH], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[UPDATED_AT], [u].[UserName]
FROM [USERS] AS [u]
WHERE [u].[NORMALIZED_USER_NAME] = @__normalizedUserName_0"
[20-06-2024 21:36:21277 +03:00 Microsoft.EntityFrameworkCore.Database.Command ] Executed DbCommand ("0"ms) [Parameters=["@__normalizedEmail_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[Id], [u].[CONCURRENCY_STAMP], [u].[CREATED_AT], [u].[EMAIL], [u].[FIRSTNAME], [u].[LASTNAME], [u].[NormalizedEmail], [u].[NORMALIZED_USER_NAME], [u].[PASSWORD_HASH], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[UPDATED_AT], [u].[UserName]
FROM [USERS] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0"
[20-06-2024 21:36:21338 +03:00 Microsoft.EntityFrameworkCore.Database.Command ] Executed DbCommand ("1"ms) [Parameters=["@p12='?' (Size = 450), @p0='?' (Size = 4000), @p13='?' (Size = 4000), @p1='?' (DbType = DateTime2), @p2='?' (Size = 256), @p3='?' (Size = 4000), @p4='?' (Size = 450), @p5='?' (Size = 256), @p6='?' (Size = 256), @p7='?' (Size = 512), @p8='?' (Size = 4000), @p9='?' (DbType = DateTime2), @p10='?' (DbType = DateTime2), @p11='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [USERS] SET [CONCURRENCY_STAMP] = @p0, [CREATED_AT] = @p1, [EMAIL] = @p2, [FIRSTNAME] = @p3, [LASTNAME] = @p4, [NormalizedEmail] = @p5, [NORMALIZED_USER_NAME] = @p6, [PASSWORD_HASH] = @p7, [RefreshToken] = @p8, [RefreshTokenExpiryTime] = @p9, [UPDATED_AT] = @p10, [UserName] = @p11
OUTPUT 1
WHERE [Id] = @p12 AND [CONCURRENCY_STAMP] = @p13;"
[20-06-2024 21:36:21375 +03:00 Microsoft.EntityFrameworkCore.Database.Command ] Executed DbCommand ("0"ms) [Parameters=["@__userId_0='?' (Size = 450)"], CommandType='Text', CommandTimeout='30']"
""SELECT [r].[Name]
FROM [USER_ROLES] AS [u]
INNER JOIN [ROLES] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[UserId] = @__userId_0"
[20-06-2024 21:36:21392 +03:00 Project_Keystone.Core.Services.AuthService ] User "user@example.com" logged in successfully.
[20-06-2024 21:36:21392 +03:00 Project_Keystone.Api.Controllers.AuthController ] User "user@example.com" logged in successfully
[20-06-2024 21:36:21396 +03:00 Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor ] Executing "OkObjectResult", writing value of type '"<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]"'.
[20-06-2024 21:36:21403 +03:00 Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker ] Executed action "Project_Keystone.Api.Controllers.AuthController.Login (Project-Keystone)" in 1267.6654ms
[20-06-2024 21:36:21404 +03:00 Microsoft.AspNetCore.Routing.EndpointMiddleware ] Executed endpoint '"Project_Keystone.Api.Controllers.AuthController.Login (Project-Keystone)"'
[20-06-2024 21:36:21408 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request finished "HTTP/2" "POST" "https"://"localhost:7298""""/api/Auth/login""" - 200 null "application/json; charset=utf-8" 1338.3104ms
[20-06-2024 21:36:59964 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request starting "HTTP/2" "POST" "https"://"localhost:7298""""/api/Auth/update""" - "application/json" 82
[20-06-2024 21:36:59967 +03:00 Microsoft.AspNetCore.Cors.Infrastructure.CorsService ] CORS policy execution successful.
[20-06-2024 21:36:59997 +03:00 Microsoft.AspNetCore.Routing.EndpointMiddleware ] Executing endpoint '"Project_Keystone.Api.Controllers.AuthController.UpdateUser (Project-Keystone)"'
[20-06-2024 21:36:59999 +03:00 Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker ] Route matched with "{action = \"UpdateUser\", controller = \"Auth\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateUser(Project_Keystone.Api.Models.DTOs.UserUpdateDTO)" on controller "Project_Keystone.Api.Controllers.AuthController" ("Project-Keystone").
[20-06-2024 21:37:14017 +03:00 Project_Keystone.Api.Controllers.AuthController ] Authenticated user roles: "User"
[20-06-2024 21:37:14018 +03:00 Project_Keystone.Core.Services.AuthService ] Attempting to update user with email "user@example.com"
[20-06-2024 21:37:14020 +03:00 Microsoft.EntityFrameworkCore.Database.Command ] Executed DbCommand ("0"ms) [Parameters=["@__normalizedEmail_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[Id], [u].[CONCURRENCY_STAMP], [u].[CREATED_AT], [u].[EMAIL], [u].[FIRSTNAME], [u].[LASTNAME], [u].[NormalizedEmail], [u].[NORMALIZED_USER_NAME], [u].[PASSWORD_HASH], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[UPDATED_AT], [u].[UserName]
FROM [USERS] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0"
[20-06-2024 21:37:14022 +03:00 Project_Keystone.Core.Services.AuthService ] User found. Updating user details.
[20-06-2024 21:37:14026 +03:00 Microsoft.EntityFrameworkCore.Database.Command ] Executed DbCommand ("1"ms) [Parameters=["@__normalizedUserName_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[CONCURRENCY_STAMP], [u].[CREATED_AT], [u].[EMAIL], [u].[FIRSTNAME], [u].[LASTNAME], [u].[NormalizedEmail], [u].[NORMALIZED_USER_NAME], [u].[PASSWORD_HASH], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[UPDATED_AT], [u].[UserName]
FROM [USERS] AS [u]
WHERE [u].[NORMALIZED_USER_NAME] = @__normalizedUserName_0"
[20-06-2024 21:37:14028 +03:00 Microsoft.EntityFrameworkCore.Database.Command ] Executed DbCommand ("0"ms) [Parameters=["@__normalizedEmail_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[Id], [u].[CONCURRENCY_STAMP], [u].[CREATED_AT], [u].[EMAIL], [u].[FIRSTNAME], [u].[LASTNAME], [u].[NormalizedEmail], [u].[NORMALIZED_USER_NAME], [u].[PASSWORD_HASH], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[UPDATED_AT], [u].[UserName]
FROM [USERS] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0"
[20-06-2024 21:37:14030 +03:00 Microsoft.EntityFrameworkCore.Database.Command ] Executed DbCommand ("1"ms) [Parameters=["@p12='?' (Size = 450), @p0='?' (Size = 4000), @p13='?' (Size = 4000), @p1='?' (DbType = DateTime2), @p2='?' (Size = 256), @p3='?' (Size = 4000), @p4='?' (Size = 450), @p5='?' (Size = 256), @p6='?' (Size = 256), @p7='?' (Size = 512), @p8='?' (Size = 4000), @p9='?' (DbType = DateTime2), @p10='?' (DbType = DateTime2), @p11='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [USERS] SET [CONCURRENCY_STAMP] = @p0, [CREATED_AT] = @p1, [EMAIL] = @p2, [FIRSTNAME] = @p3, [LASTNAME] = @p4, [NormalizedEmail] = @p5, [NORMALIZED_USER_NAME] = @p6, [PASSWORD_HASH] = @p7, [RefreshToken] = @p8, [RefreshTokenExpiryTime] = @p9, [UPDATED_AT] = @p10, [UserName] = @p11
OUTPUT 1
WHERE [Id] = @p12 AND [CONCURRENCY_STAMP] = @p13;"
[20-06-2024 21:37:14031 +03:00 Project_Keystone.Core.Services.AuthService ] User with email "user@example.com" updated successfully
[20-06-2024 21:37:14032 +03:00 Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor ] Executing "OkObjectResult", writing value of type '"<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]"'.
[20-06-2024 21:37:14033 +03:00 Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker ] Executed action "Project_Keystone.Api.Controllers.AuthController.UpdateUser (Project-Keystone)" in 14032.5386ms
[20-06-2024 21:37:14033 +03:00 Microsoft.AspNetCore.Routing.EndpointMiddleware ] Executed endpoint '"Project_Keystone.Api.Controllers.AuthController.UpdateUser (Project-Keystone)"'
[20-06-2024 21:37:14033 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request finished "HTTP/2" "POST" "https"://"localhost:7298""""/api/Auth/update""" - 200 null "application/json; charset=utf-8" 14070.2321ms
[20-06-2024 21:38:34985 +03:00 Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager ] User profile is available. Using '"C:\Users\alexs\AppData\Local\ASP.NET\DataProtection-Keys"' as key repository and Windows DPAPI to encrypt keys at rest.
[20-06-2024 21:38:35138 +03:00 Microsoft.Hosting.Lifetime ] Now listening on: "https://localhost:7298"
[20-06-2024 21:38:35139 +03:00 Microsoft.Hosting.Lifetime ] Now listening on: "http://localhost:5153"
[20-06-2024 21:38:35140 +03:00 Microsoft.Hosting.Lifetime ] Application started. Press Ctrl+C to shut down.
[20-06-2024 21:38:35141 +03:00 Microsoft.Hosting.Lifetime ] Hosting environment: "Development"
[20-06-2024 21:38:35141 +03:00 Microsoft.Hosting.Lifetime ] Content root path: "C:\WorkSpace\NetApps\Project-Keystone\Project-Keystone"
[20-06-2024 21:38:36343 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request starting "HTTP/2" "GET" "https"://"localhost:7298""""/swagger/index.html""" - null null
[20-06-2024 21:38:36468 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request finished "HTTP/2" "GET" "https"://"localhost:7298""""/swagger/index.html""" - 200 null "text/html;charset=utf-8" 127.9738ms
[20-06-2024 21:38:36489 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request starting "HTTP/2" "GET" "https"://"localhost:7298""""/_framework/aspnetcore-browser-refresh.js""" - null null
[20-06-2024 21:38:36489 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request starting "HTTP/2" "GET" "https"://"localhost:7298""""/swagger/swagger-ui.css""" - null null
[20-06-2024 21:38:36490 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request starting "HTTP/2" "GET" "https"://"localhost:7298""""/_vs/browserLink""" - null null
[20-06-2024 21:38:36502 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request finished "HTTP/2" "GET" "https"://"localhost:7298""""/_framework/aspnetcore-browser-refresh.js""" - 200 13768 "application/javascript; charset=utf-8" 12.8293ms
[20-06-2024 21:38:36509 +03:00 Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware ] Sending file. Request path: '"/swagger-ui.css"'. Physical path: '"N/A"'
[20-06-2024 21:38:36509 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request finished "HTTP/2" "GET" "https"://"localhost:7298""""/swagger/swagger-ui.css""" - 499 152034 "text/css" 20.0945ms
[20-06-2024 21:38:36524 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request finished "HTTP/2" "GET" "https"://"localhost:7298""""/_vs/browserLink""" - 200 null "text/javascript; charset=UTF-8" 34.541ms
[20-06-2024 21:38:36550 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request starting "HTTP/2" "GET" "https"://"localhost:7298""""/swagger/favicon-16x16.png""" - null null
[20-06-2024 21:38:36552 +03:00 Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware ] Sending file. Request path: '"/favicon-16x16.png"'. Physical path: '"N/A"'
[20-06-2024 21:38:36553 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request finished "HTTP/2" "GET" "https"://"localhost:7298""""/swagger/favicon-16x16.png""" - 499 665 "image/png" 2.9432ms
[20-06-2024 21:38:36582 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request starting "HTTP/2" "GET" "https"://"localhost:7298""""/swagger/v1/swagger.json""" - null null
[20-06-2024 21:38:36660 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request finished "HTTP/2" "GET" "https"://"localhost:7298""""/swagger/v1/swagger.json""" - 200 null "application/json;charset=utf-8" 77.7362ms
[20-06-2024 21:38:44368 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request starting "HTTP/2" "POST" "https"://"localhost:7298""""/api/Auth/login""" - "application/json" 66
[20-06-2024 21:38:44371 +03:00 Microsoft.AspNetCore.Cors.Infrastructure.CorsService ] CORS policy execution successful.
[20-06-2024 21:38:44414 +03:00 Microsoft.AspNetCore.Routing.EndpointMiddleware ] Executing endpoint '"Project_Keystone.Api.Controllers.AuthController.Login (Project-Keystone)"'
[20-06-2024 21:38:44427 +03:00 Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker ] Route matched with "{action = \"Login\", controller = \"Auth\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(Project_Keystone.Api.Models.DTOs.UserLoginDTO)" on controller "Project_Keystone.Api.Controllers.AuthController" ("Project-Keystone").
[20-06-2024 21:38:45430 +03:00 Microsoft.EntityFrameworkCore.Database.Command ] Executed DbCommand ("29"ms) [Parameters=["@__normalizedEmail_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[Id], [u].[CONCURRENCY_STAMP], [u].[CREATED_AT], [u].[EMAIL], [u].[FIRSTNAME], [u].[LASTNAME], [u].[NormalizedEmail], [u].[NORMALIZED_USER_NAME], [u].[PASSWORD_HASH], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[UPDATED_AT], [u].[UserName]
FROM [USERS] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0"
[20-06-2024 21:38:45562 +03:00 Microsoft.EntityFrameworkCore.Database.Command ] Executed DbCommand ("3"ms) [Parameters=["@__normalizedUserName_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[CONCURRENCY_STAMP], [u].[CREATED_AT], [u].[EMAIL], [u].[FIRSTNAME], [u].[LASTNAME], [u].[NormalizedEmail], [u].[NORMALIZED_USER_NAME], [u].[PASSWORD_HASH], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[UPDATED_AT], [u].[UserName]
FROM [USERS] AS [u]
WHERE [u].[NORMALIZED_USER_NAME] = @__normalizedUserName_0"
[20-06-2024 21:38:45569 +03:00 Microsoft.EntityFrameworkCore.Database.Command ] Executed DbCommand ("1"ms) [Parameters=["@__normalizedEmail_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[Id], [u].[CONCURRENCY_STAMP], [u].[CREATED_AT], [u].[EMAIL], [u].[FIRSTNAME], [u].[LASTNAME], [u].[NormalizedEmail], [u].[NORMALIZED_USER_NAME], [u].[PASSWORD_HASH], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[UPDATED_AT], [u].[UserName]
FROM [USERS] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0"
[20-06-2024 21:38:45633 +03:00 Microsoft.EntityFrameworkCore.Database.Command ] Executed DbCommand ("1"ms) [Parameters=["@p12='?' (Size = 450), @p0='?' (Size = 4000), @p13='?' (Size = 4000), @p1='?' (DbType = DateTime2), @p2='?' (Size = 256), @p3='?' (Size = 4000), @p4='?' (Size = 450), @p5='?' (Size = 256), @p6='?' (Size = 256), @p7='?' (Size = 512), @p8='?' (Size = 4000), @p9='?' (DbType = DateTime2), @p10='?' (DbType = DateTime2), @p11='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [USERS] SET [CONCURRENCY_STAMP] = @p0, [CREATED_AT] = @p1, [EMAIL] = @p2, [FIRSTNAME] = @p3, [LASTNAME] = @p4, [NormalizedEmail] = @p5, [NORMALIZED_USER_NAME] = @p6, [PASSWORD_HASH] = @p7, [RefreshToken] = @p8, [RefreshTokenExpiryTime] = @p9, [UPDATED_AT] = @p10, [UserName] = @p11
OUTPUT 1
WHERE [Id] = @p12 AND [CONCURRENCY_STAMP] = @p13;"
[20-06-2024 21:38:45669 +03:00 Microsoft.EntityFrameworkCore.Database.Command ] Executed DbCommand ("0"ms) [Parameters=["@__userId_0='?' (Size = 450)"], CommandType='Text', CommandTimeout='30']"
""SELECT [r].[Name]
FROM [USER_ROLES] AS [u]
INNER JOIN [ROLES] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[UserId] = @__userId_0"
[20-06-2024 21:38:45686 +03:00 Project_Keystone.Core.Services.AuthService ] User "user@example.com" logged in successfully.
[20-06-2024 21:38:45686 +03:00 Project_Keystone.Api.Controllers.AuthController ] User "user@example.com" logged in successfully
[20-06-2024 21:38:45690 +03:00 Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor ] Executing "OkObjectResult", writing value of type '"<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]"'.
[20-06-2024 21:38:45696 +03:00 Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker ] Executed action "Project_Keystone.Api.Controllers.AuthController.Login (Project-Keystone)" in 1267.2588ms
[20-06-2024 21:38:45697 +03:00 Microsoft.AspNetCore.Routing.EndpointMiddleware ] Executed endpoint '"Project_Keystone.Api.Controllers.AuthController.Login (Project-Keystone)"'
[20-06-2024 21:38:45702 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request finished "HTTP/2" "POST" "https"://"localhost:7298""""/api/Auth/login""" - 200 null "application/json; charset=utf-8" 1333.7217ms
[20-06-2024 21:39:12072 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request starting "HTTP/2" "POST" "https"://"localhost:7298""""/api/Auth/update""" - "application/json" 84
[20-06-2024 21:39:12074 +03:00 Microsoft.AspNetCore.Cors.Infrastructure.CorsService ] CORS policy execution successful.
[20-06-2024 21:39:12104 +03:00 Microsoft.AspNetCore.Routing.EndpointMiddleware ] Executing endpoint '"Project_Keystone.Api.Controllers.AuthController.UpdateUser (Project-Keystone)"'
[20-06-2024 21:39:12107 +03:00 Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker ] Route matched with "{action = \"UpdateUser\", controller = \"Auth\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateUser(Project_Keystone.Api.Models.DTOs.UserUpdateDTO)" on controller "Project_Keystone.Api.Controllers.AuthController" ("Project-Keystone").
[20-06-2024 21:39:12148 +03:00 Project_Keystone.Api.Controllers.AuthController ] Authenticated user roles: "User"
[20-06-2024 21:39:12149 +03:00 Project_Keystone.Core.Services.AuthService ] Attempting to update user with email "user@example.com"
[20-06-2024 21:39:12152 +03:00 Microsoft.EntityFrameworkCore.Database.Command ] Executed DbCommand ("1"ms) [Parameters=["@__normalizedEmail_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[Id], [u].[CONCURRENCY_STAMP], [u].[CREATED_AT], [u].[EMAIL], [u].[FIRSTNAME], [u].[LASTNAME], [u].[NormalizedEmail], [u].[NORMALIZED_USER_NAME], [u].[PASSWORD_HASH], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[UPDATED_AT], [u].[UserName]
FROM [USERS] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0"
[20-06-2024 21:39:12155 +03:00 Project_Keystone.Core.Services.AuthService ] User found. Updating user details.
[20-06-2024 21:39:12160 +03:00 Microsoft.EntityFrameworkCore.Database.Command ] Executed DbCommand ("1"ms) [Parameters=["@__normalizedUserName_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[CONCURRENCY_STAMP], [u].[CREATED_AT], [u].[EMAIL], [u].[FIRSTNAME], [u].[LASTNAME], [u].[NormalizedEmail], [u].[NORMALIZED_USER_NAME], [u].[PASSWORD_HASH], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[UPDATED_AT], [u].[UserName]
FROM [USERS] AS [u]
WHERE [u].[NORMALIZED_USER_NAME] = @__normalizedUserName_0"
[20-06-2024 21:39:12162 +03:00 Microsoft.EntityFrameworkCore.Database.Command ] Executed DbCommand ("0"ms) [Parameters=["@__normalizedEmail_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[Id], [u].[CONCURRENCY_STAMP], [u].[CREATED_AT], [u].[EMAIL], [u].[FIRSTNAME], [u].[LASTNAME], [u].[NormalizedEmail], [u].[NORMALIZED_USER_NAME], [u].[PASSWORD_HASH], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[UPDATED_AT], [u].[UserName]
FROM [USERS] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0"
[20-06-2024 21:39:12164 +03:00 Microsoft.EntityFrameworkCore.Database.Command ] Executed DbCommand ("1"ms) [Parameters=["@p12='?' (Size = 450), @p0='?' (Size = 4000), @p13='?' (Size = 4000), @p1='?' (DbType = DateTime2), @p2='?' (Size = 256), @p3='?' (Size = 4000), @p4='?' (Size = 450), @p5='?' (Size = 256), @p6='?' (Size = 256), @p7='?' (Size = 512), @p8='?' (Size = 4000), @p9='?' (DbType = DateTime2), @p10='?' (DbType = DateTime2), @p11='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [USERS] SET [CONCURRENCY_STAMP] = @p0, [CREATED_AT] = @p1, [EMAIL] = @p2, [FIRSTNAME] = @p3, [LASTNAME] = @p4, [NormalizedEmail] = @p5, [NORMALIZED_USER_NAME] = @p6, [PASSWORD_HASH] = @p7, [RefreshToken] = @p8, [RefreshTokenExpiryTime] = @p9, [UPDATED_AT] = @p10, [UserName] = @p11
OUTPUT 1
WHERE [Id] = @p12 AND [CONCURRENCY_STAMP] = @p13;"
[20-06-2024 21:39:12165 +03:00 Project_Keystone.Core.Services.AuthService ] User with email "user@example.com" updated successfully
[20-06-2024 21:39:12165 +03:00 Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor ] Executing "OkObjectResult", writing value of type '"<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]"'.
[20-06-2024 21:39:12167 +03:00 Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker ] Executed action "Project_Keystone.Api.Controllers.AuthController.UpdateUser (Project-Keystone)" in 58.7841ms
[20-06-2024 21:39:12167 +03:00 Microsoft.AspNetCore.Routing.EndpointMiddleware ] Executed endpoint '"Project_Keystone.Api.Controllers.AuthController.UpdateUser (Project-Keystone)"'
[20-06-2024 21:39:12168 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request finished "HTTP/2" "POST" "https"://"localhost:7298""""/api/Auth/update""" - 200 null "application/json; charset=utf-8" 95.3755ms
[20-06-2024 21:39:44482 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request starting "HTTP/2" "GET" "https"://"localhost:7298""""/api/Auth/debug/check-roles""" - null null
[20-06-2024 21:39:44486 +03:00 Microsoft.AspNetCore.Routing.EndpointMiddleware ] Executing endpoint '"Project_Keystone.Api.Controllers.AuthController.CheckRoles (Project-Keystone)"'
[20-06-2024 21:39:44487 +03:00 Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker ] Route matched with "{action = \"CheckRoles\", controller = \"Auth\"}". Executing controller action with signature "Microsoft.AspNetCore.Mvc.IActionResult CheckRoles()" on controller "Project_Keystone.Api.Controllers.AuthController" ("Project-Keystone").
[20-06-2024 21:39:44506 +03:00 Project_Keystone.Api.Controllers.AuthController ] User roles: "User"
[20-06-2024 21:39:44507 +03:00 Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor ] Executing "OkObjectResult", writing value of type '"<>f__AnonymousType2`1[[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]"'.
[20-06-2024 21:39:44510 +03:00 Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker ] Executed action "Project_Keystone.Api.Controllers.AuthController.CheckRoles (Project-Keystone)" in 22.1441ms
[20-06-2024 21:39:44510 +03:00 Microsoft.AspNetCore.Routing.EndpointMiddleware ] Executed endpoint '"Project_Keystone.Api.Controllers.AuthController.CheckRoles (Project-Keystone)"'
[20-06-2024 21:39:44511 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request finished "HTTP/2" "GET" "https"://"localhost:7298""""/api/Auth/debug/check-roles""" - 200 null "application/json; charset=utf-8" 28.5036ms
[20-06-2024 21:43:17277 +03:00 Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager ] User profile is available. Using '"C:\Users\alexs\AppData\Local\ASP.NET\DataProtection-Keys"' as key repository and Windows DPAPI to encrypt keys at rest.
[20-06-2024 21:43:17488 +03:00 Microsoft.Hosting.Lifetime ] Now listening on: "https://localhost:7298"
[20-06-2024 21:43:17488 +03:00 Microsoft.Hosting.Lifetime ] Now listening on: "http://localhost:5153"
[20-06-2024 21:43:17489 +03:00 Microsoft.Hosting.Lifetime ] Application started. Press Ctrl+C to shut down.
[20-06-2024 21:43:17490 +03:00 Microsoft.Hosting.Lifetime ] Hosting environment: "Development"
[20-06-2024 21:43:17490 +03:00 Microsoft.Hosting.Lifetime ] Content root path: "C:\WorkSpace\NetApps\Project-Keystone\Project-Keystone"
[20-06-2024 21:43:18353 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request starting "HTTP/2" "GET" "https"://"localhost:7298""""/swagger/index.html""" - null null
[20-06-2024 21:43:18471 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request finished "HTTP/2" "GET" "https"://"localhost:7298""""/swagger/index.html""" - 200 null "text/html;charset=utf-8" 121.2293ms
[20-06-2024 21:43:18499 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request starting "HTTP/2" "GET" "https"://"localhost:7298""""/_framework/aspnetcore-browser-refresh.js""" - null null
[20-06-2024 21:43:18501 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request starting "HTTP/2" "GET" "https"://"localhost:7298""""/swagger/swagger-ui.css""" - null null
[20-06-2024 21:43:18501 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request starting "HTTP/2" "GET" "https"://"localhost:7298""""/_vs/browserLink""" - null null
[20-06-2024 21:43:18507 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request finished "HTTP/2" "GET" "https"://"localhost:7298""""/_framework/aspnetcore-browser-refresh.js""" - 200 13768 "application/javascript; charset=utf-8" 8.5709ms
[20-06-2024 21:43:18515 +03:00 Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware ] Sending file. Request path: '"/swagger-ui.css"'. Physical path: '"N/A"'
[20-06-2024 21:43:18516 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request finished "HTTP/2" "GET" "https"://"localhost:7298""""/swagger/swagger-ui.css""" - 499 152034 "text/css" 15.2829ms
[20-06-2024 21:43:18533 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request finished "HTTP/2" "GET" "https"://"localhost:7298""""/_vs/browserLink""" - 200 null "text/javascript; charset=UTF-8" 31.6435ms
[20-06-2024 21:43:18568 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request starting "HTTP/2" "GET" "https"://"localhost:7298""""/swagger/favicon-16x16.png""" - null null
[20-06-2024 21:43:18571 +03:00 Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware ] Sending file. Request path: '"/favicon-16x16.png"'. Physical path: '"N/A"'
[20-06-2024 21:43:18571 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request finished "HTTP/2" "GET" "https"://"localhost:7298""""/swagger/favicon-16x16.png""" - 499 665 "image/png" 2.7375ms
[20-06-2024 21:43:18604 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request starting "HTTP/2" "GET" "https"://"localhost:7298""""/swagger/v1/swagger.json""" - null null
[20-06-2024 21:43:18681 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request finished "HTTP/2" "GET" "https"://"localhost:7298""""/swagger/v1/swagger.json""" - 200 null "application/json;charset=utf-8" 76.9372ms
[20-06-2024 21:44:05247 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request starting "HTTP/2" "OPTIONS" "https"://"localhost:7298""""/api/auth/login""" - null null
[20-06-2024 21:44:05250 +03:00 Microsoft.AspNetCore.Cors.Infrastructure.CorsService ] CORS policy execution successful.
[20-06-2024 21:44:05251 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request finished "HTTP/2" "OPTIONS" "https"://"localhost:7298""""/api/auth/login""" - 204 null null 3.8558ms
[20-06-2024 21:44:05252 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request starting "HTTP/2" "POST" "https"://"localhost:7298""""/api/auth/login""" - "application/json" 57
[20-06-2024 21:44:05253 +03:00 Microsoft.AspNetCore.Cors.Infrastructure.CorsService ] CORS policy execution successful.
[20-06-2024 21:44:05298 +03:00 Microsoft.AspNetCore.Routing.EndpointMiddleware ] Executing endpoint '"Project_Keystone.Api.Controllers.AuthController.Login (Project-Keystone)"'
[20-06-2024 21:44:05311 +03:00 Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker ] Route matched with "{action = \"Login\", controller = \"Auth\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(Project_Keystone.Api.Models.DTOs.UserLoginDTO)" on controller "Project_Keystone.Api.Controllers.AuthController" ("Project-Keystone").
[20-06-2024 21:44:06269 +03:00 Microsoft.EntityFrameworkCore.Database.Command ] Executed DbCommand ("28"ms) [Parameters=["@__normalizedEmail_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[Id], [u].[CONCURRENCY_STAMP], [u].[CREATED_AT], [u].[EMAIL], [u].[FIRSTNAME], [u].[LASTNAME], [u].[NormalizedEmail], [u].[NORMALIZED_USER_NAME], [u].[PASSWORD_HASH], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[UPDATED_AT], [u].[UserName]
FROM [USERS] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0"
[20-06-2024 21:44:06407 +03:00 Microsoft.EntityFrameworkCore.Database.Command ] Executed DbCommand ("4"ms) [Parameters=["@__normalizedUserName_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[CONCURRENCY_STAMP], [u].[CREATED_AT], [u].[EMAIL], [u].[FIRSTNAME], [u].[LASTNAME], [u].[NormalizedEmail], [u].[NORMALIZED_USER_NAME], [u].[PASSWORD_HASH], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[UPDATED_AT], [u].[UserName]
FROM [USERS] AS [u]
WHERE [u].[NORMALIZED_USER_NAME] = @__normalizedUserName_0"
[20-06-2024 21:44:06414 +03:00 Microsoft.EntityFrameworkCore.Database.Command ] Executed DbCommand ("0"ms) [Parameters=["@__normalizedEmail_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[Id], [u].[CONCURRENCY_STAMP], [u].[CREATED_AT], [u].[EMAIL], [u].[FIRSTNAME], [u].[LASTNAME], [u].[NormalizedEmail], [u].[NORMALIZED_USER_NAME], [u].[PASSWORD_HASH], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[UPDATED_AT], [u].[UserName]
FROM [USERS] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0"
[20-06-2024 21:44:06478 +03:00 Microsoft.EntityFrameworkCore.Database.Command ] Executed DbCommand ("1"ms) [Parameters=["@p12='?' (Size = 450), @p0='?' (Size = 4000), @p13='?' (Size = 4000), @p1='?' (DbType = DateTime2), @p2='?' (Size = 256), @p3='?' (Size = 4000), @p4='?' (Size = 450), @p5='?' (Size = 256), @p6='?' (Size = 256), @p7='?' (Size = 512), @p8='?' (Size = 4000), @p9='?' (DbType = DateTime2), @p10='?' (DbType = DateTime2), @p11='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [USERS] SET [CONCURRENCY_STAMP] = @p0, [CREATED_AT] = @p1, [EMAIL] = @p2, [FIRSTNAME] = @p3, [LASTNAME] = @p4, [NormalizedEmail] = @p5, [NORMALIZED_USER_NAME] = @p6, [PASSWORD_HASH] = @p7, [RefreshToken] = @p8, [RefreshTokenExpiryTime] = @p9, [UPDATED_AT] = @p10, [UserName] = @p11
OUTPUT 1
WHERE [Id] = @p12 AND [CONCURRENCY_STAMP] = @p13;"
[20-06-2024 21:44:06526 +03:00 Microsoft.EntityFrameworkCore.Database.Command ] Executed DbCommand ("0"ms) [Parameters=["@__userId_0='?' (Size = 450)"], CommandType='Text', CommandTimeout='30']"
""SELECT [r].[Name]
FROM [USER_ROLES] AS [u]
INNER JOIN [ROLES] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[UserId] = @__userId_0"
[20-06-2024 21:44:06544 +03:00 Project_Keystone.Core.Services.AuthService ] User "user@example.com" logged in successfully.
[20-06-2024 21:44:06545 +03:00 Project_Keystone.Api.Controllers.AuthController ] User "user@example.com" logged in successfully
[20-06-2024 21:44:06550 +03:00 Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor ] Executing "OkObjectResult", writing value of type '"<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]"'.
[20-06-2024 21:44:06557 +03:00 Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker ] Executed action "Project_Keystone.Api.Controllers.AuthController.Login (Project-Keystone)" in 1243.7511ms
[20-06-2024 21:44:06558 +03:00 Microsoft.AspNetCore.Routing.EndpointMiddleware ] Executed endpoint '"Project_Keystone.Api.Controllers.AuthController.Login (Project-Keystone)"'
[20-06-2024 21:44:06564 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request finished "HTTP/2" "POST" "https"://"localhost:7298""""/api/auth/login""" - 200 null "application/json; charset=utf-8" 1312.2072ms
[20-06-2024 21:45:22180 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request starting "HTTP/2" "OPTIONS" "https"://"localhost:7298""""/api/auth/update""" - null null
[20-06-2024 21:45:22183 +03:00 Microsoft.AspNetCore.Cors.Infrastructure.CorsService ] CORS policy execution successful.
[20-06-2024 21:45:22183 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request finished "HTTP/2" "OPTIONS" "https"://"localhost:7298""""/api/auth/update""" - 204 null null 4.2974ms
[20-06-2024 21:45:22184 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request starting "HTTP/2" "POST" "https"://"localhost:7298""""/api/auth/update""" - "application/json" 91
[20-06-2024 21:45:22186 +03:00 Microsoft.AspNetCore.Cors.Infrastructure.CorsService ] CORS policy execution successful.
[20-06-2024 21:45:22191 +03:00 Microsoft.AspNetCore.Authorization.DefaultAuthorizationService ] Authorization failed. "These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user."
[20-06-2024 21:45:22194 +03:00 Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler ] AuthenticationScheme: "Bearer" was challenged.
[20-06-2024 21:45:22194 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request finished "HTTP/2" "POST" "https"://"localhost:7298""""/api/auth/update""" - 401 0 null 9.9463ms
[20-06-2024 21:47:14303 +03:00 Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager ] User profile is available. Using '"C:\Users\alexs\AppData\Local\ASP.NET\DataProtection-Keys"' as key repository and Windows DPAPI to encrypt keys at rest.
[20-06-2024 21:47:14439 +03:00 Microsoft.Hosting.Lifetime ] Now listening on: "https://localhost:7298"
[20-06-2024 21:47:14440 +03:00 Microsoft.Hosting.Lifetime ] Now listening on: "http://localhost:5153"
[20-06-2024 21:47:14441 +03:00 Microsoft.Hosting.Lifetime ] Application started. Press Ctrl+C to shut down.
[20-06-2024 21:47:14441 +03:00 Microsoft.Hosting.Lifetime ] Hosting environment: "Development"
[20-06-2024 21:47:14442 +03:00 Microsoft.Hosting.Lifetime ] Content root path: "C:\WorkSpace\NetApps\Project-Keystone\Project-Keystone"
[20-06-2024 21:47:15450 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request starting "HTTP/2" "GET" "https"://"localhost:7298""""/swagger/index.html""" - null null
[20-06-2024 21:47:15563 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request finished "HTTP/2" "GET" "https"://"localhost:7298""""/swagger/index.html""" - 200 null "text/html;charset=utf-8" 117.2573ms
[20-06-2024 21:47:15584 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request starting "HTTP/2" "GET" "https"://"localhost:7298""""/_framework/aspnetcore-browser-refresh.js""" - null null
[20-06-2024 21:47:15584 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request starting "HTTP/2" "GET" "https"://"localhost:7298""""/swagger/swagger-ui.css""" - null null
[20-06-2024 21:47:15585 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request starting "HTTP/2" "GET" "https"://"localhost:7298""""/_vs/browserLink""" - null null
[20-06-2024 21:47:15595 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request finished "HTTP/2" "GET" "https"://"localhost:7298""""/_framework/aspnetcore-browser-refresh.js""" - 200 13768 "application/javascript; charset=utf-8" 10.094ms
[20-06-2024 21:47:15602 +03:00 Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware ] Sending file. Request path: '"/swagger-ui.css"'. Physical path: '"N/A"'
[20-06-2024 21:47:15602 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request finished "HTTP/2" "GET" "https"://"localhost:7298""""/swagger/swagger-ui.css""" - 499 152034 "text/css" 17.9465ms
[20-06-2024 21:47:15618 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request finished "HTTP/2" "GET" "https"://"localhost:7298""""/_vs/browserLink""" - 200 null "text/javascript; charset=UTF-8" 32.9445ms
[20-06-2024 21:47:15652 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request starting "HTTP/2" "GET" "https"://"localhost:7298""""/swagger/favicon-16x16.png""" - null null
[20-06-2024 21:47:15655 +03:00 Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware ] Sending file. Request path: '"/favicon-16x16.png"'. Physical path: '"N/A"'
[20-06-2024 21:47:15655 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request finished "HTTP/2" "GET" "https"://"localhost:7298""""/swagger/favicon-16x16.png""" - 499 665 "image/png" 3.0559ms
[20-06-2024 21:47:15687 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request starting "HTTP/2" "GET" "https"://"localhost:7298""""/swagger/v1/swagger.json""" - null null
[20-06-2024 21:47:15762 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request finished "HTTP/2" "GET" "https"://"localhost:7298""""/swagger/v1/swagger.json""" - 200 null "application/json;charset=utf-8" 74.8145ms
[20-06-2024 21:47:34263 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request starting "HTTP/2" "OPTIONS" "https"://"localhost:7298""""/api/auth/login""" - null null
[20-06-2024 21:47:34265 +03:00 Microsoft.AspNetCore.Cors.Infrastructure.CorsService ] CORS policy execution successful.
[20-06-2024 21:47:34266 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request finished "HTTP/2" "OPTIONS" "https"://"localhost:7298""""/api/auth/login""" - 204 null null 3.5695ms
[20-06-2024 21:47:34267 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request starting "HTTP/2" "POST" "https"://"localhost:7298""""/api/auth/login""" - "application/json" 57
[20-06-2024 21:47:34268 +03:00 Microsoft.AspNetCore.Cors.Infrastructure.CorsService ] CORS policy execution successful.
[20-06-2024 21:47:34315 +03:00 Microsoft.AspNetCore.Routing.EndpointMiddleware ] Executing endpoint '"Project_Keystone.Api.Controllers.AuthController.Login (Project-Keystone)"'
[20-06-2024 21:47:34328 +03:00 Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker ] Route matched with "{action = \"Login\", controller = \"Auth\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(Project_Keystone.Api.Models.DTOs.UserLoginDTO)" on controller "Project_Keystone.Api.Controllers.AuthController" ("Project-Keystone").
[20-06-2024 21:47:35307 +03:00 Microsoft.EntityFrameworkCore.Database.Command ] Executed DbCommand ("28"ms) [Parameters=["@__normalizedEmail_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[Id], [u].[CONCURRENCY_STAMP], [u].[CREATED_AT], [u].[EMAIL], [u].[FIRSTNAME], [u].[LASTNAME], [u].[NormalizedEmail], [u].[NORMALIZED_USER_NAME], [u].[PASSWORD_HASH], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[UPDATED_AT], [u].[UserName]
FROM [USERS] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0"
[20-06-2024 21:47:35440 +03:00 Microsoft.EntityFrameworkCore.Database.Command ] Executed DbCommand ("4"ms) [Parameters=["@__normalizedUserName_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[CONCURRENCY_STAMP], [u].[CREATED_AT], [u].[EMAIL], [u].[FIRSTNAME], [u].[LASTNAME], [u].[NormalizedEmail], [u].[NORMALIZED_USER_NAME], [u].[PASSWORD_HASH], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[UPDATED_AT], [u].[UserName]
FROM [USERS] AS [u]
WHERE [u].[NORMALIZED_USER_NAME] = @__normalizedUserName_0"
[20-06-2024 21:47:35447 +03:00 Microsoft.EntityFrameworkCore.Database.Command ] Executed DbCommand ("0"ms) [Parameters=["@__normalizedEmail_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[Id], [u].[CONCURRENCY_STAMP], [u].[CREATED_AT], [u].[EMAIL], [u].[FIRSTNAME], [u].[LASTNAME], [u].[NormalizedEmail], [u].[NORMALIZED_USER_NAME], [u].[PASSWORD_HASH], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[UPDATED_AT], [u].[UserName]
FROM [USERS] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0"
[20-06-2024 21:47:35509 +03:00 Microsoft.EntityFrameworkCore.Database.Command ] Executed DbCommand ("1"ms) [Parameters=["@p12='?' (Size = 450), @p0='?' (Size = 4000), @p13='?' (Size = 4000), @p1='?' (DbType = DateTime2), @p2='?' (Size = 256), @p3='?' (Size = 4000), @p4='?' (Size = 450), @p5='?' (Size = 256), @p6='?' (Size = 256), @p7='?' (Size = 512), @p8='?' (Size = 4000), @p9='?' (DbType = DateTime2), @p10='?' (DbType = DateTime2), @p11='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [USERS] SET [CONCURRENCY_STAMP] = @p0, [CREATED_AT] = @p1, [EMAIL] = @p2, [FIRSTNAME] = @p3, [LASTNAME] = @p4, [NormalizedEmail] = @p5, [NORMALIZED_USER_NAME] = @p6, [PASSWORD_HASH] = @p7, [RefreshToken] = @p8, [RefreshTokenExpiryTime] = @p9, [UPDATED_AT] = @p10, [UserName] = @p11
OUTPUT 1
WHERE [Id] = @p12 AND [CONCURRENCY_STAMP] = @p13;"
[20-06-2024 21:47:35545 +03:00 Microsoft.EntityFrameworkCore.Database.Command ] Executed DbCommand ("0"ms) [Parameters=["@__userId_0='?' (Size = 450)"], CommandType='Text', CommandTimeout='30']"
""SELECT [r].[Name]
FROM [USER_ROLES] AS [u]
INNER JOIN [ROLES] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[UserId] = @__userId_0"
[20-06-2024 21:47:35561 +03:00 Project_Keystone.Core.Services.AuthService ] User "user@example.com" logged in successfully.
[20-06-2024 21:47:35561 +03:00 Project_Keystone.Api.Controllers.AuthController ] User "user@example.com" logged in successfully
[20-06-2024 21:47:35565 +03:00 Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor ] Executing "OkObjectResult", writing value of type '"<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]"'.
[20-06-2024 21:47:35571 +03:00 Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker ] Executed action "Project_Keystone.Api.Controllers.AuthController.Login (Project-Keystone)" in 1241.0353ms
[20-06-2024 21:47:35572 +03:00 Microsoft.AspNetCore.Routing.EndpointMiddleware ] Executed endpoint '"Project_Keystone.Api.Controllers.AuthController.Login (Project-Keystone)"'
[20-06-2024 21:47:35577 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request finished "HTTP/2" "POST" "https"://"localhost:7298""""/api/auth/login""" - 200 null "application/json; charset=utf-8" 1309.8664ms
[20-06-2024 21:47:51363 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request starting "HTTP/2" "POST" "https"://"localhost:7298""""/api/Auth/login""" - "application/json" 66
[20-06-2024 21:47:51364 +03:00 Microsoft.AspNetCore.Cors.Infrastructure.CorsService ] CORS policy execution successful.
[20-06-2024 21:47:51366 +03:00 Microsoft.AspNetCore.Routing.EndpointMiddleware ] Executing endpoint '"Project_Keystone.Api.Controllers.AuthController.Login (Project-Keystone)"'
[20-06-2024 21:47:51367 +03:00 Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker ] Route matched with "{action = \"Login\", controller = \"Auth\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(Project_Keystone.Api.Models.DTOs.UserLoginDTO)" on controller "Project_Keystone.Api.Controllers.AuthController" ("Project-Keystone").
[20-06-2024 21:47:51405 +03:00 Microsoft.EntityFrameworkCore.Database.Command ] Executed DbCommand ("1"ms) [Parameters=["@__normalizedEmail_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[Id], [u].[CONCURRENCY_STAMP], [u].[CREATED_AT], [u].[EMAIL], [u].[FIRSTNAME], [u].[LASTNAME], [u].[NormalizedEmail], [u].[NORMALIZED_USER_NAME], [u].[PASSWORD_HASH], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[UPDATED_AT], [u].[UserName]
FROM [USERS] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0"
[20-06-2024 21:47:51463 +03:00 Microsoft.EntityFrameworkCore.Database.Command ] Executed DbCommand ("1"ms) [Parameters=["@__normalizedUserName_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[CONCURRENCY_STAMP], [u].[CREATED_AT], [u].[EMAIL], [u].[FIRSTNAME], [u].[LASTNAME], [u].[NormalizedEmail], [u].[NORMALIZED_USER_NAME], [u].[PASSWORD_HASH], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[UPDATED_AT], [u].[UserName]
FROM [USERS] AS [u]
WHERE [u].[NORMALIZED_USER_NAME] = @__normalizedUserName_0"
[20-06-2024 21:47:51465 +03:00 Microsoft.EntityFrameworkCore.Database.Command ] Executed DbCommand ("0"ms) [Parameters=["@__normalizedEmail_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[Id], [u].[CONCURRENCY_STAMP], [u].[CREATED_AT], [u].[EMAIL], [u].[FIRSTNAME], [u].[LASTNAME], [u].[NormalizedEmail], [u].[NORMALIZED_USER_NAME], [u].[PASSWORD_HASH], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[UPDATED_AT], [u].[UserName]
FROM [USERS] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0"
[20-06-2024 21:47:51467 +03:00 Microsoft.EntityFrameworkCore.Database.Command ] Executed DbCommand ("1"ms) [Parameters=["@p12='?' (Size = 450), @p0='?' (Size = 4000), @p13='?' (Size = 4000), @p1='?' (DbType = DateTime2), @p2='?' (Size = 256), @p3='?' (Size = 4000), @p4='?' (Size = 450), @p5='?' (Size = 256), @p6='?' (Size = 256), @p7='?' (Size = 512), @p8='?' (Size = 4000), @p9='?' (DbType = DateTime2), @p10='?' (DbType = DateTime2), @p11='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [USERS] SET [CONCURRENCY_STAMP] = @p0, [CREATED_AT] = @p1, [EMAIL] = @p2, [FIRSTNAME] = @p3, [LASTNAME] = @p4, [NormalizedEmail] = @p5, [NORMALIZED_USER_NAME] = @p6, [PASSWORD_HASH] = @p7, [RefreshToken] = @p8, [RefreshTokenExpiryTime] = @p9, [UPDATED_AT] = @p10, [UserName] = @p11
OUTPUT 1
WHERE [Id] = @p12 AND [CONCURRENCY_STAMP] = @p13;"
[20-06-2024 21:47:51469 +03:00 Microsoft.EntityFrameworkCore.Database.Command ] Executed DbCommand ("0"ms) [Parameters=["@__userId_0='?' (Size = 450)"], CommandType='Text', CommandTimeout='30']"
""SELECT [r].[Name]
FROM [USER_ROLES] AS [u]
INNER JOIN [ROLES] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[UserId] = @__userId_0"
[20-06-2024 21:47:51470 +03:00 Project_Keystone.Core.Services.AuthService ] User "user@example.com" logged in successfully.
[20-06-2024 21:47:51470 +03:00 Project_Keystone.Api.Controllers.AuthController ] User "user@example.com" logged in successfully
[20-06-2024 21:47:51471 +03:00 Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor ] Executing "OkObjectResult", writing value of type '"<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]"'.
[20-06-2024 21:47:51472 +03:00 Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker ] Executed action "Project_Keystone.Api.Controllers.AuthController.Login (Project-Keystone)" in 104.2163ms
[20-06-2024 21:47:51472 +03:00 Microsoft.AspNetCore.Routing.EndpointMiddleware ] Executed endpoint '"Project_Keystone.Api.Controllers.AuthController.Login (Project-Keystone)"'
[20-06-2024 21:47:51473 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request finished "HTTP/2" "POST" "https"://"localhost:7298""""/api/Auth/login""" - 200 null "application/json; charset=utf-8" 110.3709ms
[20-06-2024 21:48:32612 +03:00 Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager ] User profile is available. Using '"C:\Users\alexs\AppData\Local\ASP.NET\DataProtection-Keys"' as key repository and Windows DPAPI to encrypt keys at rest.
[20-06-2024 21:48:32764 +03:00 Microsoft.Hosting.Lifetime ] Now listening on: "https://localhost:7298"
[20-06-2024 21:48:32765 +03:00 Microsoft.Hosting.Lifetime ] Now listening on: "http://localhost:5153"
[20-06-2024 21:48:32766 +03:00 Microsoft.Hosting.Lifetime ] Application started. Press Ctrl+C to shut down.
[20-06-2024 21:48:32766 +03:00 Microsoft.Hosting.Lifetime ] Hosting environment: "Development"
[20-06-2024 21:48:32767 +03:00 Microsoft.Hosting.Lifetime ] Content root path: "C:\WorkSpace\NetApps\Project-Keystone\Project-Keystone"
[20-06-2024 21:48:33668 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request starting "HTTP/2" "GET" "https"://"localhost:7298""""/swagger/index.html""" - null null
[20-06-2024 21:48:33779 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request finished "HTTP/2" "GET" "https"://"localhost:7298""""/swagger/index.html""" - 200 null "text/html;charset=utf-8" 113.9474ms
[20-06-2024 21:48:33799 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request starting "HTTP/2" "GET" "https"://"localhost:7298""""/_framework/aspnetcore-browser-refresh.js""" - null null
[20-06-2024 21:48:33799 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request starting "HTTP/2" "GET" "https"://"localhost:7298""""/_vs/browserLink""" - null null
[20-06-2024 21:48:33799 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request starting "HTTP/2" "GET" "https"://"localhost:7298""""/swagger/swagger-ui.css""" - null null
[20-06-2024 21:48:33808 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request finished "HTTP/2" "GET" "https"://"localhost:7298""""/_framework/aspnetcore-browser-refresh.js""" - 200 13768 "application/javascript; charset=utf-8" 8.2759ms
[20-06-2024 21:48:33814 +03:00 Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware ] Sending file. Request path: '"/swagger-ui.css"'. Physical path: '"N/A"'
[20-06-2024 21:48:33815 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request finished "HTTP/2" "GET" "https"://"localhost:7298""""/swagger/swagger-ui.css""" - 499 152034 "text/css" 15.5239ms
[20-06-2024 21:48:33828 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request finished "HTTP/2" "GET" "https"://"localhost:7298""""/_vs/browserLink""" - 200 null "text/javascript; charset=UTF-8" 28.438ms
[20-06-2024 21:48:33858 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request starting "HTTP/2" "GET" "https"://"localhost:7298""""/swagger/favicon-16x16.png""" - null null
[20-06-2024 21:48:33860 +03:00 Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware ] Sending file. Request path: '"/favicon-16x16.png"'. Physical path: '"N/A"'
[20-06-2024 21:48:33861 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request finished "HTTP/2" "GET" "https"://"localhost:7298""""/swagger/favicon-16x16.png""" - 499 665 "image/png" 2.6255ms
[20-06-2024 21:48:33898 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request starting "HTTP/2" "GET" "https"://"localhost:7298""""/swagger/v1/swagger.json""" - null null
[20-06-2024 21:48:33975 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request finished "HTTP/2" "GET" "https"://"localhost:7298""""/swagger/v1/swagger.json""" - 200 null "application/json;charset=utf-8" 77.7552ms
[20-06-2024 21:48:45202 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request starting "HTTP/2" "OPTIONS" "https"://"localhost:7298""""/api/auth/login""" - null null
[20-06-2024 21:48:45204 +03:00 Microsoft.AspNetCore.Cors.Infrastructure.CorsService ] CORS policy execution successful.
[20-06-2024 21:48:45205 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request finished "HTTP/2" "OPTIONS" "https"://"localhost:7298""""/api/auth/login""" - 204 null null 3.57ms
[20-06-2024 21:48:45206 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request starting "HTTP/2" "POST" "https"://"localhost:7298""""/api/auth/login""" - "application/json" 64
[20-06-2024 21:48:45207 +03:00 Microsoft.AspNetCore.Cors.Infrastructure.CorsService ] CORS policy execution successful.
[20-06-2024 21:48:45251 +03:00 Microsoft.AspNetCore.Routing.EndpointMiddleware ] Executing endpoint '"Project_Keystone.Api.Controllers.AuthController.Login (Project-Keystone)"'
[20-06-2024 21:48:45265 +03:00 Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker ] Route matched with "{action = \"Login\", controller = \"Auth\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(Project_Keystone.Api.Models.DTOs.UserLoginDTO)" on controller "Project_Keystone.Api.Controllers.AuthController" ("Project-Keystone").
[20-06-2024 21:48:46240 +03:00 Microsoft.EntityFrameworkCore.Database.Command ] Executed DbCommand ("27"ms) [Parameters=["@__normalizedEmail_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[Id], [u].[CONCURRENCY_STAMP], [u].[CREATED_AT], [u].[EMAIL], [u].[FIRSTNAME], [u].[LASTNAME], [u].[NormalizedEmail], [u].[NORMALIZED_USER_NAME], [u].[PASSWORD_HASH], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[UPDATED_AT], [u].[UserName]
FROM [USERS] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0"
[20-06-2024 21:48:46255 +03:00 Project_Keystone.Core.Services.AuthService ] Login failed for "alex.santexis@gmail.com"
[20-06-2024 21:48:46281 +03:00 Project_Keystone.Core.Services.AuthService ] An error occurred while logging in user "alex.santexis@gmail.com"
System.Exception: Login failed. Invalid email or password.
   at Project_Keystone.Core.Services.AuthService.LoginUserAsync(UserLoginDTO loginDTO) in C:\WorkSpace\NetApps\Project-Keystone\Project-Keystone\Core\Services\AuthService.cs:line 71
[20-06-2024 21:48:46323 +03:00 Project_Keystone.Api.Controllers.AuthController ] An error occurred while logging in user "alex.santexis@gmail.com"
System.Exception: Login failed. Invalid email or password.
   at Project_Keystone.Core.Services.AuthService.LoginUserAsync(UserLoginDTO loginDTO) in C:\WorkSpace\NetApps\Project-Keystone\Project-Keystone\Core\Services\AuthService.cs:line 71
   at Project_Keystone.Api.Controllers.AuthController.Login(UserLoginDTO loginDTO) in C:\WorkSpace\NetApps\Project-Keystone\Project-Keystone\Api\Controllers\AuthController.cs:line 61
[20-06-2024 21:48:46328 +03:00 Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor ] Executing "ObjectResult", writing value of type '"System.String"'.
[20-06-2024 21:48:46331 +03:00 Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker ] Executed action "Project_Keystone.Api.Controllers.AuthController.Login (Project-Keystone)" in 1063.8272ms
[20-06-2024 21:48:46332 +03:00 Microsoft.AspNetCore.Routing.EndpointMiddleware ] Executed endpoint '"Project_Keystone.Api.Controllers.AuthController.Login (Project-Keystone)"'
[20-06-2024 21:48:46336 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request finished "HTTP/2" "POST" "https"://"localhost:7298""""/api/auth/login""" - 500 null "text/plain; charset=utf-8" 1129.7214ms
[20-06-2024 21:48:54956 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request starting "HTTP/2" "OPTIONS" "https"://"localhost:7298""""/api/auth/login""" - null null
[20-06-2024 21:48:54957 +03:00 Microsoft.AspNetCore.Cors.Infrastructure.CorsService ] CORS policy execution successful.
[20-06-2024 21:48:54958 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request finished "HTTP/2" "OPTIONS" "https"://"localhost:7298""""/api/auth/login""" - 204 null null 1.7584ms
[20-06-2024 21:48:54958 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request starting "HTTP/2" "POST" "https"://"localhost:7298""""/api/auth/login""" - "application/json" 57
[20-06-2024 21:48:54959 +03:00 Microsoft.AspNetCore.Cors.Infrastructure.CorsService ] CORS policy execution successful.
[20-06-2024 21:48:54961 +03:00 Microsoft.AspNetCore.Routing.EndpointMiddleware ] Executing endpoint '"Project_Keystone.Api.Controllers.AuthController.Login (Project-Keystone)"'
[20-06-2024 21:48:54962 +03:00 Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker ] Route matched with "{action = \"Login\", controller = \"Auth\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(Project_Keystone.Api.Models.DTOs.UserLoginDTO)" on controller "Project_Keystone.Api.Controllers.AuthController" ("Project-Keystone").
[20-06-2024 21:48:55005 +03:00 Microsoft.EntityFrameworkCore.Database.Command ] Executed DbCommand ("4"ms) [Parameters=["@__normalizedEmail_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[Id], [u].[CONCURRENCY_STAMP], [u].[CREATED_AT], [u].[EMAIL], [u].[FIRSTNAME], [u].[LASTNAME], [u].[NormalizedEmail], [u].[NORMALIZED_USER_NAME], [u].[PASSWORD_HASH], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[UPDATED_AT], [u].[UserName]
FROM [USERS] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0"
[20-06-2024 21:48:55116 +03:00 Microsoft.EntityFrameworkCore.Database.Command ] Executed DbCommand ("0"ms) [Parameters=["@__normalizedUserName_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[CONCURRENCY_STAMP], [u].[CREATED_AT], [u].[EMAIL], [u].[FIRSTNAME], [u].[LASTNAME], [u].[NormalizedEmail], [u].[NORMALIZED_USER_NAME], [u].[PASSWORD_HASH], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[UPDATED_AT], [u].[UserName]
FROM [USERS] AS [u]
WHERE [u].[NORMALIZED_USER_NAME] = @__normalizedUserName_0"
[20-06-2024 21:48:55121 +03:00 Microsoft.EntityFrameworkCore.Database.Command ] Executed DbCommand ("0"ms) [Parameters=["@__normalizedEmail_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[Id], [u].[CONCURRENCY_STAMP], [u].[CREATED_AT], [u].[EMAIL], [u].[FIRSTNAME], [u].[LASTNAME], [u].[NormalizedEmail], [u].[NORMALIZED_USER_NAME], [u].[PASSWORD_HASH], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[UPDATED_AT], [u].[UserName]
FROM [USERS] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0"
[20-06-2024 21:48:55178 +03:00 Microsoft.EntityFrameworkCore.Database.Command ] Executed DbCommand ("1"ms) [Parameters=["@p12='?' (Size = 450), @p0='?' (Size = 4000), @p13='?' (Size = 4000), @p1='?' (DbType = DateTime2), @p2='?' (Size = 256), @p3='?' (Size = 4000), @p4='?' (Size = 450), @p5='?' (Size = 256), @p6='?' (Size = 256), @p7='?' (Size = 512), @p8='?' (Size = 4000), @p9='?' (DbType = DateTime2), @p10='?' (DbType = DateTime2), @p11='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [USERS] SET [CONCURRENCY_STAMP] = @p0, [CREATED_AT] = @p1, [EMAIL] = @p2, [FIRSTNAME] = @p3, [LASTNAME] = @p4, [NormalizedEmail] = @p5, [NORMALIZED_USER_NAME] = @p6, [PASSWORD_HASH] = @p7, [RefreshToken] = @p8, [RefreshTokenExpiryTime] = @p9, [UPDATED_AT] = @p10, [UserName] = @p11
OUTPUT 1
WHERE [Id] = @p12 AND [CONCURRENCY_STAMP] = @p13;"
[20-06-2024 21:48:55212 +03:00 Microsoft.EntityFrameworkCore.Database.Command ] Executed DbCommand ("0"ms) [Parameters=["@__userId_0='?' (Size = 450)"], CommandType='Text', CommandTimeout='30']"
""SELECT [r].[Name]
FROM [USER_ROLES] AS [u]
INNER JOIN [ROLES] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[UserId] = @__userId_0"
[20-06-2024 21:48:55227 +03:00 Project_Keystone.Core.Services.AuthService ] User "user@example.com" logged in successfully.
[20-06-2024 21:48:55228 +03:00 Project_Keystone.Api.Controllers.AuthController ] User "user@example.com" logged in successfully
[20-06-2024 21:48:55228 +03:00 Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor ] Executing "OkObjectResult", writing value of type '"<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]"'.
[20-06-2024 21:48:55232 +03:00 Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker ] Executed action "Project_Keystone.Api.Controllers.AuthController.Login (Project-Keystone)" in 269.5779ms
[20-06-2024 21:48:55232 +03:00 Microsoft.AspNetCore.Routing.EndpointMiddleware ] Executed endpoint '"Project_Keystone.Api.Controllers.AuthController.Login (Project-Keystone)"'
[20-06-2024 21:48:55233 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request finished "HTTP/2" "POST" "https"://"localhost:7298""""/api/auth/login""" - 200 null "application/json; charset=utf-8" 274.4746ms
[20-06-2024 21:50:31146 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request starting "HTTP/2" "GET" "https"://"localhost:7298""""/swagger/index.html""" - null null
[20-06-2024 21:50:31155 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request finished "HTTP/2" "GET" "https"://"localhost:7298""""/swagger/index.html""" - 200 null "text/html;charset=utf-8" 8.129ms
[20-06-2024 21:50:31166 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request starting "HTTP/2" "GET" "https"://"localhost:7298""""/_vs/browserLink""" - null null
[20-06-2024 21:50:31166 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request starting "HTTP/2" "GET" "https"://"localhost:7298""""/_framework/aspnetcore-browser-refresh.js""" - null null
[20-06-2024 21:50:31173 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request finished "HTTP/2" "GET" "https"://"localhost:7298""""/_framework/aspnetcore-browser-refresh.js""" - 200 13768 "application/javascript; charset=utf-8" 6.3506ms
[20-06-2024 21:50:31182 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request finished "HTTP/2" "GET" "https"://"localhost:7298""""/_vs/browserLink""" - 200 null "text/javascript; charset=UTF-8" 15.4419ms
[20-06-2024 21:50:31248 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request starting "HTTP/2" "GET" "https"://"localhost:7298""""/swagger/v1/swagger.json""" - null null
[20-06-2024 21:50:31257 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request finished "HTTP/2" "GET" "https"://"localhost:7298""""/swagger/v1/swagger.json""" - 200 null "application/json;charset=utf-8" 10.1685ms
[20-06-2024 21:50:47508 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request starting "HTTP/2" "OPTIONS" "https"://"localhost:7298""""/api/auth/login""" - null null
[20-06-2024 21:50:47509 +03:00 Microsoft.AspNetCore.Cors.Infrastructure.CorsService ] CORS policy execution successful.
[20-06-2024 21:50:47510 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request finished "HTTP/2" "OPTIONS" "https"://"localhost:7298""""/api/auth/login""" - 204 null null 1.4147ms
[20-06-2024 21:50:47510 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request starting "HTTP/2" "POST" "https"://"localhost:7298""""/api/auth/login""" - "application/json" 57
[20-06-2024 21:50:47512 +03:00 Microsoft.AspNetCore.Cors.Infrastructure.CorsService ] CORS policy execution successful.
[20-06-2024 21:50:47513 +03:00 Microsoft.AspNetCore.Routing.EndpointMiddleware ] Executing endpoint '"Project_Keystone.Api.Controllers.AuthController.Login (Project-Keystone)"'
[20-06-2024 21:50:47516 +03:00 Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker ] Route matched with "{action = \"Login\", controller = \"Auth\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(Project_Keystone.Api.Models.DTOs.UserLoginDTO)" on controller "Project_Keystone.Api.Controllers.AuthController" ("Project-Keystone").
[20-06-2024 21:50:47538 +03:00 Microsoft.EntityFrameworkCore.Database.Command ] Executed DbCommand ("1"ms) [Parameters=["@__normalizedEmail_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[Id], [u].[CONCURRENCY_STAMP], [u].[CREATED_AT], [u].[EMAIL], [u].[FIRSTNAME], [u].[LASTNAME], [u].[NormalizedEmail], [u].[NORMALIZED_USER_NAME], [u].[PASSWORD_HASH], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[UPDATED_AT], [u].[UserName]
FROM [USERS] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0"
[20-06-2024 21:50:47596 +03:00 Microsoft.EntityFrameworkCore.Database.Command ] Executed DbCommand ("1"ms) [Parameters=["@__normalizedUserName_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[CONCURRENCY_STAMP], [u].[CREATED_AT], [u].[EMAIL], [u].[FIRSTNAME], [u].[LASTNAME], [u].[NormalizedEmail], [u].[NORMALIZED_USER_NAME], [u].[PASSWORD_HASH], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[UPDATED_AT], [u].[UserName]
FROM [USERS] AS [u]
WHERE [u].[NORMALIZED_USER_NAME] = @__normalizedUserName_0"
[20-06-2024 21:50:47598 +03:00 Microsoft.EntityFrameworkCore.Database.Command ] Executed DbCommand ("1"ms) [Parameters=["@__normalizedEmail_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[Id], [u].[CONCURRENCY_STAMP], [u].[CREATED_AT], [u].[EMAIL], [u].[FIRSTNAME], [u].[LASTNAME], [u].[NormalizedEmail], [u].[NORMALIZED_USER_NAME], [u].[PASSWORD_HASH], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[UPDATED_AT], [u].[UserName]
FROM [USERS] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0"
[20-06-2024 21:50:47600 +03:00 Microsoft.EntityFrameworkCore.Database.Command ] Executed DbCommand ("1"ms) [Parameters=["@p12='?' (Size = 450), @p0='?' (Size = 4000), @p13='?' (Size = 4000), @p1='?' (DbType = DateTime2), @p2='?' (Size = 256), @p3='?' (Size = 4000), @p4='?' (Size = 450), @p5='?' (Size = 256), @p6='?' (Size = 256), @p7='?' (Size = 512), @p8='?' (Size = 4000), @p9='?' (DbType = DateTime2), @p10='?' (DbType = DateTime2), @p11='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [USERS] SET [CONCURRENCY_STAMP] = @p0, [CREATED_AT] = @p1, [EMAIL] = @p2, [FIRSTNAME] = @p3, [LASTNAME] = @p4, [NormalizedEmail] = @p5, [NORMALIZED_USER_NAME] = @p6, [PASSWORD_HASH] = @p7, [RefreshToken] = @p8, [RefreshTokenExpiryTime] = @p9, [UPDATED_AT] = @p10, [UserName] = @p11
OUTPUT 1
WHERE [Id] = @p12 AND [CONCURRENCY_STAMP] = @p13;"
[20-06-2024 21:50:47602 +03:00 Microsoft.EntityFrameworkCore.Database.Command ] Executed DbCommand ("0"ms) [Parameters=["@__userId_0='?' (Size = 450)"], CommandType='Text', CommandTimeout='30']"
""SELECT [r].[Name]
FROM [USER_ROLES] AS [u]
INNER JOIN [ROLES] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[UserId] = @__userId_0"
[20-06-2024 21:50:47604 +03:00 Project_Keystone.Core.Services.AuthService ] User "user@example.com" logged in successfully.
[20-06-2024 21:50:47604 +03:00 Project_Keystone.Api.Controllers.AuthController ] User "user@example.com" logged in successfully
[20-06-2024 21:50:47604 +03:00 Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor ] Executing "OkObjectResult", writing value of type '"<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]"'.
[20-06-2024 21:50:47605 +03:00 Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker ] Executed action "Project_Keystone.Api.Controllers.AuthController.Login (Project-Keystone)" in 88.8801ms
[20-06-2024 21:50:47606 +03:00 Microsoft.AspNetCore.Routing.EndpointMiddleware ] Executed endpoint '"Project_Keystone.Api.Controllers.AuthController.Login (Project-Keystone)"'
[20-06-2024 21:50:47606 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request finished "HTTP/2" "POST" "https"://"localhost:7298""""/api/auth/login""" - 200 null "application/json; charset=utf-8" 95.7093ms
[20-06-2024 21:52:09486 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request starting "HTTP/2" "OPTIONS" "https"://"localhost:7298""""/api/auth/delete""" - null null
[20-06-2024 21:52:09490 +03:00 Microsoft.AspNetCore.Cors.Infrastructure.CorsService ] CORS policy execution successful.
[20-06-2024 21:52:09490 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request finished "HTTP/2" "OPTIONS" "https"://"localhost:7298""""/api/auth/delete""" - 204 null null 4.1954ms
[20-06-2024 21:52:09491 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request starting "HTTP/2" "DELETE" "https"://"localhost:7298""""/api/auth/delete""" - "application/json" 28
[20-06-2024 21:52:09492 +03:00 Microsoft.AspNetCore.Cors.Infrastructure.CorsService ] CORS policy execution successful.
[20-06-2024 21:52:09496 +03:00 Microsoft.AspNetCore.Authorization.DefaultAuthorizationService ] Authorization failed. "These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user."
[20-06-2024 21:52:09499 +03:00 Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler ] AuthenticationScheme: "Bearer" was challenged.
[20-06-2024 21:52:09499 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request finished "HTTP/2" "DELETE" "https"://"localhost:7298""""/api/auth/delete""" - 401 0 null 8.3226ms
[20-06-2024 22:04:28407 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request starting "HTTP/2" "OPTIONS" "https"://"localhost:7298""""/api/auth/login""" - null null
[20-06-2024 22:04:28409 +03:00 Microsoft.AspNetCore.Cors.Infrastructure.CorsService ] CORS policy execution successful.
[20-06-2024 22:04:28409 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request finished "HTTP/2" "OPTIONS" "https"://"localhost:7298""""/api/auth/login""" - 204 null null 3.3109ms
[20-06-2024 22:04:28411 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request starting "HTTP/2" "POST" "https"://"localhost:7298""""/api/auth/login""" - "application/json" 57
[20-06-2024 22:04:28413 +03:00 Microsoft.AspNetCore.Cors.Infrastructure.CorsService ] CORS policy execution successful.
[20-06-2024 22:04:28414 +03:00 Microsoft.AspNetCore.Routing.EndpointMiddleware ] Executing endpoint '"Project_Keystone.Api.Controllers.AuthController.Login (Project-Keystone)"'
[20-06-2024 22:04:28414 +03:00 Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker ] Route matched with "{action = \"Login\", controller = \"Auth\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(Project_Keystone.Api.Models.DTOs.UserLoginDTO)" on controller "Project_Keystone.Api.Controllers.AuthController" ("Project-Keystone").
[20-06-2024 22:04:28448 +03:00 Microsoft.EntityFrameworkCore.Database.Command ] Executed DbCommand ("26"ms) [Parameters=["@__normalizedEmail_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[Id], [u].[CONCURRENCY_STAMP], [u].[CREATED_AT], [u].[EMAIL], [u].[FIRSTNAME], [u].[LASTNAME], [u].[NormalizedEmail], [u].[NORMALIZED_USER_NAME], [u].[PASSWORD_HASH], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[UPDATED_AT], [u].[UserName]
FROM [USERS] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0"
[20-06-2024 22:04:28508 +03:00 Microsoft.EntityFrameworkCore.Database.Command ] Executed DbCommand ("1"ms) [Parameters=["@__normalizedUserName_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[CONCURRENCY_STAMP], [u].[CREATED_AT], [u].[EMAIL], [u].[FIRSTNAME], [u].[LASTNAME], [u].[NormalizedEmail], [u].[NORMALIZED_USER_NAME], [u].[PASSWORD_HASH], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[UPDATED_AT], [u].[UserName]
FROM [USERS] AS [u]
WHERE [u].[NORMALIZED_USER_NAME] = @__normalizedUserName_0"
[20-06-2024 22:04:28509 +03:00 Microsoft.EntityFrameworkCore.Database.Command ] Executed DbCommand ("0"ms) [Parameters=["@__normalizedEmail_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[Id], [u].[CONCURRENCY_STAMP], [u].[CREATED_AT], [u].[EMAIL], [u].[FIRSTNAME], [u].[LASTNAME], [u].[NormalizedEmail], [u].[NORMALIZED_USER_NAME], [u].[PASSWORD_HASH], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[UPDATED_AT], [u].[UserName]
FROM [USERS] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0"
[20-06-2024 22:04:28513 +03:00 Microsoft.EntityFrameworkCore.Database.Command ] Executed DbCommand ("3"ms) [Parameters=["@p12='?' (Size = 450), @p0='?' (Size = 4000), @p13='?' (Size = 4000), @p1='?' (DbType = DateTime2), @p2='?' (Size = 256), @p3='?' (Size = 4000), @p4='?' (Size = 450), @p5='?' (Size = 256), @p6='?' (Size = 256), @p7='?' (Size = 512), @p8='?' (Size = 4000), @p9='?' (DbType = DateTime2), @p10='?' (DbType = DateTime2), @p11='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [USERS] SET [CONCURRENCY_STAMP] = @p0, [CREATED_AT] = @p1, [EMAIL] = @p2, [FIRSTNAME] = @p3, [LASTNAME] = @p4, [NormalizedEmail] = @p5, [NORMALIZED_USER_NAME] = @p6, [PASSWORD_HASH] = @p7, [RefreshToken] = @p8, [RefreshTokenExpiryTime] = @p9, [UPDATED_AT] = @p10, [UserName] = @p11
OUTPUT 1
WHERE [Id] = @p12 AND [CONCURRENCY_STAMP] = @p13;"
[20-06-2024 22:04:28516 +03:00 Microsoft.EntityFrameworkCore.Database.Command ] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 450)"], CommandType='Text', CommandTimeout='30']"
""SELECT [r].[Name]
FROM [USER_ROLES] AS [u]
INNER JOIN [ROLES] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[UserId] = @__userId_0"
[20-06-2024 22:04:28516 +03:00 Project_Keystone.Core.Services.AuthService ] User "user@example.com" logged in successfully.
[20-06-2024 22:04:28517 +03:00 Project_Keystone.Api.Controllers.AuthController ] User "user@example.com" logged in successfully
[20-06-2024 22:04:28517 +03:00 Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor ] Executing "OkObjectResult", writing value of type '"<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]"'.
[20-06-2024 22:04:28518 +03:00 Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker ] Executed action "Project_Keystone.Api.Controllers.AuthController.Login (Project-Keystone)" in 103.0713ms
[20-06-2024 22:04:28518 +03:00 Microsoft.AspNetCore.Routing.EndpointMiddleware ] Executed endpoint '"Project_Keystone.Api.Controllers.AuthController.Login (Project-Keystone)"'
[20-06-2024 22:04:28518 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request finished "HTTP/2" "POST" "https"://"localhost:7298""""/api/auth/login""" - 200 null "application/json; charset=utf-8" 107.0693ms
[20-06-2024 22:04:31101 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request starting "HTTP/2" "OPTIONS" "https"://"localhost:7298""""/api/auth/delete""" - null null
[20-06-2024 22:04:31102 +03:00 Microsoft.AspNetCore.Cors.Infrastructure.CorsService ] CORS policy execution successful.
[20-06-2024 22:04:31102 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request finished "HTTP/2" "OPTIONS" "https"://"localhost:7298""""/api/auth/delete""" - 204 null null 1.35ms
[20-06-2024 22:04:31103 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request starting "HTTP/2" "DELETE" "https"://"localhost:7298""""/api/auth/delete""" - "application/json" 28
[20-06-2024 22:04:31104 +03:00 Microsoft.AspNetCore.Cors.Infrastructure.CorsService ] CORS policy execution successful.
[20-06-2024 22:04:31105 +03:00 Microsoft.AspNetCore.Authorization.DefaultAuthorizationService ] Authorization failed. "These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user."
[20-06-2024 22:04:31105 +03:00 Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler ] AuthenticationScheme: "Bearer" was challenged.
[20-06-2024 22:04:31106 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request finished "HTTP/2" "DELETE" "https"://"localhost:7298""""/api/auth/delete""" - 401 0 null 3.0745ms
[20-06-2024 22:07:15798 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request starting "HTTP/2" "OPTIONS" "https"://"localhost:7298""""/api/auth/login""" - null null
[20-06-2024 22:07:15801 +03:00 Microsoft.AspNetCore.Cors.Infrastructure.CorsService ] CORS policy execution successful.
[20-06-2024 22:07:15802 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request finished "HTTP/2" "OPTIONS" "https"://"localhost:7298""""/api/auth/login""" - 204 null null 3.6844ms
[20-06-2024 22:07:15804 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request starting "HTTP/2" "POST" "https"://"localhost:7298""""/api/auth/login""" - "application/json" 57
[20-06-2024 22:07:15806 +03:00 Microsoft.AspNetCore.Cors.Infrastructure.CorsService ] CORS policy execution successful.
[20-06-2024 22:07:15807 +03:00 Microsoft.AspNetCore.Routing.EndpointMiddleware ] Executing endpoint '"Project_Keystone.Api.Controllers.AuthController.Login (Project-Keystone)"'
[20-06-2024 22:07:15807 +03:00 Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker ] Route matched with "{action = \"Login\", controller = \"Auth\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(Project_Keystone.Api.Models.DTOs.UserLoginDTO)" on controller "Project_Keystone.Api.Controllers.AuthController" ("Project-Keystone").
[20-06-2024 22:07:15811 +03:00 Microsoft.EntityFrameworkCore.Database.Command ] Executed DbCommand ("2"ms) [Parameters=["@__normalizedEmail_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[Id], [u].[CONCURRENCY_STAMP], [u].[CREATED_AT], [u].[EMAIL], [u].[FIRSTNAME], [u].[LASTNAME], [u].[NormalizedEmail], [u].[NORMALIZED_USER_NAME], [u].[PASSWORD_HASH], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[UPDATED_AT], [u].[UserName]
FROM [USERS] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0"
[20-06-2024 22:07:15870 +03:00 Microsoft.EntityFrameworkCore.Database.Command ] Executed DbCommand ("1"ms) [Parameters=["@__normalizedUserName_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[CONCURRENCY_STAMP], [u].[CREATED_AT], [u].[EMAIL], [u].[FIRSTNAME], [u].[LASTNAME], [u].[NormalizedEmail], [u].[NORMALIZED_USER_NAME], [u].[PASSWORD_HASH], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[UPDATED_AT], [u].[UserName]
FROM [USERS] AS [u]
WHERE [u].[NORMALIZED_USER_NAME] = @__normalizedUserName_0"
[20-06-2024 22:07:15871 +03:00 Microsoft.EntityFrameworkCore.Database.Command ] Executed DbCommand ("0"ms) [Parameters=["@__normalizedEmail_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[Id], [u].[CONCURRENCY_STAMP], [u].[CREATED_AT], [u].[EMAIL], [u].[FIRSTNAME], [u].[LASTNAME], [u].[NormalizedEmail], [u].[NORMALIZED_USER_NAME], [u].[PASSWORD_HASH], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[UPDATED_AT], [u].[UserName]
FROM [USERS] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0"
[20-06-2024 22:07:15875 +03:00 Microsoft.EntityFrameworkCore.Database.Command ] Executed DbCommand ("3"ms) [Parameters=["@p12='?' (Size = 450), @p0='?' (Size = 4000), @p13='?' (Size = 4000), @p1='?' (DbType = DateTime2), @p2='?' (Size = 256), @p3='?' (Size = 4000), @p4='?' (Size = 450), @p5='?' (Size = 256), @p6='?' (Size = 256), @p7='?' (Size = 512), @p8='?' (Size = 4000), @p9='?' (DbType = DateTime2), @p10='?' (DbType = DateTime2), @p11='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [USERS] SET [CONCURRENCY_STAMP] = @p0, [CREATED_AT] = @p1, [EMAIL] = @p2, [FIRSTNAME] = @p3, [LASTNAME] = @p4, [NormalizedEmail] = @p5, [NORMALIZED_USER_NAME] = @p6, [PASSWORD_HASH] = @p7, [RefreshToken] = @p8, [RefreshTokenExpiryTime] = @p9, [UPDATED_AT] = @p10, [UserName] = @p11
OUTPUT 1
WHERE [Id] = @p12 AND [CONCURRENCY_STAMP] = @p13;"
[20-06-2024 22:07:15877 +03:00 Microsoft.EntityFrameworkCore.Database.Command ] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 450)"], CommandType='Text', CommandTimeout='30']"
""SELECT [r].[Name]
FROM [USER_ROLES] AS [u]
INNER JOIN [ROLES] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[UserId] = @__userId_0"
[20-06-2024 22:07:15878 +03:00 Project_Keystone.Core.Services.AuthService ] User "user@example.com" logged in successfully.
[20-06-2024 22:07:15879 +03:00 Project_Keystone.Api.Controllers.AuthController ] User "user@example.com" logged in successfully
[20-06-2024 22:07:15879 +03:00 Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor ] Executing "OkObjectResult", writing value of type '"<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]"'.
[20-06-2024 22:07:15880 +03:00 Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker ] Executed action "Project_Keystone.Api.Controllers.AuthController.Login (Project-Keystone)" in 71.636ms
[20-06-2024 22:07:15880 +03:00 Microsoft.AspNetCore.Routing.EndpointMiddleware ] Executed endpoint '"Project_Keystone.Api.Controllers.AuthController.Login (Project-Keystone)"'
[20-06-2024 22:07:15880 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request finished "HTTP/2" "POST" "https"://"localhost:7298""""/api/auth/login""" - 200 null "application/json; charset=utf-8" 76.5609ms
[20-06-2024 22:07:23308 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request starting "HTTP/2" "OPTIONS" "https"://"localhost:7298""""/api/auth/delete""" - null null
[20-06-2024 22:07:23309 +03:00 Microsoft.AspNetCore.Cors.Infrastructure.CorsService ] CORS policy execution successful.
[20-06-2024 22:07:23310 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request finished "HTTP/2" "OPTIONS" "https"://"localhost:7298""""/api/auth/delete""" - 204 null null 1.3104ms
[20-06-2024 22:07:23310 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request starting "HTTP/2" "DELETE" "https"://"localhost:7298""""/api/auth/delete""" - "application/json" 28
[20-06-2024 22:07:23312 +03:00 Microsoft.AspNetCore.Cors.Infrastructure.CorsService ] CORS policy execution successful.
[20-06-2024 22:07:23312 +03:00 Microsoft.AspNetCore.Authorization.DefaultAuthorizationService ] Authorization failed. "These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user."
[20-06-2024 22:07:23313 +03:00 Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler ] AuthenticationScheme: "Bearer" was challenged.
[20-06-2024 22:07:23313 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request finished "HTTP/2" "DELETE" "https"://"localhost:7298""""/api/auth/delete""" - 401 0 null 3.0138ms
[20-06-2024 22:09:36133 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request starting "HTTP/2" "OPTIONS" "https"://"localhost:7298""""/api/auth/update""" - null null
[20-06-2024 22:09:36136 +03:00 Microsoft.AspNetCore.Cors.Infrastructure.CorsService ] CORS policy execution successful.
[20-06-2024 22:09:36137 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request finished "HTTP/2" "OPTIONS" "https"://"localhost:7298""""/api/auth/update""" - 204 null null 3.909ms
[20-06-2024 22:09:36140 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request starting "HTTP/2" "POST" "https"://"localhost:7298""""/api/auth/update""" - "application/json" 91
[20-06-2024 22:09:36143 +03:00 Microsoft.AspNetCore.Cors.Infrastructure.CorsService ] CORS policy execution successful.
[20-06-2024 22:09:36144 +03:00 Microsoft.AspNetCore.Authorization.DefaultAuthorizationService ] Authorization failed. "These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user."
[20-06-2024 22:09:36145 +03:00 Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler ] AuthenticationScheme: "Bearer" was challenged.
[20-06-2024 22:09:36145 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request finished "HTTP/2" "POST" "https"://"localhost:7298""""/api/auth/update""" - 401 0 null 5.0551ms
[20-06-2024 22:11:36124 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request starting "HTTP/2" "OPTIONS" "https"://"localhost:7298""""/api/auth/delete""" - null null
[20-06-2024 22:11:36128 +03:00 Microsoft.AspNetCore.Cors.Infrastructure.CorsService ] CORS policy execution successful.
[20-06-2024 22:11:36128 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request finished "HTTP/2" "OPTIONS" "https"://"localhost:7298""""/api/auth/delete""" - 204 null null 4.0295ms
[20-06-2024 22:11:36131 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request starting "HTTP/2" "DELETE" "https"://"localhost:7298""""/api/auth/delete""" - "application/json" 28
[20-06-2024 22:11:36132 +03:00 Microsoft.AspNetCore.Cors.Infrastructure.CorsService ] CORS policy execution successful.
[20-06-2024 22:11:36158 +03:00 Microsoft.AspNetCore.Routing.EndpointMiddleware ] Executing endpoint '"Project_Keystone.Api.Controllers.AuthController.DeleteUser (Project-Keystone)"'
[20-06-2024 22:11:36161 +03:00 Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker ] Route matched with "{action = \"DeleteUser\", controller = \"Auth\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] DeleteUser(Project_Keystone.Api.Models.DTOs.DeleteUserDTO)" on controller "Project_Keystone.Api.Controllers.AuthController" ("Project-Keystone").
[20-06-2024 22:11:36167 +03:00 Microsoft.EntityFrameworkCore.Database.Command ] Executed DbCommand ("2"ms) [Parameters=["@__normalizedEmail_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[Id], [u].[CONCURRENCY_STAMP], [u].[CREATED_AT], [u].[EMAIL], [u].[FIRSTNAME], [u].[LASTNAME], [u].[NormalizedEmail], [u].[NORMALIZED_USER_NAME], [u].[PASSWORD_HASH], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[UPDATED_AT], [u].[UserName]
FROM [USERS] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0"
[20-06-2024 22:11:36182 +03:00 Microsoft.EntityFrameworkCore.Database.Command ] Executed DbCommand ("4"ms) [Parameters=["@p0='?' (Size = 450), @p1='?' (Size = 4000)"], CommandType='Text', CommandTimeout='30']"
""SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [USERS]
OUTPUT 1
WHERE [Id] = @p0 AND [CONCURRENCY_STAMP] = @p1;"
[20-06-2024 22:11:36185 +03:00 Project_Keystone.Core.Services.AuthService ] User "user@example.com" deleted successfully.
[20-06-2024 22:11:36186 +03:00 Project_Keystone.Api.Controllers.AuthController ] User "user@example.com" deleted successfully
[20-06-2024 22:11:36186 +03:00 Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor ] Executing "OkObjectResult", writing value of type '"<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]"'.
[20-06-2024 22:11:36187 +03:00 Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker ] Executed action "Project_Keystone.Api.Controllers.AuthController.DeleteUser (Project-Keystone)" in 25.6966ms
[20-06-2024 22:11:36188 +03:00 Microsoft.AspNetCore.Routing.EndpointMiddleware ] Executed endpoint '"Project_Keystone.Api.Controllers.AuthController.DeleteUser (Project-Keystone)"'
[20-06-2024 22:11:36188 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request finished "HTTP/2" "DELETE" "https"://"localhost:7298""""/api/auth/delete""" - 200 null "application/json; charset=utf-8" 57.1966ms
[20-06-2024 22:12:54152 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request starting "HTTP/2" "OPTIONS" "https"://"localhost:7298""""/api/auth/register""" - null null
[20-06-2024 22:12:54156 +03:00 Microsoft.AspNetCore.Cors.Infrastructure.CorsService ] CORS policy execution successful.
[20-06-2024 22:12:54156 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request finished "HTTP/2" "OPTIONS" "https"://"localhost:7298""""/api/auth/register""" - 204 null null 3.6963ms
[20-06-2024 22:12:54158 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request starting "HTTP/2" "POST" "https"://"localhost:7298""""/api/auth/register""" - "application/json" 111
[20-06-2024 22:12:54160 +03:00 Microsoft.AspNetCore.Cors.Infrastructure.CorsService ] CORS policy execution successful.
[20-06-2024 22:12:54160 +03:00 Microsoft.AspNetCore.Routing.EndpointMiddleware ] Executing endpoint '"Project_Keystone.Api.Controllers.AuthController.Register (Project-Keystone)"'
[20-06-2024 22:12:54163 +03:00 Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker ] Route matched with "{action = \"Register\", controller = \"Auth\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Register(Project_Keystone.Api.Models.DTOs.UserRegisterDTO)" on controller "Project_Keystone.Api.Controllers.AuthController" ("Project-Keystone").
[20-06-2024 22:12:54172 +03:00 Project_Keystone.Core.Services.AuthService ] Before CreateAsync: User ID: 63d30108-89f7-4b39-bd2b-8e30d8ab8bfc, UserName: alex.santexis@gmail.com
[20-06-2024 22:12:54237 +03:00 Microsoft.EntityFrameworkCore.Database.Command ] Executed DbCommand ("2"ms) [Parameters=["@__normalizedUserName_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[CONCURRENCY_STAMP], [u].[CREATED_AT], [u].[EMAIL], [u].[FIRSTNAME], [u].[LASTNAME], [u].[NormalizedEmail], [u].[NORMALIZED_USER_NAME], [u].[PASSWORD_HASH], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[UPDATED_AT], [u].[UserName]
FROM [USERS] AS [u]
WHERE [u].[NORMALIZED_USER_NAME] = @__normalizedUserName_0"
[20-06-2024 22:12:54239 +03:00 Microsoft.EntityFrameworkCore.Database.Command ] Executed DbCommand ("1"ms) [Parameters=["@__normalizedEmail_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[Id], [u].[CONCURRENCY_STAMP], [u].[CREATED_AT], [u].[EMAIL], [u].[FIRSTNAME], [u].[LASTNAME], [u].[NormalizedEmail], [u].[NORMALIZED_USER_NAME], [u].[PASSWORD_HASH], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[UPDATED_AT], [u].[UserName]
FROM [USERS] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0"
[20-06-2024 22:12:54250 +03:00 Microsoft.EntityFrameworkCore.Database.Command ] Executed DbCommand ("2"ms) [Parameters=["@p0='?' (Size = 450), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (Size = 256), @p4='?' (Size = 4000), @p5='?' (Size = 450), @p6='?' (Size = 256), @p7='?' (Size = 256), @p8='?' (Size = 512), @p9='?' (Size = 4000), @p10='?' (DbType = DateTime2), @p11='?' (DbType = DateTime2), @p12='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [USERS] ([Id], [CONCURRENCY_STAMP], [CREATED_AT], [EMAIL], [FIRSTNAME], [LASTNAME], [NormalizedEmail], [NORMALIZED_USER_NAME], [PASSWORD_HASH], [RefreshToken], [RefreshTokenExpiryTime], [UPDATED_AT], [UserName])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12);"
[20-06-2024 22:12:54258 +03:00 Microsoft.EntityFrameworkCore.Database.Command ] Executed DbCommand ("1"ms) [Parameters=["@__normalizedRoleName_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [ROLES] AS [r]
WHERE [r].[NormalizedName] = @__normalizedRoleName_0"
[20-06-2024 22:12:54282 +03:00 Microsoft.EntityFrameworkCore.Database.Command ] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 450), @__p_1='?' (Size = 450)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[UserId], [u].[RoleId]
FROM [USER_ROLES] AS [u]
WHERE [u].[UserId] = @__p_0 AND [u].[RoleId] = @__p_1"
[20-06-2024 22:12:54285 +03:00 Microsoft.EntityFrameworkCore.Database.Command ] Executed DbCommand ("0"ms) [Parameters=["@__normalizedRoleName_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [ROLES] AS [r]
WHERE [r].[NormalizedName] = @__normalizedRoleName_0"
[20-06-2024 22:12:54293 +03:00 Microsoft.EntityFrameworkCore.Database.Command ] Executed DbCommand ("1"ms) [Parameters=["@__normalizedUserName_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[CONCURRENCY_STAMP], [u].[CREATED_AT], [u].[EMAIL], [u].[FIRSTNAME], [u].[LASTNAME], [u].[NormalizedEmail], [u].[NORMALIZED_USER_NAME], [u].[PASSWORD_HASH], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[UPDATED_AT], [u].[UserName]
FROM [USERS] AS [u]
WHERE [u].[NORMALIZED_USER_NAME] = @__normalizedUserName_0"
[20-06-2024 22:12:54295 +03:00 Microsoft.EntityFrameworkCore.Database.Command ] Executed DbCommand ("1"ms) [Parameters=["@__normalizedEmail_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[Id], [u].[CONCURRENCY_STAMP], [u].[CREATED_AT], [u].[EMAIL], [u].[FIRSTNAME], [u].[LASTNAME], [u].[NormalizedEmail], [u].[NORMALIZED_USER_NAME], [u].[PASSWORD_HASH], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[UPDATED_AT], [u].[UserName]
FROM [USERS] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0"
[20-06-2024 22:12:54311 +03:00 Microsoft.EntityFrameworkCore.Database.Command ] Executed DbCommand ("3"ms) [Parameters=["@p12='?' (Size = 450), @p0='?' (Size = 4000), @p13='?' (Size = 4000), @p1='?' (DbType = DateTime2), @p2='?' (Size = 256), @p3='?' (Size = 4000), @p4='?' (Size = 450), @p5='?' (Size = 256), @p6='?' (Size = 256), @p7='?' (Size = 512), @p8='?' (Size = 4000), @p9='?' (DbType = DateTime2), @p10='?' (DbType = DateTime2), @p11='?' (Size = 256), @p14='?' (Size = 450), @p15='?' (Size = 450)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [USERS] SET [CONCURRENCY_STAMP] = @p0, [CREATED_AT] = @p1, [EMAIL] = @p2, [FIRSTNAME] = @p3, [LASTNAME] = @p4, [NormalizedEmail] = @p5, [NORMALIZED_USER_NAME] = @p6, [PASSWORD_HASH] = @p7, [RefreshToken] = @p8, [RefreshTokenExpiryTime] = @p9, [UPDATED_AT] = @p10, [UserName] = @p11
OUTPUT 1
WHERE [Id] = @p12 AND [CONCURRENCY_STAMP] = @p13;
INSERT INTO [USER_ROLES] ([RoleId], [UserId])
VALUES (@p14, @p15);"
[20-06-2024 22:12:54317 +03:00 Project_Keystone.Core.Services.AuthService ] User "alex.santexis@gmail.com" registered successfully.
[20-06-2024 22:12:54317 +03:00 Project_Keystone.Api.Controllers.AuthController ] User "alex.santexis@gmail.com" registered successfully
[20-06-2024 22:12:54318 +03:00 Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor ] Executing "OkObjectResult", writing value of type '"<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]"'.
[20-06-2024 22:12:54318 +03:00 Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker ] Executed action "Project_Keystone.Api.Controllers.AuthController.Register (Project-Keystone)" in 155.0946ms
[20-06-2024 22:12:54319 +03:00 Microsoft.AspNetCore.Routing.EndpointMiddleware ] Executed endpoint '"Project_Keystone.Api.Controllers.AuthController.Register (Project-Keystone)"'
[20-06-2024 22:12:54319 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request finished "HTTP/2" "POST" "https"://"localhost:7298""""/api/auth/register""" - 200 null "application/json; charset=utf-8" 160.949ms
[20-06-2024 22:13:01045 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request starting "HTTP/2" "OPTIONS" "https"://"localhost:7298""""/api/auth/login""" - null null
[20-06-2024 22:13:01046 +03:00 Microsoft.AspNetCore.Cors.Infrastructure.CorsService ] CORS policy execution successful.
[20-06-2024 22:13:01046 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request finished "HTTP/2" "OPTIONS" "https"://"localhost:7298""""/api/auth/login""" - 204 null null 1.419ms
[20-06-2024 22:13:01047 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request starting "HTTP/2" "POST" "https"://"localhost:7298""""/api/auth/login""" - "application/json" 64
[20-06-2024 22:13:01048 +03:00 Microsoft.AspNetCore.Cors.Infrastructure.CorsService ] CORS policy execution successful.
[20-06-2024 22:13:01049 +03:00 Microsoft.AspNetCore.Routing.EndpointMiddleware ] Executing endpoint '"Project_Keystone.Api.Controllers.AuthController.Login (Project-Keystone)"'
[20-06-2024 22:13:01049 +03:00 Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker ] Route matched with "{action = \"Login\", controller = \"Auth\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(Project_Keystone.Api.Models.DTOs.UserLoginDTO)" on controller "Project_Keystone.Api.Controllers.AuthController" ("Project-Keystone").
[20-06-2024 22:13:01052 +03:00 Microsoft.EntityFrameworkCore.Database.Command ] Executed DbCommand ("1"ms) [Parameters=["@__normalizedEmail_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[Id], [u].[CONCURRENCY_STAMP], [u].[CREATED_AT], [u].[EMAIL], [u].[FIRSTNAME], [u].[LASTNAME], [u].[NormalizedEmail], [u].[NORMALIZED_USER_NAME], [u].[PASSWORD_HASH], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[UPDATED_AT], [u].[UserName]
FROM [USERS] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0"
[20-06-2024 22:13:01109 +03:00 Microsoft.EntityFrameworkCore.Database.Command ] Executed DbCommand ("0"ms) [Parameters=["@__normalizedUserName_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[CONCURRENCY_STAMP], [u].[CREATED_AT], [u].[EMAIL], [u].[FIRSTNAME], [u].[LASTNAME], [u].[NormalizedEmail], [u].[NORMALIZED_USER_NAME], [u].[PASSWORD_HASH], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[UPDATED_AT], [u].[UserName]
FROM [USERS] AS [u]
WHERE [u].[NORMALIZED_USER_NAME] = @__normalizedUserName_0"
[20-06-2024 22:13:01110 +03:00 Microsoft.EntityFrameworkCore.Database.Command ] Executed DbCommand ("0"ms) [Parameters=["@__normalizedEmail_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[Id], [u].[CONCURRENCY_STAMP], [u].[CREATED_AT], [u].[EMAIL], [u].[FIRSTNAME], [u].[LASTNAME], [u].[NormalizedEmail], [u].[NORMALIZED_USER_NAME], [u].[PASSWORD_HASH], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[UPDATED_AT], [u].[UserName]
FROM [USERS] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0"
[20-06-2024 22:13:01113 +03:00 Microsoft.EntityFrameworkCore.Database.Command ] Executed DbCommand ("2"ms) [Parameters=["@p12='?' (Size = 450), @p0='?' (Size = 4000), @p13='?' (Size = 4000), @p1='?' (DbType = DateTime2), @p2='?' (Size = 256), @p3='?' (Size = 4000), @p4='?' (Size = 450), @p5='?' (Size = 256), @p6='?' (Size = 256), @p7='?' (Size = 512), @p8='?' (Size = 4000), @p9='?' (DbType = DateTime2), @p10='?' (DbType = DateTime2), @p11='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [USERS] SET [CONCURRENCY_STAMP] = @p0, [CREATED_AT] = @p1, [EMAIL] = @p2, [FIRSTNAME] = @p3, [LASTNAME] = @p4, [NormalizedEmail] = @p5, [NORMALIZED_USER_NAME] = @p6, [PASSWORD_HASH] = @p7, [RefreshToken] = @p8, [RefreshTokenExpiryTime] = @p9, [UPDATED_AT] = @p10, [UserName] = @p11
OUTPUT 1
WHERE [Id] = @p12 AND [CONCURRENCY_STAMP] = @p13;"
[20-06-2024 22:13:01116 +03:00 Microsoft.EntityFrameworkCore.Database.Command ] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 450)"], CommandType='Text', CommandTimeout='30']"
""SELECT [r].[Name]
FROM [USER_ROLES] AS [u]
INNER JOIN [ROLES] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[UserId] = @__userId_0"
[20-06-2024 22:13:01116 +03:00 Project_Keystone.Core.Services.AuthService ] User "alex.santexis@gmail.com" logged in successfully.
[20-06-2024 22:13:01117 +03:00 Project_Keystone.Api.Controllers.AuthController ] User "alex.santexis@gmail.com" logged in successfully
[20-06-2024 22:13:01117 +03:00 Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor ] Executing "OkObjectResult", writing value of type '"<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]"'.
[20-06-2024 22:13:01118 +03:00 Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker ] Executed action "Project_Keystone.Api.Controllers.AuthController.Login (Project-Keystone)" in 68.1168ms
[20-06-2024 22:13:01118 +03:00 Microsoft.AspNetCore.Routing.EndpointMiddleware ] Executed endpoint '"Project_Keystone.Api.Controllers.AuthController.Login (Project-Keystone)"'
[20-06-2024 22:13:01118 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request finished "HTTP/2" "POST" "https"://"localhost:7298""""/api/auth/login""" - 200 null "application/json; charset=utf-8" 71.3842ms
[20-06-2024 22:14:29226 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request starting "HTTP/2" "OPTIONS" "https"://"localhost:7298""""/api/auth/update""" - null null
[20-06-2024 22:14:29229 +03:00 Microsoft.AspNetCore.Cors.Infrastructure.CorsService ] CORS policy execution successful.
[20-06-2024 22:14:29230 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request finished "HTTP/2" "OPTIONS" "https"://"localhost:7298""""/api/auth/update""" - 204 null null 4.3221ms
[20-06-2024 22:14:29232 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request starting "HTTP/2" "POST" "https"://"localhost:7298""""/api/auth/update""" - "application/json" 84
[20-06-2024 22:14:29234 +03:00 Microsoft.AspNetCore.Cors.Infrastructure.CorsService ] CORS policy execution successful.
[20-06-2024 22:14:29235 +03:00 Microsoft.AspNetCore.Routing.EndpointMiddleware ] Executing endpoint '"Project_Keystone.Api.Controllers.AuthController.UpdateUser (Project-Keystone)"'
[20-06-2024 22:14:29237 +03:00 Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker ] Route matched with "{action = \"UpdateUser\", controller = \"Auth\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateUser(Project_Keystone.Api.Models.DTOs.UserUpdateDTO)" on controller "Project_Keystone.Api.Controllers.AuthController" ("Project-Keystone").
[20-06-2024 22:14:29242 +03:00 Project_Keystone.Api.Controllers.AuthController ] Authenticated user roles: "User"
[20-06-2024 22:14:29243 +03:00 Project_Keystone.Core.Services.AuthService ] Attempting to update user with email "user@example.com"
[20-06-2024 22:14:29245 +03:00 Microsoft.EntityFrameworkCore.Database.Command ] Executed DbCommand ("2"ms) [Parameters=["@__normalizedEmail_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[Id], [u].[CONCURRENCY_STAMP], [u].[CREATED_AT], [u].[EMAIL], [u].[FIRSTNAME], [u].[LASTNAME], [u].[NormalizedEmail], [u].[NORMALIZED_USER_NAME], [u].[PASSWORD_HASH], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[UPDATED_AT], [u].[UserName]
FROM [USERS] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0"
[20-06-2024 22:14:29246 +03:00 Project_Keystone.Core.Services.AuthService ] Update user failed. User with email "user@example.com" does not exist
[20-06-2024 22:14:29246 +03:00 Project_Keystone.Api.Controllers.AuthController ] User update failed for "user@example.com"
[20-06-2024 22:14:29247 +03:00 Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor ] Executing "BadRequestObjectResult", writing value of type '"<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]"'.
[20-06-2024 22:14:29247 +03:00 Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker ] Executed action "Project_Keystone.Api.Controllers.AuthController.UpdateUser (Project-Keystone)" in 9.5156ms
[20-06-2024 22:14:29248 +03:00 Microsoft.AspNetCore.Routing.EndpointMiddleware ] Executed endpoint '"Project_Keystone.Api.Controllers.AuthController.UpdateUser (Project-Keystone)"'
[20-06-2024 22:14:29248 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request finished "HTTP/2" "POST" "https"://"localhost:7298""""/api/auth/update""" - 400 null "application/json; charset=utf-8" 15.9453ms
[20-06-2024 22:22:51881 +03:00 Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager ] User profile is available. Using '"C:\Users\alexs\AppData\Local\ASP.NET\DataProtection-Keys"' as key repository and Windows DPAPI to encrypt keys at rest.
[20-06-2024 22:22:52017 +03:00 Microsoft.Hosting.Lifetime ] Now listening on: "https://localhost:7298"
[20-06-2024 22:22:52017 +03:00 Microsoft.Hosting.Lifetime ] Now listening on: "http://localhost:5153"
[20-06-2024 22:22:52019 +03:00 Microsoft.Hosting.Lifetime ] Application started. Press Ctrl+C to shut down.
[20-06-2024 22:22:52019 +03:00 Microsoft.Hosting.Lifetime ] Hosting environment: "Development"
[20-06-2024 22:22:52019 +03:00 Microsoft.Hosting.Lifetime ] Content root path: "C:\WorkSpace\NetApps\Project-Keystone\Project-Keystone"
[20-06-2024 22:22:53191 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request starting "HTTP/2" "GET" "https"://"localhost:7298""""/swagger/index.html""" - null null
[20-06-2024 22:22:53300 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request finished "HTTP/2" "GET" "https"://"localhost:7298""""/swagger/index.html""" - 200 null "text/html;charset=utf-8" 112.3397ms
[20-06-2024 22:22:53325 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request starting "HTTP/2" "GET" "https"://"localhost:7298""""/_framework/aspnetcore-browser-refresh.js""" - null null
[20-06-2024 22:22:53325 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request starting "HTTP/2" "GET" "https"://"localhost:7298""""/_vs/browserLink""" - null null
[20-06-2024 22:22:53325 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request starting "HTTP/2" "GET" "https"://"localhost:7298""""/swagger/swagger-ui.css""" - null null
[20-06-2024 22:22:53333 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request finished "HTTP/2" "GET" "https"://"localhost:7298""""/_framework/aspnetcore-browser-refresh.js""" - 200 13768 "application/javascript; charset=utf-8" 7.5933ms
[20-06-2024 22:22:53341 +03:00 Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware ] Sending file. Request path: '"/swagger-ui.css"'. Physical path: '"N/A"'
[20-06-2024 22:22:53341 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request finished "HTTP/2" "GET" "https"://"localhost:7298""""/swagger/swagger-ui.css""" - 499 152034 "text/css" 16.4827ms
[20-06-2024 22:22:53355 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request finished "HTTP/2" "GET" "https"://"localhost:7298""""/_vs/browserLink""" - 200 null "text/javascript; charset=UTF-8" 30.0721ms
[20-06-2024 22:22:53385 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request starting "HTTP/2" "GET" "https"://"localhost:7298""""/swagger/favicon-16x16.png""" - null null
[20-06-2024 22:22:53387 +03:00 Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware ] Sending file. Request path: '"/favicon-16x16.png"'. Physical path: '"N/A"'
[20-06-2024 22:22:53388 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request finished "HTTP/2" "GET" "https"://"localhost:7298""""/swagger/favicon-16x16.png""" - 499 665 "image/png" 2.8626ms
[20-06-2024 22:22:53427 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request starting "HTTP/2" "GET" "https"://"localhost:7298""""/swagger/v1/swagger.json""" - null null
[20-06-2024 22:22:53504 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request finished "HTTP/2" "GET" "https"://"localhost:7298""""/swagger/v1/swagger.json""" - 200 null "application/json;charset=utf-8" 77.2031ms
[20-06-2024 22:22:59034 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request starting "HTTP/2" "OPTIONS" "https"://"localhost:7298""""/api/auth/update""" - null null
[20-06-2024 22:22:59037 +03:00 Microsoft.AspNetCore.Cors.Infrastructure.CorsService ] CORS policy execution successful.
[20-06-2024 22:22:59038 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request finished "HTTP/2" "OPTIONS" "https"://"localhost:7298""""/api/auth/update""" - 204 null null 3.5452ms
[20-06-2024 22:22:59039 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request starting "HTTP/2" "POST" "https"://"localhost:7298""""/api/auth/update""" - "application/json" 84
[20-06-2024 22:22:59040 +03:00 Microsoft.AspNetCore.Cors.Infrastructure.CorsService ] CORS policy execution successful.
[20-06-2024 22:22:59123 +03:00 Microsoft.AspNetCore.Routing.EndpointMiddleware ] Executing endpoint '"Project_Keystone.Api.Controllers.AuthController.UpdateUser (Project-Keystone)"'
[20-06-2024 22:22:59136 +03:00 Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker ] Route matched with "{action = \"UpdateUser\", controller = \"Auth\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateUser(Project_Keystone.Api.Models.DTOs.UserUpdateDTO)" on controller "Project_Keystone.Api.Controllers.AuthController" ("Project-Keystone").
[20-06-2024 22:22:59787 +03:00 Project_Keystone.Api.Controllers.AuthController ] Authenticated user roles: "User"
[20-06-2024 22:22:59789 +03:00 Project_Keystone.Core.Services.AuthService ] Attempting to update user with email "user@example.com"
[20-06-2024 22:23:00137 +03:00 Microsoft.EntityFrameworkCore.Database.Command ] Executed DbCommand ("29"ms) [Parameters=["@__normalizedEmail_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[Id], [u].[CONCURRENCY_STAMP], [u].[CREATED_AT], [u].[EMAIL], [u].[FIRSTNAME], [u].[LASTNAME], [u].[NormalizedEmail], [u].[NORMALIZED_USER_NAME], [u].[PASSWORD_HASH], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[UPDATED_AT], [u].[UserName]
FROM [USERS] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0"
[20-06-2024 22:23:00191 +03:00 Project_Keystone.Core.Services.AuthService ] User found. Updating user details.
[20-06-2024 22:23:00210 +03:00 Microsoft.EntityFrameworkCore.Database.Command ] Executed DbCommand ("4"ms) [Parameters=["@__normalizedUserName_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[CONCURRENCY_STAMP], [u].[CREATED_AT], [u].[EMAIL], [u].[FIRSTNAME], [u].[LASTNAME], [u].[NormalizedEmail], [u].[NORMALIZED_USER_NAME], [u].[PASSWORD_HASH], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[UPDATED_AT], [u].[UserName]
FROM [USERS] AS [u]
WHERE [u].[NORMALIZED_USER_NAME] = @__normalizedUserName_0"
[20-06-2024 22:23:00216 +03:00 Microsoft.EntityFrameworkCore.Database.Command ] Executed DbCommand ("0"ms) [Parameters=["@__normalizedEmail_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[Id], [u].[CONCURRENCY_STAMP], [u].[CREATED_AT], [u].[EMAIL], [u].[FIRSTNAME], [u].[LASTNAME], [u].[NormalizedEmail], [u].[NORMALIZED_USER_NAME], [u].[PASSWORD_HASH], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[UPDATED_AT], [u].[UserName]
FROM [USERS] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0"
[20-06-2024 22:23:00279 +03:00 Microsoft.EntityFrameworkCore.Database.Command ] Executed DbCommand ("4"ms) [Parameters=["@p12='?' (Size = 450), @p0='?' (Size = 4000), @p13='?' (Size = 4000), @p1='?' (DbType = DateTime2), @p2='?' (Size = 256), @p3='?' (Size = 4000), @p4='?' (Size = 450), @p5='?' (Size = 256), @p6='?' (Size = 256), @p7='?' (Size = 512), @p8='?' (Size = 4000), @p9='?' (DbType = DateTime2), @p10='?' (DbType = DateTime2), @p11='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [USERS] SET [CONCURRENCY_STAMP] = @p0, [CREATED_AT] = @p1, [EMAIL] = @p2, [FIRSTNAME] = @p3, [LASTNAME] = @p4, [NormalizedEmail] = @p5, [NORMALIZED_USER_NAME] = @p6, [PASSWORD_HASH] = @p7, [RefreshToken] = @p8, [RefreshTokenExpiryTime] = @p9, [UPDATED_AT] = @p10, [UserName] = @p11
OUTPUT 1
WHERE [Id] = @p12 AND [CONCURRENCY_STAMP] = @p13;"
[20-06-2024 22:23:00288 +03:00 Project_Keystone.Core.Services.AuthService ] User with email "user@example.com" updated successfully
[20-06-2024 22:23:00292 +03:00 Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor ] Executing "OkObjectResult", writing value of type '"<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]"'.
[20-06-2024 22:23:00299 +03:00 Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker ] Executed action "Project_Keystone.Api.Controllers.AuthController.UpdateUser (Project-Keystone)" in 1159.7365ms
[20-06-2024 22:23:00300 +03:00 Microsoft.AspNetCore.Routing.EndpointMiddleware ] Executed endpoint '"Project_Keystone.Api.Controllers.AuthController.UpdateUser (Project-Keystone)"'
[20-06-2024 22:23:00304 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request finished "HTTP/2" "POST" "https"://"localhost:7298""""/api/auth/update""" - 200 null "application/json; charset=utf-8" 1265.3706ms
[20-06-2024 23:02:54905 +03:00 Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager ] User profile is available. Using '"C:\Users\alexs\AppData\Local\ASP.NET\DataProtection-Keys"' as key repository and Windows DPAPI to encrypt keys at rest.
[20-06-2024 23:02:55048 +03:00 Microsoft.Hosting.Lifetime ] Now listening on: "https://localhost:7298"
[20-06-2024 23:02:55048 +03:00 Microsoft.Hosting.Lifetime ] Now listening on: "http://localhost:5153"
[20-06-2024 23:02:55049 +03:00 Microsoft.Hosting.Lifetime ] Application started. Press Ctrl+C to shut down.
[20-06-2024 23:02:55050 +03:00 Microsoft.Hosting.Lifetime ] Hosting environment: "Development"
[20-06-2024 23:02:55050 +03:00 Microsoft.Hosting.Lifetime ] Content root path: "C:\WorkSpace\NetApps\Project-Keystone\Project-Keystone"
[20-06-2024 23:02:55900 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request starting "HTTP/2" "GET" "https"://"localhost:7298""""/swagger/index.html""" - null null
[20-06-2024 23:02:56027 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request finished "HTTP/2" "GET" "https"://"localhost:7298""""/swagger/index.html""" - 200 null "text/html;charset=utf-8" 130.9872ms
[20-06-2024 23:02:56059 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request starting "HTTP/2" "GET" "https"://"localhost:7298""""/_framework/aspnetcore-browser-refresh.js""" - null null
[20-06-2024 23:02:56059 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request starting "HTTP/2" "GET" "https"://"localhost:7298""""/swagger/swagger-ui.css""" - null null
[20-06-2024 23:02:56059 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request starting "HTTP/2" "GET" "https"://"localhost:7298""""/_vs/browserLink""" - null null
[20-06-2024 23:02:56068 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request finished "HTTP/2" "GET" "https"://"localhost:7298""""/_framework/aspnetcore-browser-refresh.js""" - 200 13768 "application/javascript; charset=utf-8" 8.2729ms
[20-06-2024 23:02:56075 +03:00 Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware ] Sending file. Request path: '"/swagger-ui.css"'. Physical path: '"N/A"'
[20-06-2024 23:02:56076 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request finished "HTTP/2" "GET" "https"://"localhost:7298""""/swagger/swagger-ui.css""" - 499 152034 "text/css" 17.0608ms
[20-06-2024 23:02:56092 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request finished "HTTP/2" "GET" "https"://"localhost:7298""""/_vs/browserLink""" - 200 null "text/javascript; charset=UTF-8" 32.3663ms
[20-06-2024 23:02:56123 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request starting "HTTP/2" "GET" "https"://"localhost:7298""""/swagger/favicon-16x16.png""" - null null
[20-06-2024 23:02:56126 +03:00 Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware ] Sending file. Request path: '"/favicon-16x16.png"'. Physical path: '"N/A"'
[20-06-2024 23:02:56126 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request finished "HTTP/2" "GET" "https"://"localhost:7298""""/swagger/favicon-16x16.png""" - 499 665 "image/png" 3.5367ms
[20-06-2024 23:02:56172 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request starting "HTTP/2" "GET" "https"://"localhost:7298""""/swagger/v1/swagger.json""" - null null
[20-06-2024 23:02:56267 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request finished "HTTP/2" "GET" "https"://"localhost:7298""""/swagger/v1/swagger.json""" - 200 null "application/json;charset=utf-8" 95.7104ms
[20-06-2024 23:02:57271 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request starting "HTTP/2" "OPTIONS" "https"://"localhost:7298""""/api/auth/login""" - null null
[20-06-2024 23:02:57273 +03:00 Microsoft.AspNetCore.Cors.Infrastructure.CorsService ] CORS policy execution successful.
[20-06-2024 23:02:57274 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request finished "HTTP/2" "OPTIONS" "https"://"localhost:7298""""/api/auth/login""" - 204 null null 3.7895ms
[20-06-2024 23:02:57275 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request starting "HTTP/2" "POST" "https"://"localhost:7298""""/api/auth/login""" - "application/json" 64
[20-06-2024 23:02:57277 +03:00 Microsoft.AspNetCore.Cors.Infrastructure.CorsService ] CORS policy execution successful.
[20-06-2024 23:02:57322 +03:00 Microsoft.AspNetCore.Routing.EndpointMiddleware ] Executing endpoint '"Project_Keystone.Api.Controllers.AuthController.Login (Project-Keystone)"'
[20-06-2024 23:02:57335 +03:00 Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker ] Route matched with "{action = \"Login\", controller = \"Auth\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(Project_Keystone.Api.Models.DTOs.UserLoginDTO)" on controller "Project_Keystone.Api.Controllers.AuthController" ("Project-Keystone").
[20-06-2024 23:02:58338 +03:00 Microsoft.EntityFrameworkCore.Database.Command ] Executed DbCommand ("28"ms) [Parameters=["@__normalizedEmail_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[Id], [u].[CONCURRENCY_STAMP], [u].[CREATED_AT], [u].[EMAIL], [u].[FIRSTNAME], [u].[LASTNAME], [u].[NormalizedEmail], [u].[NORMALIZED_USER_NAME], [u].[PASSWORD_HASH], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[UPDATED_AT], [u].[UserName]
FROM [USERS] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0"
[20-06-2024 23:02:58353 +03:00 Project_Keystone.Core.Services.AuthService ] Login failed for "alex.santexis@gmail.com"
[20-06-2024 23:02:58375 +03:00 Project_Keystone.Core.Services.AuthService ] An error occurred while logging in user "alex.santexis@gmail.com"
System.Exception: Login failed. Invalid email or password.
   at Project_Keystone.Core.Services.AuthService.LoginUserAsync(UserLoginDTO loginDTO) in C:\WorkSpace\NetApps\Project-Keystone\Project-Keystone\Core\Services\AuthService.cs:line 74
[20-06-2024 23:02:58414 +03:00 Project_Keystone.Api.Controllers.AuthController ] An error occurred while logging in user "alex.santexis@gmail.com"
System.Exception: Login failed. Invalid email or password.
   at Project_Keystone.Core.Services.AuthService.LoginUserAsync(UserLoginDTO loginDTO) in C:\WorkSpace\NetApps\Project-Keystone\Project-Keystone\Core\Services\AuthService.cs:line 74
   at Project_Keystone.Api.Controllers.AuthController.Login(UserLoginDTO loginDTO) in C:\WorkSpace\NetApps\Project-Keystone\Project-Keystone\Api\Controllers\AuthController.cs:line 61
[20-06-2024 23:02:58418 +03:00 Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor ] Executing "ObjectResult", writing value of type '"System.String"'.
[20-06-2024 23:02:58422 +03:00 Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker ] Executed action "Project_Keystone.Api.Controllers.AuthController.Login (Project-Keystone)" in 1083.9943ms
[20-06-2024 23:02:58422 +03:00 Microsoft.AspNetCore.Routing.EndpointMiddleware ] Executed endpoint '"Project_Keystone.Api.Controllers.AuthController.Login (Project-Keystone)"'
[20-06-2024 23:02:58427 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request finished "HTTP/2" "POST" "https"://"localhost:7298""""/api/auth/login""" - 500 null "text/plain; charset=utf-8" 1151.6202ms
[20-06-2024 23:03:26700 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request starting "HTTP/2" "OPTIONS" "https"://"localhost:7298""""/api/auth/login""" - null null
[20-06-2024 23:03:26704 +03:00 Microsoft.AspNetCore.Cors.Infrastructure.CorsService ] CORS policy execution successful.
[20-06-2024 23:03:26705 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request finished "HTTP/2" "OPTIONS" "https"://"localhost:7298""""/api/auth/login""" - 204 null null 5.1369ms
[20-06-2024 23:03:26706 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request starting "HTTP/2" "POST" "https"://"localhost:7298""""/api/auth/login""" - "application/json" 64
[20-06-2024 23:03:26707 +03:00 Microsoft.AspNetCore.Cors.Infrastructure.CorsService ] CORS policy execution successful.
[20-06-2024 23:03:26709 +03:00 Microsoft.AspNetCore.Routing.EndpointMiddleware ] Executing endpoint '"Project_Keystone.Api.Controllers.AuthController.Login (Project-Keystone)"'
[20-06-2024 23:03:26709 +03:00 Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker ] Route matched with "{action = \"Login\", controller = \"Auth\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(Project_Keystone.Api.Models.DTOs.UserLoginDTO)" on controller "Project_Keystone.Api.Controllers.AuthController" ("Project-Keystone").
[20-06-2024 23:03:26753 +03:00 Microsoft.EntityFrameworkCore.Database.Command ] Executed DbCommand ("4"ms) [Parameters=["@__normalizedEmail_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[Id], [u].[CONCURRENCY_STAMP], [u].[CREATED_AT], [u].[EMAIL], [u].[FIRSTNAME], [u].[LASTNAME], [u].[NormalizedEmail], [u].[NORMALIZED_USER_NAME], [u].[PASSWORD_HASH], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[UPDATED_AT], [u].[UserName]
FROM [USERS] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0"
[20-06-2024 23:03:26754 +03:00 Project_Keystone.Core.Services.AuthService ] Login failed for "alex.santexis@gmail.com"
[20-06-2024 23:03:26771 +03:00 Project_Keystone.Core.Services.AuthService ] An error occurred while logging in user "alex.santexis@gmail.com"
System.Exception: Login failed. Invalid email or password.
   at Project_Keystone.Core.Services.AuthService.LoginUserAsync(UserLoginDTO loginDTO) in C:\WorkSpace\NetApps\Project-Keystone\Project-Keystone\Core\Services\AuthService.cs:line 74
[20-06-2024 23:03:26799 +03:00 Project_Keystone.Api.Controllers.AuthController ] An error occurred while logging in user "alex.santexis@gmail.com"
System.Exception: Login failed. Invalid email or password.
   at Project_Keystone.Core.Services.AuthService.LoginUserAsync(UserLoginDTO loginDTO) in C:\WorkSpace\NetApps\Project-Keystone\Project-Keystone\Core\Services\AuthService.cs:line 74
   at Project_Keystone.Api.Controllers.AuthController.Login(UserLoginDTO loginDTO) in C:\WorkSpace\NetApps\Project-Keystone\Project-Keystone\Api\Controllers\AuthController.cs:line 61
[20-06-2024 23:03:26800 +03:00 Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor ] Executing "ObjectResult", writing value of type '"System.String"'.
[20-06-2024 23:03:26801 +03:00 Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker ] Executed action "Project_Keystone.Api.Controllers.AuthController.Login (Project-Keystone)" in 90.8932ms
[20-06-2024 23:03:26802 +03:00 Microsoft.AspNetCore.Routing.EndpointMiddleware ] Executed endpoint '"Project_Keystone.Api.Controllers.AuthController.Login (Project-Keystone)"'
[20-06-2024 23:03:26802 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request finished "HTTP/2" "POST" "https"://"localhost:7298""""/api/auth/login""" - 500 null "text/plain; charset=utf-8" 96.4117ms
[20-06-2024 23:03:56515 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request starting "HTTP/2" "OPTIONS" "https"://"localhost:7298""""/api/auth/register""" - null null
[20-06-2024 23:03:56517 +03:00 Microsoft.AspNetCore.Cors.Infrastructure.CorsService ] CORS policy execution successful.
[20-06-2024 23:03:56517 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request finished "HTTP/2" "OPTIONS" "https"://"localhost:7298""""/api/auth/register""" - 204 null null 1.6959ms
[20-06-2024 23:03:56518 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request starting "HTTP/2" "POST" "https"://"localhost:7298""""/api/auth/register""" - "application/json" 110
[20-06-2024 23:03:56519 +03:00 Microsoft.AspNetCore.Cors.Infrastructure.CorsService ] CORS policy execution successful.
[20-06-2024 23:03:56520 +03:00 Microsoft.AspNetCore.Routing.EndpointMiddleware ] Executing endpoint '"Project_Keystone.Api.Controllers.AuthController.Register (Project-Keystone)"'
[20-06-2024 23:03:56523 +03:00 Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker ] Route matched with "{action = \"Register\", controller = \"Auth\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Register(Project_Keystone.Api.Models.DTOs.UserRegisterDTO)" on controller "Project_Keystone.Api.Controllers.AuthController" ("Project-Keystone").
[20-06-2024 23:03:56553 +03:00 Project_Keystone.Core.Services.AuthService ] Before CreateAsync: User ID: 70cdd312-1c56-4b22-91ae-988921d9a647, UserName: user@example.com
[20-06-2024 23:03:56634 +03:00 Microsoft.EntityFrameworkCore.Database.Command ] Executed DbCommand ("2"ms) [Parameters=["@__normalizedUserName_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[CONCURRENCY_STAMP], [u].[CREATED_AT], [u].[EMAIL], [u].[FIRSTNAME], [u].[LASTNAME], [u].[NormalizedEmail], [u].[NORMALIZED_USER_NAME], [u].[PASSWORD_HASH], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[UPDATED_AT], [u].[UserName]
FROM [USERS] AS [u]
WHERE [u].[NORMALIZED_USER_NAME] = @__normalizedUserName_0"
[20-06-2024 23:03:56640 +03:00 Microsoft.EntityFrameworkCore.Database.Command ] Executed DbCommand ("2"ms) [Parameters=["@__normalizedEmail_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[Id], [u].[CONCURRENCY_STAMP], [u].[CREATED_AT], [u].[EMAIL], [u].[FIRSTNAME], [u].[LASTNAME], [u].[NormalizedEmail], [u].[NORMALIZED_USER_NAME], [u].[PASSWORD_HASH], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[UPDATED_AT], [u].[UserName]
FROM [USERS] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0"
[20-06-2024 23:03:56681 +03:00 Project_Keystone.Core.Services.AuthService ] User registration failed for "user@example.com": "DuplicateEmail: Email 'user@example.com' is already taken."
[20-06-2024 23:03:56682 +03:00 Project_Keystone.Api.Controllers.AuthController ] User registration failed for "user@example.com"
[20-06-2024 23:03:56682 +03:00 Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor ] Executing "BadRequestObjectResult", writing value of type '"System.String"'.
[20-06-2024 23:03:56683 +03:00 Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker ] Executed action "Project_Keystone.Api.Controllers.AuthController.Register (Project-Keystone)" in 158.8214ms
[20-06-2024 23:03:56683 +03:00 Microsoft.AspNetCore.Routing.EndpointMiddleware ] Executed endpoint '"Project_Keystone.Api.Controllers.AuthController.Register (Project-Keystone)"'
[20-06-2024 23:03:56684 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request finished "HTTP/2" "POST" "https"://"localhost:7298""""/api/auth/register""" - 400 null "text/plain; charset=utf-8" 166.2361ms
[20-06-2024 23:04:47486 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request starting "HTTP/2" "OPTIONS" "https"://"localhost:7298""""/api/auth/login""" - null null
[20-06-2024 23:04:47490 +03:00 Microsoft.AspNetCore.Cors.Infrastructure.CorsService ] CORS policy execution successful.
[20-06-2024 23:04:47491 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request finished "HTTP/2" "OPTIONS" "https"://"localhost:7298""""/api/auth/login""" - 204 null null 4.7223ms
[20-06-2024 23:04:47492 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request starting "HTTP/2" "POST" "https"://"localhost:7298""""/api/auth/login""" - "application/json" 57
[20-06-2024 23:04:47493 +03:00 Microsoft.AspNetCore.Cors.Infrastructure.CorsService ] CORS policy execution successful.
[20-06-2024 23:04:47493 +03:00 Microsoft.AspNetCore.Routing.EndpointMiddleware ] Executing endpoint '"Project_Keystone.Api.Controllers.AuthController.Login (Project-Keystone)"'
[20-06-2024 23:04:47494 +03:00 Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker ] Route matched with "{action = \"Login\", controller = \"Auth\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(Project_Keystone.Api.Models.DTOs.UserLoginDTO)" on controller "Project_Keystone.Api.Controllers.AuthController" ("Project-Keystone").
[20-06-2024 23:04:47499 +03:00 Microsoft.EntityFrameworkCore.Database.Command ] Executed DbCommand ("2"ms) [Parameters=["@__normalizedEmail_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[Id], [u].[CONCURRENCY_STAMP], [u].[CREATED_AT], [u].[EMAIL], [u].[FIRSTNAME], [u].[LASTNAME], [u].[NormalizedEmail], [u].[NORMALIZED_USER_NAME], [u].[PASSWORD_HASH], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[UPDATED_AT], [u].[UserName]
FROM [USERS] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0"
[20-06-2024 23:04:47560 +03:00 Microsoft.EntityFrameworkCore.Database.Command ] Executed DbCommand ("1"ms) [Parameters=["@__normalizedUserName_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[CONCURRENCY_STAMP], [u].[CREATED_AT], [u].[EMAIL], [u].[FIRSTNAME], [u].[LASTNAME], [u].[NormalizedEmail], [u].[NORMALIZED_USER_NAME], [u].[PASSWORD_HASH], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[UPDATED_AT], [u].[UserName]
FROM [USERS] AS [u]
WHERE [u].[NORMALIZED_USER_NAME] = @__normalizedUserName_0"
[20-06-2024 23:04:47562 +03:00 Microsoft.EntityFrameworkCore.Database.Command ] Executed DbCommand ("0"ms) [Parameters=["@__normalizedEmail_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[Id], [u].[CONCURRENCY_STAMP], [u].[CREATED_AT], [u].[EMAIL], [u].[FIRSTNAME], [u].[LASTNAME], [u].[NormalizedEmail], [u].[NORMALIZED_USER_NAME], [u].[PASSWORD_HASH], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[UPDATED_AT], [u].[UserName]
FROM [USERS] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0"
[20-06-2024 23:04:47622 +03:00 Microsoft.EntityFrameworkCore.Database.Command ] Executed DbCommand ("3"ms) [Parameters=["@p12='?' (Size = 450), @p0='?' (Size = 4000), @p13='?' (Size = 4000), @p1='?' (DbType = DateTime2), @p2='?' (Size = 256), @p3='?' (Size = 4000), @p4='?' (Size = 450), @p5='?' (Size = 256), @p6='?' (Size = 256), @p7='?' (Size = 512), @p8='?' (Size = 4000), @p9='?' (DbType = DateTime2), @p10='?' (DbType = DateTime2), @p11='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [USERS] SET [CONCURRENCY_STAMP] = @p0, [CREATED_AT] = @p1, [EMAIL] = @p2, [FIRSTNAME] = @p3, [LASTNAME] = @p4, [NormalizedEmail] = @p5, [NORMALIZED_USER_NAME] = @p6, [PASSWORD_HASH] = @p7, [RefreshToken] = @p8, [RefreshTokenExpiryTime] = @p9, [UPDATED_AT] = @p10, [UserName] = @p11
OUTPUT 1
WHERE [Id] = @p12 AND [CONCURRENCY_STAMP] = @p13;"
[20-06-2024 23:04:47657 +03:00 Microsoft.EntityFrameworkCore.Database.Command ] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 450)"], CommandType='Text', CommandTimeout='30']"
""SELECT [r].[Name]
FROM [USER_ROLES] AS [u]
INNER JOIN [ROLES] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[UserId] = @__userId_0"
[20-06-2024 23:04:47675 +03:00 Project_Keystone.Core.Services.AuthService ] User "user@example.com" logged in successfully.
[20-06-2024 23:04:47675 +03:00 Project_Keystone.Api.Controllers.AuthController ] User "user@example.com" logged in successfully
[20-06-2024 23:04:47676 +03:00 Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor ] Executing "OkObjectResult", writing value of type '"<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]"'.
[20-06-2024 23:04:47679 +03:00 Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker ] Executed action "Project_Keystone.Api.Controllers.AuthController.Login (Project-Keystone)" in 184.2924ms
[20-06-2024 23:04:47679 +03:00 Microsoft.AspNetCore.Routing.EndpointMiddleware ] Executed endpoint '"Project_Keystone.Api.Controllers.AuthController.Login (Project-Keystone)"'
[20-06-2024 23:04:47680 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request finished "HTTP/2" "POST" "https"://"localhost:7298""""/api/auth/login""" - 200 null "application/json; charset=utf-8" 187.8127ms
[20-06-2024 23:13:03115 +03:00 Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager ] User profile is available. Using '"C:\Users\alexs\AppData\Local\ASP.NET\DataProtection-Keys"' as key repository and Windows DPAPI to encrypt keys at rest.
[20-06-2024 23:13:03255 +03:00 Microsoft.Hosting.Lifetime ] Now listening on: "https://localhost:7298"
[20-06-2024 23:13:03255 +03:00 Microsoft.Hosting.Lifetime ] Now listening on: "http://localhost:5153"
[20-06-2024 23:13:03256 +03:00 Microsoft.Hosting.Lifetime ] Application started. Press Ctrl+C to shut down.
[20-06-2024 23:13:03257 +03:00 Microsoft.Hosting.Lifetime ] Hosting environment: "Development"
[20-06-2024 23:13:03257 +03:00 Microsoft.Hosting.Lifetime ] Content root path: "C:\WorkSpace\NetApps\Project-Keystone\Project-Keystone"
[20-06-2024 23:13:04099 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request starting "HTTP/2" "GET" "https"://"localhost:7298""""/swagger/index.html""" - null null
[20-06-2024 23:13:04208 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request finished "HTTP/2" "GET" "https"://"localhost:7298""""/swagger/index.html""" - 200 null "text/html;charset=utf-8" 111.5914ms
[20-06-2024 23:13:04234 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request starting "HTTP/2" "GET" "https"://"localhost:7298""""/swagger/swagger-ui.css""" - null null
[20-06-2024 23:13:04234 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request starting "HTTP/2" "GET" "https"://"localhost:7298""""/_framework/aspnetcore-browser-refresh.js""" - null null
[20-06-2024 23:13:04234 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request starting "HTTP/2" "GET" "https"://"localhost:7298""""/_vs/browserLink""" - null null
[20-06-2024 23:13:04242 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request finished "HTTP/2" "GET" "https"://"localhost:7298""""/_framework/aspnetcore-browser-refresh.js""" - 200 13768 "application/javascript; charset=utf-8" 8.5608ms
[20-06-2024 23:13:04247 +03:00 Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware ] Sending file. Request path: '"/swagger-ui.css"'. Physical path: '"N/A"'
[20-06-2024 23:13:04248 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request finished "HTTP/2" "GET" "https"://"localhost:7298""""/swagger/swagger-ui.css""" - 499 152034 "text/css" 14.1031ms
[20-06-2024 23:13:04263 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request finished "HTTP/2" "GET" "https"://"localhost:7298""""/_vs/browserLink""" - 200 null "text/javascript; charset=UTF-8" 29.5048ms
[20-06-2024 23:13:04293 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request starting "HTTP/2" "GET" "https"://"localhost:7298""""/swagger/favicon-16x16.png""" - null null
[20-06-2024 23:13:04295 +03:00 Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware ] Sending file. Request path: '"/favicon-16x16.png"'. Physical path: '"N/A"'
[20-06-2024 23:13:04295 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request finished "HTTP/2" "GET" "https"://"localhost:7298""""/swagger/favicon-16x16.png""" - 499 665 "image/png" 2.7306ms
[20-06-2024 23:13:04322 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request starting "HTTP/2" "GET" "https"://"localhost:7298""""/swagger/v1/swagger.json""" - null null
[20-06-2024 23:13:04398 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request finished "HTTP/2" "GET" "https"://"localhost:7298""""/swagger/v1/swagger.json""" - 200 null "application/json;charset=utf-8" 76.0143ms
[20-06-2024 23:15:08149 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request starting "HTTP/2" "OPTIONS" "https"://"localhost:7298""""/api/auth/delete""" - null null
[20-06-2024 23:15:08152 +03:00 Microsoft.AspNetCore.Cors.Infrastructure.CorsService ] CORS policy execution successful.
[20-06-2024 23:15:08153 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request finished "HTTP/2" "OPTIONS" "https"://"localhost:7298""""/api/auth/delete""" - 204 null null 3.6466ms
[20-06-2024 23:15:08154 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request starting "HTTP/2" "DELETE" "https"://"localhost:7298""""/api/auth/delete""" - "application/json" 28
[20-06-2024 23:15:08155 +03:00 Microsoft.AspNetCore.Cors.Infrastructure.CorsService ] CORS policy execution successful.
[20-06-2024 23:15:08244 +03:00 Microsoft.AspNetCore.Routing.EndpointMiddleware ] Executing endpoint '"Project_Keystone.Api.Controllers.AuthController.DeleteUser (Project-Keystone)"'
[20-06-2024 23:15:08258 +03:00 Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker ] Route matched with "{action = \"DeleteUser\", controller = \"Auth\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] DeleteUser(Project_Keystone.Api.Models.DTOs.DeleteUserDTO)" on controller "Project_Keystone.Api.Controllers.AuthController" ("Project-Keystone").
[20-06-2024 23:15:09227 +03:00 Microsoft.EntityFrameworkCore.Database.Command ] Executed DbCommand ("27"ms) [Parameters=["@__normalizedEmail_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[Id], [u].[CONCURRENCY_STAMP], [u].[CREATED_AT], [u].[EMAIL], [u].[FIRSTNAME], [u].[LASTNAME], [u].[NormalizedEmail], [u].[NORMALIZED_USER_NAME], [u].[PASSWORD_HASH], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[UPDATED_AT], [u].[UserName]
FROM [USERS] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0"
[20-06-2024 23:15:09342 +03:00 Microsoft.EntityFrameworkCore.Database.Command ] Executed DbCommand ("7"ms) [Parameters=["@p0='?' (Size = 450), @p1='?' (Size = 4000)"], CommandType='Text', CommandTimeout='30']"
""SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [USERS]
OUTPUT 1
WHERE [Id] = @p0 AND [CONCURRENCY_STAMP] = @p1;"
[20-06-2024 23:15:09352 +03:00 Project_Keystone.Core.Services.AuthService ] User "user@example.com" deleted successfully.
[20-06-2024 23:15:09352 +03:00 Project_Keystone.Api.Controllers.AuthController ] User "user@example.com" deleted successfully
[20-06-2024 23:15:09356 +03:00 Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor ] Executing "OkObjectResult", writing value of type '"<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]"'.
[20-06-2024 23:15:09362 +03:00 Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker ] Executed action "Project_Keystone.Api.Controllers.AuthController.DeleteUser (Project-Keystone)" in 1101.6724ms
[20-06-2024 23:15:09363 +03:00 Microsoft.AspNetCore.Routing.EndpointMiddleware ] Executed endpoint '"Project_Keystone.Api.Controllers.AuthController.DeleteUser (Project-Keystone)"'
[20-06-2024 23:15:09368 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request finished "HTTP/2" "DELETE" "https"://"localhost:7298""""/api/auth/delete""" - 200 null "application/json; charset=utf-8" 1213.8251ms
[20-06-2024 23:15:37892 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request starting "HTTP/2" "OPTIONS" "https"://"localhost:7298""""/api/auth/register""" - null null
[20-06-2024 23:15:37896 +03:00 Microsoft.AspNetCore.Cors.Infrastructure.CorsService ] CORS policy execution successful.
[20-06-2024 23:15:37896 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request finished "HTTP/2" "OPTIONS" "https"://"localhost:7298""""/api/auth/register""" - 204 null null 4.823ms
[20-06-2024 23:15:37898 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request starting "HTTP/2" "POST" "https"://"localhost:7298""""/api/auth/register""" - "application/json" 116
[20-06-2024 23:15:37899 +03:00 Microsoft.AspNetCore.Cors.Infrastructure.CorsService ] CORS policy execution successful.
[20-06-2024 23:15:37901 +03:00 Microsoft.AspNetCore.Routing.EndpointMiddleware ] Executing endpoint '"Project_Keystone.Api.Controllers.AuthController.Register (Project-Keystone)"'
[20-06-2024 23:15:37904 +03:00 Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker ] Route matched with "{action = \"Register\", controller = \"Auth\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Register(Project_Keystone.Api.Models.DTOs.UserRegisterDTO)" on controller "Project_Keystone.Api.Controllers.AuthController" ("Project-Keystone").
[20-06-2024 23:15:37954 +03:00 Project_Keystone.Core.Services.AuthService ] Before CreateAsync: User ID: 2b3d9d74-5740-4938-83d8-94c8d5ad3ade, UserName: user@example.com
[20-06-2024 23:15:38037 +03:00 Microsoft.EntityFrameworkCore.Database.Command ] Executed DbCommand ("1"ms) [Parameters=["@__normalizedUserName_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[CONCURRENCY_STAMP], [u].[CREATED_AT], [u].[EMAIL], [u].[FIRSTNAME], [u].[LASTNAME], [u].[NormalizedEmail], [u].[NORMALIZED_USER_NAME], [u].[PASSWORD_HASH], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[UPDATED_AT], [u].[UserName]
FROM [USERS] AS [u]
WHERE [u].[NORMALIZED_USER_NAME] = @__normalizedUserName_0"
[20-06-2024 23:15:38044 +03:00 Microsoft.EntityFrameworkCore.Database.Command ] Executed DbCommand ("0"ms) [Parameters=["@__normalizedEmail_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[Id], [u].[CONCURRENCY_STAMP], [u].[CREATED_AT], [u].[EMAIL], [u].[FIRSTNAME], [u].[LASTNAME], [u].[NormalizedEmail], [u].[NORMALIZED_USER_NAME], [u].[PASSWORD_HASH], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[UPDATED_AT], [u].[UserName]
FROM [USERS] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0"
[20-06-2024 23:15:38063 +03:00 Microsoft.EntityFrameworkCore.Database.Command ] Executed DbCommand ("2"ms) [Parameters=["@p0='?' (Size = 450), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (Size = 256), @p4='?' (Size = 4000), @p5='?' (Size = 450), @p6='?' (Size = 256), @p7='?' (Size = 256), @p8='?' (Size = 512), @p9='?' (Size = 4000), @p10='?' (DbType = DateTime2), @p11='?' (DbType = DateTime2), @p12='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [USERS] ([Id], [CONCURRENCY_STAMP], [CREATED_AT], [EMAIL], [FIRSTNAME], [LASTNAME], [NormalizedEmail], [NORMALIZED_USER_NAME], [PASSWORD_HASH], [RefreshToken], [RefreshTokenExpiryTime], [UPDATED_AT], [UserName])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12);"
[20-06-2024 23:15:38072 +03:00 Microsoft.EntityFrameworkCore.Database.Command ] Executed DbCommand ("1"ms) [Parameters=["@__normalizedRoleName_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [ROLES] AS [r]
WHERE [r].[NormalizedName] = @__normalizedRoleName_0"
[20-06-2024 23:15:38100 +03:00 Microsoft.EntityFrameworkCore.Database.Command ] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 450), @__p_1='?' (Size = 450)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[UserId], [u].[RoleId]
FROM [USER_ROLES] AS [u]
WHERE [u].[UserId] = @__p_0 AND [u].[RoleId] = @__p_1"
[20-06-2024 23:15:38103 +03:00 Microsoft.EntityFrameworkCore.Database.Command ] Executed DbCommand ("0"ms) [Parameters=["@__normalizedRoleName_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [ROLES] AS [r]
WHERE [r].[NormalizedName] = @__normalizedRoleName_0"
[20-06-2024 23:15:38113 +03:00 Microsoft.EntityFrameworkCore.Database.Command ] Executed DbCommand ("1"ms) [Parameters=["@__normalizedUserName_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[CONCURRENCY_STAMP], [u].[CREATED_AT], [u].[EMAIL], [u].[FIRSTNAME], [u].[LASTNAME], [u].[NormalizedEmail], [u].[NORMALIZED_USER_NAME], [u].[PASSWORD_HASH], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[UPDATED_AT], [u].[UserName]
FROM [USERS] AS [u]
WHERE [u].[NORMALIZED_USER_NAME] = @__normalizedUserName_0"
[20-06-2024 23:15:38115 +03:00 Microsoft.EntityFrameworkCore.Database.Command ] Executed DbCommand ("0"ms) [Parameters=["@__normalizedEmail_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[Id], [u].[CONCURRENCY_STAMP], [u].[CREATED_AT], [u].[EMAIL], [u].[FIRSTNAME], [u].[LASTNAME], [u].[NormalizedEmail], [u].[NORMALIZED_USER_NAME], [u].[PASSWORD_HASH], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[UPDATED_AT], [u].[UserName]
FROM [USERS] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0"
[20-06-2024 23:15:38134 +03:00 Microsoft.EntityFrameworkCore.Database.Command ] Executed DbCommand ("3"ms) [Parameters=["@p12='?' (Size = 450), @p0='?' (Size = 4000), @p13='?' (Size = 4000), @p1='?' (DbType = DateTime2), @p2='?' (Size = 256), @p3='?' (Size = 4000), @p4='?' (Size = 450), @p5='?' (Size = 256), @p6='?' (Size = 256), @p7='?' (Size = 512), @p8='?' (Size = 4000), @p9='?' (DbType = DateTime2), @p10='?' (DbType = DateTime2), @p11='?' (Size = 256), @p14='?' (Size = 450), @p15='?' (Size = 450)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [USERS] SET [CONCURRENCY_STAMP] = @p0, [CREATED_AT] = @p1, [EMAIL] = @p2, [FIRSTNAME] = @p3, [LASTNAME] = @p4, [NormalizedEmail] = @p5, [NORMALIZED_USER_NAME] = @p6, [PASSWORD_HASH] = @p7, [RefreshToken] = @p8, [RefreshTokenExpiryTime] = @p9, [UPDATED_AT] = @p10, [UserName] = @p11
OUTPUT 1
WHERE [Id] = @p12 AND [CONCURRENCY_STAMP] = @p13;
INSERT INTO [USER_ROLES] ([RoleId], [UserId])
VALUES (@p14, @p15);"
[20-06-2024 23:15:38141 +03:00 Project_Keystone.Core.Services.AuthService ] User "user@example.com" registered successfully.
[20-06-2024 23:15:38142 +03:00 Project_Keystone.Api.Controllers.AuthController ] User "user@example.com" registered successfully
[20-06-2024 23:15:38142 +03:00 Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor ] Executing "OkObjectResult", writing value of type '"<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]"'.
[20-06-2024 23:15:38143 +03:00 Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker ] Executed action "Project_Keystone.Api.Controllers.AuthController.Register (Project-Keystone)" in 238.3665ms
[20-06-2024 23:15:38144 +03:00 Microsoft.AspNetCore.Routing.EndpointMiddleware ] Executed endpoint '"Project_Keystone.Api.Controllers.AuthController.Register (Project-Keystone)"'
[20-06-2024 23:15:38144 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request finished "HTTP/2" "POST" "https"://"localhost:7298""""/api/auth/register""" - 200 null "application/json; charset=utf-8" 246.6614ms
[20-06-2024 23:15:51995 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request starting "HTTP/2" "OPTIONS" "https"://"localhost:7298""""/api/auth/login""" - null null
[20-06-2024 23:15:51996 +03:00 Microsoft.AspNetCore.Cors.Infrastructure.CorsService ] CORS policy execution successful.
[20-06-2024 23:15:51996 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request finished "HTTP/2" "OPTIONS" "https"://"localhost:7298""""/api/auth/login""" - 204 null null 1.7288ms
[20-06-2024 23:15:51997 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request starting "HTTP/2" "POST" "https"://"localhost:7298""""/api/auth/login""" - "application/json" 57
[20-06-2024 23:15:51998 +03:00 Microsoft.AspNetCore.Cors.Infrastructure.CorsService ] CORS policy execution successful.
[20-06-2024 23:15:52000 +03:00 Microsoft.AspNetCore.Routing.EndpointMiddleware ] Executing endpoint '"Project_Keystone.Api.Controllers.AuthController.Login (Project-Keystone)"'
[20-06-2024 23:15:52003 +03:00 Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker ] Route matched with "{action = \"Login\", controller = \"Auth\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(Project_Keystone.Api.Models.DTOs.UserLoginDTO)" on controller "Project_Keystone.Api.Controllers.AuthController" ("Project-Keystone").
[20-06-2024 23:15:52028 +03:00 Microsoft.EntityFrameworkCore.Database.Command ] Executed DbCommand ("1"ms) [Parameters=["@__normalizedEmail_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[Id], [u].[CONCURRENCY_STAMP], [u].[CREATED_AT], [u].[EMAIL], [u].[FIRSTNAME], [u].[LASTNAME], [u].[NormalizedEmail], [u].[NORMALIZED_USER_NAME], [u].[PASSWORD_HASH], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[UPDATED_AT], [u].[UserName]
FROM [USERS] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0"
[20-06-2024 23:15:52089 +03:00 Microsoft.EntityFrameworkCore.Database.Command ] Executed DbCommand ("1"ms) [Parameters=["@__normalizedUserName_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[CONCURRENCY_STAMP], [u].[CREATED_AT], [u].[EMAIL], [u].[FIRSTNAME], [u].[LASTNAME], [u].[NormalizedEmail], [u].[NORMALIZED_USER_NAME], [u].[PASSWORD_HASH], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[UPDATED_AT], [u].[UserName]
FROM [USERS] AS [u]
WHERE [u].[NORMALIZED_USER_NAME] = @__normalizedUserName_0"
[20-06-2024 23:15:52090 +03:00 Microsoft.EntityFrameworkCore.Database.Command ] Executed DbCommand ("0"ms) [Parameters=["@__normalizedEmail_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[Id], [u].[CONCURRENCY_STAMP], [u].[CREATED_AT], [u].[EMAIL], [u].[FIRSTNAME], [u].[LASTNAME], [u].[NormalizedEmail], [u].[NORMALIZED_USER_NAME], [u].[PASSWORD_HASH], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[UPDATED_AT], [u].[UserName]
FROM [USERS] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0"
[20-06-2024 23:15:52094 +03:00 Microsoft.EntityFrameworkCore.Database.Command ] Executed DbCommand ("2"ms) [Parameters=["@p12='?' (Size = 450), @p0='?' (Size = 4000), @p13='?' (Size = 4000), @p1='?' (DbType = DateTime2), @p2='?' (Size = 256), @p3='?' (Size = 4000), @p4='?' (Size = 450), @p5='?' (Size = 256), @p6='?' (Size = 256), @p7='?' (Size = 512), @p8='?' (Size = 4000), @p9='?' (DbType = DateTime2), @p10='?' (DbType = DateTime2), @p11='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [USERS] SET [CONCURRENCY_STAMP] = @p0, [CREATED_AT] = @p1, [EMAIL] = @p2, [FIRSTNAME] = @p3, [LASTNAME] = @p4, [NormalizedEmail] = @p5, [NORMALIZED_USER_NAME] = @p6, [PASSWORD_HASH] = @p7, [RefreshToken] = @p8, [RefreshTokenExpiryTime] = @p9, [UPDATED_AT] = @p10, [UserName] = @p11
OUTPUT 1
WHERE [Id] = @p12 AND [CONCURRENCY_STAMP] = @p13;"
[20-06-2024 23:15:52121 +03:00 Microsoft.EntityFrameworkCore.Database.Command ] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 450)"], CommandType='Text', CommandTimeout='30']"
""SELECT [r].[Name]
FROM [USER_ROLES] AS [u]
INNER JOIN [ROLES] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[UserId] = @__userId_0"
[20-06-2024 23:15:52128 +03:00 Project_Keystone.Core.Services.AuthService ] User "user@example.com" logged in successfully.
[20-06-2024 23:15:52128 +03:00 Project_Keystone.Api.Controllers.AuthController ] User "user@example.com" logged in successfully
[20-06-2024 23:15:52129 +03:00 Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor ] Executing "OkObjectResult", writing value of type '"<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]"'.
[20-06-2024 23:15:52130 +03:00 Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker ] Executed action "Project_Keystone.Api.Controllers.AuthController.Login (Project-Keystone)" in 126.73ms
[20-06-2024 23:15:52130 +03:00 Microsoft.AspNetCore.Routing.EndpointMiddleware ] Executed endpoint '"Project_Keystone.Api.Controllers.AuthController.Login (Project-Keystone)"'
[20-06-2024 23:15:52131 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request finished "HTTP/2" "POST" "https"://"localhost:7298""""/api/auth/login""" - 200 null "application/json; charset=utf-8" 133.68ms
[20-06-2024 23:17:12157 +03:00 Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager ] User profile is available. Using '"C:\Users\alexs\AppData\Local\ASP.NET\DataProtection-Keys"' as key repository and Windows DPAPI to encrypt keys at rest.
[20-06-2024 23:17:12315 +03:00 Microsoft.Hosting.Lifetime ] Now listening on: "https://localhost:7298"
[20-06-2024 23:17:12316 +03:00 Microsoft.Hosting.Lifetime ] Now listening on: "http://localhost:5153"
[20-06-2024 23:17:12317 +03:00 Microsoft.Hosting.Lifetime ] Application started. Press Ctrl+C to shut down.
[20-06-2024 23:17:12318 +03:00 Microsoft.Hosting.Lifetime ] Hosting environment: "Development"
[20-06-2024 23:17:12318 +03:00 Microsoft.Hosting.Lifetime ] Content root path: "C:\WorkSpace\NetApps\Project-Keystone\Project-Keystone"
[20-06-2024 23:17:13242 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request starting "HTTP/2" "GET" "https"://"localhost:7298""""/swagger/index.html""" - null null
[20-06-2024 23:17:13354 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request finished "HTTP/2" "GET" "https"://"localhost:7298""""/swagger/index.html""" - 200 null "text/html;charset=utf-8" 115.4794ms
[20-06-2024 23:17:13375 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request starting "HTTP/2" "GET" "https"://"localhost:7298""""/_vs/browserLink""" - null null
[20-06-2024 23:17:13375 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request starting "HTTP/2" "GET" "https"://"localhost:7298""""/swagger/swagger-ui.css""" - null null
[20-06-2024 23:17:13375 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request starting "HTTP/2" "GET" "https"://"localhost:7298""""/_framework/aspnetcore-browser-refresh.js""" - null null
[20-06-2024 23:17:13387 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request finished "HTTP/2" "GET" "https"://"localhost:7298""""/_framework/aspnetcore-browser-refresh.js""" - 200 13768 "application/javascript; charset=utf-8" 11.4083ms
[20-06-2024 23:17:13392 +03:00 Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware ] Sending file. Request path: '"/swagger-ui.css"'. Physical path: '"N/A"'
[20-06-2024 23:17:13393 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request finished "HTTP/2" "GET" "https"://"localhost:7298""""/swagger/swagger-ui.css""" - 499 152034 "text/css" 17.6534ms
[20-06-2024 23:17:13406 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request finished "HTTP/2" "GET" "https"://"localhost:7298""""/_vs/browserLink""" - 200 null "text/javascript; charset=UTF-8" 31.0995ms
[20-06-2024 23:17:13432 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request starting "HTTP/2" "GET" "https"://"localhost:7298""""/swagger/favicon-16x16.png""" - null null
[20-06-2024 23:17:13434 +03:00 Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware ] Sending file. Request path: '"/favicon-16x16.png"'. Physical path: '"N/A"'
[20-06-2024 23:17:13434 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request finished "HTTP/2" "GET" "https"://"localhost:7298""""/swagger/favicon-16x16.png""" - 499 665 "image/png" 2.8902ms
[20-06-2024 23:17:13463 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request starting "HTTP/2" "GET" "https"://"localhost:7298""""/swagger/v1/swagger.json""" - null null
[20-06-2024 23:17:13542 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request finished "HTTP/2" "GET" "https"://"localhost:7298""""/swagger/v1/swagger.json""" - 200 null "application/json;charset=utf-8" 78.5677ms
[20-06-2024 23:17:25780 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request starting "HTTP/2" "POST" "https"://"localhost:7298""""/api/Auth/login""" - "application/json" 66
[20-06-2024 23:17:25782 +03:00 Microsoft.AspNetCore.Cors.Infrastructure.CorsService ] CORS policy execution successful.
[20-06-2024 23:17:25825 +03:00 Microsoft.AspNetCore.Routing.EndpointMiddleware ] Executing endpoint '"Project_Keystone.Api.Controllers.AuthController.Login (Project-Keystone)"'
[20-06-2024 23:17:25838 +03:00 Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker ] Route matched with "{action = \"Login\", controller = \"Auth\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(Project_Keystone.Api.Models.DTOs.UserLoginDTO)" on controller "Project_Keystone.Api.Controllers.AuthController" ("Project-Keystone").
[20-06-2024 23:17:26825 +03:00 Microsoft.EntityFrameworkCore.Database.Command ] Executed DbCommand ("28"ms) [Parameters=["@__normalizedEmail_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[Id], [u].[CONCURRENCY_STAMP], [u].[CREATED_AT], [u].[EMAIL], [u].[FIRSTNAME], [u].[LASTNAME], [u].[NormalizedEmail], [u].[NORMALIZED_USER_NAME], [u].[PASSWORD_HASH], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[UPDATED_AT], [u].[UserName]
FROM [USERS] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0"
[20-06-2024 23:17:26959 +03:00 Microsoft.EntityFrameworkCore.Database.Command ] Executed DbCommand ("4"ms) [Parameters=["@__normalizedUserName_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[CONCURRENCY_STAMP], [u].[CREATED_AT], [u].[EMAIL], [u].[FIRSTNAME], [u].[LASTNAME], [u].[NormalizedEmail], [u].[NORMALIZED_USER_NAME], [u].[PASSWORD_HASH], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[UPDATED_AT], [u].[UserName]
FROM [USERS] AS [u]
WHERE [u].[NORMALIZED_USER_NAME] = @__normalizedUserName_0"
[20-06-2024 23:17:26966 +03:00 Microsoft.EntityFrameworkCore.Database.Command ] Executed DbCommand ("0"ms) [Parameters=["@__normalizedEmail_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[Id], [u].[CONCURRENCY_STAMP], [u].[CREATED_AT], [u].[EMAIL], [u].[FIRSTNAME], [u].[LASTNAME], [u].[NormalizedEmail], [u].[NORMALIZED_USER_NAME], [u].[PASSWORD_HASH], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[UPDATED_AT], [u].[UserName]
FROM [USERS] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0"
[20-06-2024 23:17:27030 +03:00 Microsoft.EntityFrameworkCore.Database.Command ] Executed DbCommand ("4"ms) [Parameters=["@p12='?' (Size = 450), @p0='?' (Size = 4000), @p13='?' (Size = 4000), @p1='?' (DbType = DateTime2), @p2='?' (Size = 256), @p3='?' (Size = 4000), @p4='?' (Size = 450), @p5='?' (Size = 256), @p6='?' (Size = 256), @p7='?' (Size = 512), @p8='?' (Size = 4000), @p9='?' (DbType = DateTime2), @p10='?' (DbType = DateTime2), @p11='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [USERS] SET [CONCURRENCY_STAMP] = @p0, [CREATED_AT] = @p1, [EMAIL] = @p2, [FIRSTNAME] = @p3, [LASTNAME] = @p4, [NormalizedEmail] = @p5, [NORMALIZED_USER_NAME] = @p6, [PASSWORD_HASH] = @p7, [RefreshToken] = @p8, [RefreshTokenExpiryTime] = @p9, [UPDATED_AT] = @p10, [UserName] = @p11
OUTPUT 1
WHERE [Id] = @p12 AND [CONCURRENCY_STAMP] = @p13;"
[20-06-2024 23:17:27066 +03:00 Microsoft.EntityFrameworkCore.Database.Command ] Executed DbCommand ("2"ms) [Parameters=["@__userId_0='?' (Size = 450)"], CommandType='Text', CommandTimeout='30']"
""SELECT [r].[Name]
FROM [USER_ROLES] AS [u]
INNER JOIN [ROLES] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[UserId] = @__userId_0"
[20-06-2024 23:17:27082 +03:00 Project_Keystone.Core.Services.AuthService ] User "user@example.com" logged in successfully.
[20-06-2024 23:17:27083 +03:00 Project_Keystone.Api.Controllers.AuthController ] User "user@example.com" logged in successfully
[20-06-2024 23:17:27087 +03:00 Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor ] Executing "OkObjectResult", writing value of type '"<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]"'.
[20-06-2024 23:17:27093 +03:00 Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker ] Executed action "Project_Keystone.Api.Controllers.AuthController.Login (Project-Keystone)" in 1253.0995ms
[20-06-2024 23:17:27094 +03:00 Microsoft.AspNetCore.Routing.EndpointMiddleware ] Executed endpoint '"Project_Keystone.Api.Controllers.AuthController.Login (Project-Keystone)"'
[20-06-2024 23:17:27100 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request finished "HTTP/2" "POST" "https"://"localhost:7298""""/api/Auth/login""" - 200 null "application/json; charset=utf-8" 1320.5534ms
[20-06-2024 23:17:36673 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request starting "HTTP/2" "GET" "https"://"localhost:7298""""/api/Auth/me""" - null null
[20-06-2024 23:17:36703 +03:00 Microsoft.AspNetCore.Routing.EndpointMiddleware ] Executing endpoint '"Project_Keystone.Api.Controllers.AuthController.GetCurrentUser (Project-Keystone)"'
[20-06-2024 23:17:36706 +03:00 Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker ] Route matched with "{action = \"GetCurrentUser\", controller = \"Auth\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCurrentUser()" on controller "Project_Keystone.Api.Controllers.AuthController" ("Project-Keystone").
[20-06-2024 23:17:36761 +03:00 Microsoft.EntityFrameworkCore.Database.Command ] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 450)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[CONCURRENCY_STAMP], [u].[CREATED_AT], [u].[EMAIL], [u].[FIRSTNAME], [u].[LASTNAME], [u].[NormalizedEmail], [u].[NORMALIZED_USER_NAME], [u].[PASSWORD_HASH], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[UPDATED_AT], [u].[UserName]
FROM [USERS] AS [u]
WHERE [u].[Id] = @__p_0"
[20-06-2024 23:17:36767 +03:00 Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor ] Executing "OkObjectResult", writing value of type '"Project_Keystone.Api.Models.DTOs.UserDTO"'.
[20-06-2024 23:17:36774 +03:00 Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker ] Executed action "Project_Keystone.Api.Controllers.AuthController.GetCurrentUser (Project-Keystone)" in 67.9606ms
[20-06-2024 23:17:36775 +03:00 Microsoft.AspNetCore.Routing.EndpointMiddleware ] Executed endpoint '"Project_Keystone.Api.Controllers.AuthController.GetCurrentUser (Project-Keystone)"'
[20-06-2024 23:17:36775 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request finished "HTTP/2" "GET" "https"://"localhost:7298""""/api/Auth/me""" - 200 null "application/json; charset=utf-8" 102.9291ms
[20-06-2024 23:19:55651 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request starting "HTTP/2" "OPTIONS" "https"://"localhost:7298""""/api/auth/me""" - null null
[20-06-2024 23:19:55655 +03:00 Microsoft.AspNetCore.Cors.Infrastructure.CorsService ] CORS policy execution successful.
[20-06-2024 23:19:55656 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request finished "HTTP/2" "OPTIONS" "https"://"localhost:7298""""/api/auth/me""" - 204 null null 5.5768ms
[20-06-2024 23:19:55657 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request starting "HTTP/2" "GET" "https"://"localhost:7298""""/api/auth/me""" - null null
[20-06-2024 23:19:55658 +03:00 Microsoft.AspNetCore.Cors.Infrastructure.CorsService ] CORS policy execution successful.
[20-06-2024 23:19:55662 +03:00 Microsoft.AspNetCore.Routing.EndpointMiddleware ] Executing endpoint '"Project_Keystone.Api.Controllers.AuthController.GetCurrentUser (Project-Keystone)"'
[20-06-2024 23:19:55662 +03:00 Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker ] Route matched with "{action = \"GetCurrentUser\", controller = \"Auth\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCurrentUser()" on controller "Project_Keystone.Api.Controllers.AuthController" ("Project-Keystone").
[20-06-2024 23:19:55693 +03:00 Microsoft.EntityFrameworkCore.Database.Command ] Executed DbCommand ("2"ms) [Parameters=["@__p_0='?' (Size = 450)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[CONCURRENCY_STAMP], [u].[CREATED_AT], [u].[EMAIL], [u].[FIRSTNAME], [u].[LASTNAME], [u].[NormalizedEmail], [u].[NORMALIZED_USER_NAME], [u].[PASSWORD_HASH], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[UPDATED_AT], [u].[UserName]
FROM [USERS] AS [u]
WHERE [u].[Id] = @__p_0"
[20-06-2024 23:19:55695 +03:00 Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor ] Executing "OkObjectResult", writing value of type '"Project_Keystone.Api.Models.DTOs.UserDTO"'.
[20-06-2024 23:19:55696 +03:00 Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker ] Executed action "Project_Keystone.Api.Controllers.AuthController.GetCurrentUser (Project-Keystone)" in 32.8315ms
[20-06-2024 23:19:55696 +03:00 Microsoft.AspNetCore.Routing.EndpointMiddleware ] Executed endpoint '"Project_Keystone.Api.Controllers.AuthController.GetCurrentUser (Project-Keystone)"'
[20-06-2024 23:19:55697 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request finished "HTTP/2" "GET" "https"://"localhost:7298""""/api/auth/me""" - 200 null "application/json; charset=utf-8" 39.4964ms
[20-06-2024 23:20:00473 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request starting "HTTP/2" "GET" "https"://"localhost:7298""""/api/auth/me""" - null null
[20-06-2024 23:20:00474 +03:00 Microsoft.AspNetCore.Cors.Infrastructure.CorsService ] CORS policy execution successful.
[20-06-2024 23:20:00475 +03:00 Microsoft.AspNetCore.Routing.EndpointMiddleware ] Executing endpoint '"Project_Keystone.Api.Controllers.AuthController.GetCurrentUser (Project-Keystone)"'
[20-06-2024 23:20:00475 +03:00 Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker ] Route matched with "{action = \"GetCurrentUser\", controller = \"Auth\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCurrentUser()" on controller "Project_Keystone.Api.Controllers.AuthController" ("Project-Keystone").
[20-06-2024 23:20:00479 +03:00 Microsoft.EntityFrameworkCore.Database.Command ] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 450)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[CONCURRENCY_STAMP], [u].[CREATED_AT], [u].[EMAIL], [u].[FIRSTNAME], [u].[LASTNAME], [u].[NormalizedEmail], [u].[NORMALIZED_USER_NAME], [u].[PASSWORD_HASH], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[UPDATED_AT], [u].[UserName]
FROM [USERS] AS [u]
WHERE [u].[Id] = @__p_0"
[20-06-2024 23:20:00482 +03:00 Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor ] Executing "OkObjectResult", writing value of type '"Project_Keystone.Api.Models.DTOs.UserDTO"'.
[20-06-2024 23:20:00482 +03:00 Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker ] Executed action "Project_Keystone.Api.Controllers.AuthController.GetCurrentUser (Project-Keystone)" in 6.3329ms
[20-06-2024 23:20:00483 +03:00 Microsoft.AspNetCore.Routing.EndpointMiddleware ] Executed endpoint '"Project_Keystone.Api.Controllers.AuthController.GetCurrentUser (Project-Keystone)"'
[20-06-2024 23:20:00483 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request finished "HTTP/2" "GET" "https"://"localhost:7298""""/api/auth/me""" - 200 null "application/json; charset=utf-8" 10.7442ms
[20-06-2024 23:20:17484 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request starting "HTTP/2" "OPTIONS" "https"://"localhost:7298""""/api/auth/me""" - null null
[20-06-2024 23:20:17485 +03:00 Microsoft.AspNetCore.Cors.Infrastructure.CorsService ] CORS policy execution successful.
[20-06-2024 23:20:17486 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request finished "HTTP/2" "OPTIONS" "https"://"localhost:7298""""/api/auth/me""" - 204 null null 1.9873ms
[20-06-2024 23:20:17487 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request starting "HTTP/2" "GET" "https"://"localhost:7298""""/api/auth/me""" - null null
[20-06-2024 23:20:17488 +03:00 Microsoft.AspNetCore.Cors.Infrastructure.CorsService ] CORS policy execution successful.
[20-06-2024 23:20:17489 +03:00 Microsoft.AspNetCore.Routing.EndpointMiddleware ] Executing endpoint '"Project_Keystone.Api.Controllers.AuthController.GetCurrentUser (Project-Keystone)"'
[20-06-2024 23:20:17489 +03:00 Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker ] Route matched with "{action = \"GetCurrentUser\", controller = \"Auth\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCurrentUser()" on controller "Project_Keystone.Api.Controllers.AuthController" ("Project-Keystone").
[20-06-2024 23:20:17493 +03:00 Microsoft.EntityFrameworkCore.Database.Command ] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 450)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[CONCURRENCY_STAMP], [u].[CREATED_AT], [u].[EMAIL], [u].[FIRSTNAME], [u].[LASTNAME], [u].[NormalizedEmail], [u].[NORMALIZED_USER_NAME], [u].[PASSWORD_HASH], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[UPDATED_AT], [u].[UserName]
FROM [USERS] AS [u]
WHERE [u].[Id] = @__p_0"
[20-06-2024 23:20:17496 +03:00 Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor ] Executing "OkObjectResult", writing value of type '"Project_Keystone.Api.Models.DTOs.UserDTO"'.
[20-06-2024 23:20:17497 +03:00 Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker ] Executed action "Project_Keystone.Api.Controllers.AuthController.GetCurrentUser (Project-Keystone)" in 7.0485ms
[20-06-2024 23:20:17498 +03:00 Microsoft.AspNetCore.Routing.EndpointMiddleware ] Executed endpoint '"Project_Keystone.Api.Controllers.AuthController.GetCurrentUser (Project-Keystone)"'
[20-06-2024 23:20:17498 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request finished "HTTP/2" "GET" "https"://"localhost:7298""""/api/auth/me""" - 200 null "application/json; charset=utf-8" 11.531ms
[20-06-2024 23:20:42138 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request starting "HTTP/2" "OPTIONS" "https"://"localhost:7298""""/api/auth/me""" - null null
[20-06-2024 23:20:42139 +03:00 Microsoft.AspNetCore.Cors.Infrastructure.CorsService ] CORS policy execution successful.
[20-06-2024 23:20:42139 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request finished "HTTP/2" "OPTIONS" "https"://"localhost:7298""""/api/auth/me""" - 204 null null 1.3789ms
[20-06-2024 23:20:42140 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request starting "HTTP/2" "GET" "https"://"localhost:7298""""/api/auth/me""" - null null
[20-06-2024 23:20:42141 +03:00 Microsoft.AspNetCore.Cors.Infrastructure.CorsService ] CORS policy execution successful.
[20-06-2024 23:20:42141 +03:00 Microsoft.AspNetCore.Routing.EndpointMiddleware ] Executing endpoint '"Project_Keystone.Api.Controllers.AuthController.GetCurrentUser (Project-Keystone)"'
[20-06-2024 23:20:42142 +03:00 Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker ] Route matched with "{action = \"GetCurrentUser\", controller = \"Auth\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCurrentUser()" on controller "Project_Keystone.Api.Controllers.AuthController" ("Project-Keystone").
[20-06-2024 23:20:42146 +03:00 Microsoft.EntityFrameworkCore.Database.Command ] Executed DbCommand ("2"ms) [Parameters=["@__p_0='?' (Size = 450)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[CONCURRENCY_STAMP], [u].[CREATED_AT], [u].[EMAIL], [u].[FIRSTNAME], [u].[LASTNAME], [u].[NormalizedEmail], [u].[NORMALIZED_USER_NAME], [u].[PASSWORD_HASH], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[UPDATED_AT], [u].[UserName]
FROM [USERS] AS [u]
WHERE [u].[Id] = @__p_0"
[20-06-2024 23:20:42148 +03:00 Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor ] Executing "OkObjectResult", writing value of type '"Project_Keystone.Api.Models.DTOs.UserDTO"'.
[20-06-2024 23:20:42148 +03:00 Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker ] Executed action "Project_Keystone.Api.Controllers.AuthController.GetCurrentUser (Project-Keystone)" in 6.0207ms
[20-06-2024 23:20:42149 +03:00 Microsoft.AspNetCore.Routing.EndpointMiddleware ] Executed endpoint '"Project_Keystone.Api.Controllers.AuthController.GetCurrentUser (Project-Keystone)"'
[20-06-2024 23:20:42150 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request finished "HTTP/2" "GET" "https"://"localhost:7298""""/api/auth/me""" - 200 null "application/json; charset=utf-8" 9.792ms
[20-06-2024 23:20:54869 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request starting "HTTP/2" "OPTIONS" "https"://"localhost:7298""""/api/auth/me""" - null null
[20-06-2024 23:20:54870 +03:00 Microsoft.AspNetCore.Cors.Infrastructure.CorsService ] CORS policy execution successful.
[20-06-2024 23:20:54870 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request finished "HTTP/2" "OPTIONS" "https"://"localhost:7298""""/api/auth/me""" - 204 null null 1.5497ms
[20-06-2024 23:20:54871 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request starting "HTTP/2" "GET" "https"://"localhost:7298""""/api/auth/me""" - null null
[20-06-2024 23:20:54872 +03:00 Microsoft.AspNetCore.Cors.Infrastructure.CorsService ] CORS policy execution successful.
[20-06-2024 23:20:54873 +03:00 Microsoft.AspNetCore.Routing.EndpointMiddleware ] Executing endpoint '"Project_Keystone.Api.Controllers.AuthController.GetCurrentUser (Project-Keystone)"'
[20-06-2024 23:20:54873 +03:00 Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker ] Route matched with "{action = \"GetCurrentUser\", controller = \"Auth\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCurrentUser()" on controller "Project_Keystone.Api.Controllers.AuthController" ("Project-Keystone").
[20-06-2024 23:20:54876 +03:00 Microsoft.EntityFrameworkCore.Database.Command ] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 450)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[CONCURRENCY_STAMP], [u].[CREATED_AT], [u].[EMAIL], [u].[FIRSTNAME], [u].[LASTNAME], [u].[NormalizedEmail], [u].[NORMALIZED_USER_NAME], [u].[PASSWORD_HASH], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[UPDATED_AT], [u].[UserName]
FROM [USERS] AS [u]
WHERE [u].[Id] = @__p_0"
[20-06-2024 23:20:54878 +03:00 Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor ] Executing "OkObjectResult", writing value of type '"Project_Keystone.Api.Models.DTOs.UserDTO"'.
[20-06-2024 23:20:54879 +03:00 Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker ] Executed action "Project_Keystone.Api.Controllers.AuthController.GetCurrentUser (Project-Keystone)" in 5.2108ms
[20-06-2024 23:20:54879 +03:00 Microsoft.AspNetCore.Routing.EndpointMiddleware ] Executed endpoint '"Project_Keystone.Api.Controllers.AuthController.GetCurrentUser (Project-Keystone)"'
[20-06-2024 23:20:54880 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request finished "HTTP/2" "GET" "https"://"localhost:7298""""/api/auth/me""" - 200 null "application/json; charset=utf-8" 8.9567ms
[20-06-2024 23:21:43095 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request starting "HTTP/2" "OPTIONS" "https"://"localhost:7298""""/api/auth/me""" - null null
[20-06-2024 23:21:43099 +03:00 Microsoft.AspNetCore.Cors.Infrastructure.CorsService ] CORS policy execution successful.
[20-06-2024 23:21:43099 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request finished "HTTP/2" "OPTIONS" "https"://"localhost:7298""""/api/auth/me""" - 204 null null 6.8372ms
[20-06-2024 23:21:43101 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request starting "HTTP/2" "GET" "https"://"localhost:7298""""/api/auth/me""" - null null
[20-06-2024 23:21:43102 +03:00 Microsoft.AspNetCore.Cors.Infrastructure.CorsService ] CORS policy execution successful.
[20-06-2024 23:21:43103 +03:00 Microsoft.AspNetCore.Routing.EndpointMiddleware ] Executing endpoint '"Project_Keystone.Api.Controllers.AuthController.GetCurrentUser (Project-Keystone)"'
[20-06-2024 23:21:43103 +03:00 Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker ] Route matched with "{action = \"GetCurrentUser\", controller = \"Auth\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCurrentUser()" on controller "Project_Keystone.Api.Controllers.AuthController" ("Project-Keystone").
[20-06-2024 23:21:43108 +03:00 Microsoft.EntityFrameworkCore.Database.Command ] Executed DbCommand ("2"ms) [Parameters=["@__p_0='?' (Size = 450)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[CONCURRENCY_STAMP], [u].[CREATED_AT], [u].[EMAIL], [u].[FIRSTNAME], [u].[LASTNAME], [u].[NormalizedEmail], [u].[NORMALIZED_USER_NAME], [u].[PASSWORD_HASH], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[UPDATED_AT], [u].[UserName]
FROM [USERS] AS [u]
WHERE [u].[Id] = @__p_0"
[20-06-2024 23:21:43110 +03:00 Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor ] Executing "OkObjectResult", writing value of type '"Project_Keystone.Api.Models.DTOs.UserDTO"'.
[20-06-2024 23:21:43110 +03:00 Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker ] Executed action "Project_Keystone.Api.Controllers.AuthController.GetCurrentUser (Project-Keystone)" in 6.0878ms
[20-06-2024 23:21:43111 +03:00 Microsoft.AspNetCore.Routing.EndpointMiddleware ] Executed endpoint '"Project_Keystone.Api.Controllers.AuthController.GetCurrentUser (Project-Keystone)"'
[20-06-2024 23:21:43111 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request finished "HTTP/2" "GET" "https"://"localhost:7298""""/api/auth/me""" - 200 null "application/json; charset=utf-8" 10.5437ms
[20-06-2024 23:24:24463 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request starting "HTTP/2" "OPTIONS" "https"://"localhost:7298""""/api/auth/me""" - null null
[20-06-2024 23:24:24467 +03:00 Microsoft.AspNetCore.Cors.Infrastructure.CorsService ] CORS policy execution successful.
[20-06-2024 23:24:24467 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request finished "HTTP/2" "OPTIONS" "https"://"localhost:7298""""/api/auth/me""" - 204 null null 5.1157ms
[20-06-2024 23:24:24471 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request starting "HTTP/2" "GET" "https"://"localhost:7298""""/api/auth/me""" - null null
[20-06-2024 23:24:24473 +03:00 Microsoft.AspNetCore.Cors.Infrastructure.CorsService ] CORS policy execution successful.
[20-06-2024 23:24:24473 +03:00 Microsoft.AspNetCore.Routing.EndpointMiddleware ] Executing endpoint '"Project_Keystone.Api.Controllers.AuthController.GetCurrentUser (Project-Keystone)"'
[20-06-2024 23:24:24474 +03:00 Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker ] Route matched with "{action = \"GetCurrentUser\", controller = \"Auth\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCurrentUser()" on controller "Project_Keystone.Api.Controllers.AuthController" ("Project-Keystone").
[20-06-2024 23:24:24479 +03:00 Microsoft.EntityFrameworkCore.Database.Command ] Executed DbCommand ("2"ms) [Parameters=["@__p_0='?' (Size = 450)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[CONCURRENCY_STAMP], [u].[CREATED_AT], [u].[EMAIL], [u].[FIRSTNAME], [u].[LASTNAME], [u].[NormalizedEmail], [u].[NORMALIZED_USER_NAME], [u].[PASSWORD_HASH], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[UPDATED_AT], [u].[UserName]
FROM [USERS] AS [u]
WHERE [u].[Id] = @__p_0"
[20-06-2024 23:24:24482 +03:00 Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor ] Executing "OkObjectResult", writing value of type '"Project_Keystone.Api.Models.DTOs.UserDTO"'.
[20-06-2024 23:24:24483 +03:00 Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker ] Executed action "Project_Keystone.Api.Controllers.AuthController.GetCurrentUser (Project-Keystone)" in 8.1317ms
[20-06-2024 23:24:24483 +03:00 Microsoft.AspNetCore.Routing.EndpointMiddleware ] Executed endpoint '"Project_Keystone.Api.Controllers.AuthController.GetCurrentUser (Project-Keystone)"'
[20-06-2024 23:24:24484 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request finished "HTTP/2" "GET" "https"://"localhost:7298""""/api/auth/me""" - 200 null "application/json; charset=utf-8" 13.5292ms
[20-06-2024 23:24:34142 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request starting "HTTP/2" "OPTIONS" "https"://"localhost:7298""""/api/auth/me""" - null null
[20-06-2024 23:24:34143 +03:00 Microsoft.AspNetCore.Cors.Infrastructure.CorsService ] CORS policy execution successful.
[20-06-2024 23:24:34143 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request finished "HTTP/2" "OPTIONS" "https"://"localhost:7298""""/api/auth/me""" - 204 null null 1.54ms
[20-06-2024 23:24:34144 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request starting "HTTP/2" "GET" "https"://"localhost:7298""""/api/auth/me""" - null null
[20-06-2024 23:24:34145 +03:00 Microsoft.AspNetCore.Cors.Infrastructure.CorsService ] CORS policy execution successful.
[20-06-2024 23:24:34145 +03:00 Microsoft.AspNetCore.Routing.EndpointMiddleware ] Executing endpoint '"Project_Keystone.Api.Controllers.AuthController.GetCurrentUser (Project-Keystone)"'
[20-06-2024 23:24:34146 +03:00 Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker ] Route matched with "{action = \"GetCurrentUser\", controller = \"Auth\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCurrentUser()" on controller "Project_Keystone.Api.Controllers.AuthController" ("Project-Keystone").
[20-06-2024 23:24:34149 +03:00 Microsoft.EntityFrameworkCore.Database.Command ] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 450)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[CONCURRENCY_STAMP], [u].[CREATED_AT], [u].[EMAIL], [u].[FIRSTNAME], [u].[LASTNAME], [u].[NormalizedEmail], [u].[NORMALIZED_USER_NAME], [u].[PASSWORD_HASH], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[UPDATED_AT], [u].[UserName]
FROM [USERS] AS [u]
WHERE [u].[Id] = @__p_0"
[20-06-2024 23:24:34151 +03:00 Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor ] Executing "OkObjectResult", writing value of type '"Project_Keystone.Api.Models.DTOs.UserDTO"'.
[20-06-2024 23:24:34151 +03:00 Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker ] Executed action "Project_Keystone.Api.Controllers.AuthController.GetCurrentUser (Project-Keystone)" in 5.0727ms
[20-06-2024 23:24:34152 +03:00 Microsoft.AspNetCore.Routing.EndpointMiddleware ] Executed endpoint '"Project_Keystone.Api.Controllers.AuthController.GetCurrentUser (Project-Keystone)"'
[20-06-2024 23:24:34152 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request finished "HTTP/2" "GET" "https"://"localhost:7298""""/api/auth/me""" - 200 null "application/json; charset=utf-8" 8.6741ms
[20-06-2024 23:24:44617 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request starting "HTTP/2" "OPTIONS" "https"://"localhost:7298""""/api/auth/me""" - null null
[20-06-2024 23:24:44618 +03:00 Microsoft.AspNetCore.Cors.Infrastructure.CorsService ] CORS policy execution successful.
[20-06-2024 23:24:44618 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request finished "HTTP/2" "OPTIONS" "https"://"localhost:7298""""/api/auth/me""" - 204 null null 1.6729ms
[20-06-2024 23:24:44619 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request starting "HTTP/2" "GET" "https"://"localhost:7298""""/api/auth/me""" - null null
[20-06-2024 23:24:44620 +03:00 Microsoft.AspNetCore.Cors.Infrastructure.CorsService ] CORS policy execution successful.
[20-06-2024 23:24:44621 +03:00 Microsoft.AspNetCore.Routing.EndpointMiddleware ] Executing endpoint '"Project_Keystone.Api.Controllers.AuthController.GetCurrentUser (Project-Keystone)"'
[20-06-2024 23:24:44621 +03:00 Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker ] Route matched with "{action = \"GetCurrentUser\", controller = \"Auth\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCurrentUser()" on controller "Project_Keystone.Api.Controllers.AuthController" ("Project-Keystone").
[20-06-2024 23:24:44625 +03:00 Microsoft.EntityFrameworkCore.Database.Command ] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 450)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[CONCURRENCY_STAMP], [u].[CREATED_AT], [u].[EMAIL], [u].[FIRSTNAME], [u].[LASTNAME], [u].[NormalizedEmail], [u].[NORMALIZED_USER_NAME], [u].[PASSWORD_HASH], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[UPDATED_AT], [u].[UserName]
FROM [USERS] AS [u]
WHERE [u].[Id] = @__p_0"
[20-06-2024 23:24:44630 +03:00 Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor ] Executing "OkObjectResult", writing value of type '"Project_Keystone.Api.Models.DTOs.UserDTO"'.
[20-06-2024 23:24:44630 +03:00 Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker ] Executed action "Project_Keystone.Api.Controllers.AuthController.GetCurrentUser (Project-Keystone)" in 8.0683ms
[20-06-2024 23:24:44631 +03:00 Microsoft.AspNetCore.Routing.EndpointMiddleware ] Executed endpoint '"Project_Keystone.Api.Controllers.AuthController.GetCurrentUser (Project-Keystone)"'
[20-06-2024 23:24:44631 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request finished "HTTP/2" "GET" "https"://"localhost:7298""""/api/auth/me""" - 200 null "application/json; charset=utf-8" 12.4553ms
[20-06-2024 23:24:47455 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request starting "HTTP/2" "GET" "https"://"localhost:7298""""/api/auth/me""" - null null
[20-06-2024 23:24:47456 +03:00 Microsoft.AspNetCore.Cors.Infrastructure.CorsService ] CORS policy execution successful.
[20-06-2024 23:24:47456 +03:00 Microsoft.AspNetCore.Routing.EndpointMiddleware ] Executing endpoint '"Project_Keystone.Api.Controllers.AuthController.GetCurrentUser (Project-Keystone)"'
[20-06-2024 23:24:47457 +03:00 Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker ] Route matched with "{action = \"GetCurrentUser\", controller = \"Auth\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCurrentUser()" on controller "Project_Keystone.Api.Controllers.AuthController" ("Project-Keystone").
[20-06-2024 23:24:47459 +03:00 Microsoft.EntityFrameworkCore.Database.Command ] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 450)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[CONCURRENCY_STAMP], [u].[CREATED_AT], [u].[EMAIL], [u].[FIRSTNAME], [u].[LASTNAME], [u].[NormalizedEmail], [u].[NORMALIZED_USER_NAME], [u].[PASSWORD_HASH], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[UPDATED_AT], [u].[UserName]
FROM [USERS] AS [u]
WHERE [u].[Id] = @__p_0"
[20-06-2024 23:24:47461 +03:00 Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor ] Executing "OkObjectResult", writing value of type '"Project_Keystone.Api.Models.DTOs.UserDTO"'.
[20-06-2024 23:24:47462 +03:00 Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker ] Executed action "Project_Keystone.Api.Controllers.AuthController.GetCurrentUser (Project-Keystone)" in 4.6656ms
[20-06-2024 23:24:47462 +03:00 Microsoft.AspNetCore.Routing.EndpointMiddleware ] Executed endpoint '"Project_Keystone.Api.Controllers.AuthController.GetCurrentUser (Project-Keystone)"'
[20-06-2024 23:24:47463 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request finished "HTTP/2" "GET" "https"://"localhost:7298""""/api/auth/me""" - 200 null "application/json; charset=utf-8" 8.1393ms
[20-06-2024 23:25:08302 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request starting "HTTP/2" "OPTIONS" "https"://"localhost:7298""""/api/auth/me""" - null null
[20-06-2024 23:25:08305 +03:00 Microsoft.AspNetCore.Cors.Infrastructure.CorsService ] CORS policy execution successful.
[20-06-2024 23:25:08306 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request finished "HTTP/2" "OPTIONS" "https"://"localhost:7298""""/api/auth/me""" - 204 null null 4.4008ms
[20-06-2024 23:25:08307 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request starting "HTTP/2" "GET" "https"://"localhost:7298""""/api/auth/me""" - null null
[20-06-2024 23:25:08308 +03:00 Microsoft.AspNetCore.Cors.Infrastructure.CorsService ] CORS policy execution successful.
[20-06-2024 23:25:08308 +03:00 Microsoft.AspNetCore.Routing.EndpointMiddleware ] Executing endpoint '"Project_Keystone.Api.Controllers.AuthController.GetCurrentUser (Project-Keystone)"'
[20-06-2024 23:25:08309 +03:00 Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker ] Route matched with "{action = \"GetCurrentUser\", controller = \"Auth\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCurrentUser()" on controller "Project_Keystone.Api.Controllers.AuthController" ("Project-Keystone").
[20-06-2024 23:25:08313 +03:00 Microsoft.EntityFrameworkCore.Database.Command ] Executed DbCommand ("2"ms) [Parameters=["@__p_0='?' (Size = 450)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[CONCURRENCY_STAMP], [u].[CREATED_AT], [u].[EMAIL], [u].[FIRSTNAME], [u].[LASTNAME], [u].[NormalizedEmail], [u].[NORMALIZED_USER_NAME], [u].[PASSWORD_HASH], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[UPDATED_AT], [u].[UserName]
FROM [USERS] AS [u]
WHERE [u].[Id] = @__p_0"
[20-06-2024 23:25:08315 +03:00 Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor ] Executing "OkObjectResult", writing value of type '"Project_Keystone.Api.Models.DTOs.UserDTO"'.
[20-06-2024 23:25:08315 +03:00 Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker ] Executed action "Project_Keystone.Api.Controllers.AuthController.GetCurrentUser (Project-Keystone)" in 5.8799ms
[20-06-2024 23:25:08316 +03:00 Microsoft.AspNetCore.Routing.EndpointMiddleware ] Executed endpoint '"Project_Keystone.Api.Controllers.AuthController.GetCurrentUser (Project-Keystone)"'
[20-06-2024 23:25:08316 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request finished "HTTP/2" "GET" "https"://"localhost:7298""""/api/auth/me""" - 200 null "application/json; charset=utf-8" 9.7248ms
[20-06-2024 23:25:15450 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request starting "HTTP/2" "OPTIONS" "https"://"localhost:7298""""/api/auth/update""" - null null
[20-06-2024 23:25:15451 +03:00 Microsoft.AspNetCore.Cors.Infrastructure.CorsService ] CORS policy execution successful.
[20-06-2024 23:25:15452 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request finished "HTTP/2" "OPTIONS" "https"://"localhost:7298""""/api/auth/update""" - 204 null null 1.6052ms
[20-06-2024 23:25:15453 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request starting "HTTP/2" "POST" "https"://"localhost:7298""""/api/auth/update""" - "application/json" 122
[20-06-2024 23:25:15454 +03:00 Microsoft.AspNetCore.Cors.Infrastructure.CorsService ] CORS policy execution successful.
[20-06-2024 23:25:15454 +03:00 Microsoft.AspNetCore.Routing.EndpointMiddleware ] Executing endpoint '"Project_Keystone.Api.Controllers.AuthController.UpdateUser (Project-Keystone)"'
[20-06-2024 23:25:15457 +03:00 Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker ] Route matched with "{action = \"UpdateUser\", controller = \"Auth\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateUser(Project_Keystone.Api.Models.DTOs.UserUpdateDTO)" on controller "Project_Keystone.Api.Controllers.AuthController" ("Project-Keystone").
[20-06-2024 23:25:15463 +03:00 Project_Keystone.Api.Controllers.AuthController ] Authenticated user roles: "User"
[20-06-2024 23:25:15465 +03:00 Project_Keystone.Core.Services.AuthService ] Attempting to update user with email "alex.santexis@gmail.com"
[20-06-2024 23:25:15466 +03:00 Microsoft.EntityFrameworkCore.Database.Command ] Executed DbCommand ("1"ms) [Parameters=["@__normalizedEmail_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[Id], [u].[CONCURRENCY_STAMP], [u].[CREATED_AT], [u].[EMAIL], [u].[FIRSTNAME], [u].[LASTNAME], [u].[NormalizedEmail], [u].[NORMALIZED_USER_NAME], [u].[PASSWORD_HASH], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[UPDATED_AT], [u].[UserName]
FROM [USERS] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0"
[20-06-2024 23:25:15468 +03:00 Project_Keystone.Core.Services.AuthService ] User found. Updating user details.
[20-06-2024 23:25:15471 +03:00 Microsoft.EntityFrameworkCore.Database.Command ] Executed DbCommand ("1"ms) [Parameters=["@__normalizedUserName_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[CONCURRENCY_STAMP], [u].[CREATED_AT], [u].[EMAIL], [u].[FIRSTNAME], [u].[LASTNAME], [u].[NormalizedEmail], [u].[NORMALIZED_USER_NAME], [u].[PASSWORD_HASH], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[UPDATED_AT], [u].[UserName]
FROM [USERS] AS [u]
WHERE [u].[NORMALIZED_USER_NAME] = @__normalizedUserName_0"
[20-06-2024 23:25:15472 +03:00 Microsoft.EntityFrameworkCore.Database.Command ] Executed DbCommand ("0"ms) [Parameters=["@__normalizedEmail_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[Id], [u].[CONCURRENCY_STAMP], [u].[CREATED_AT], [u].[EMAIL], [u].[FIRSTNAME], [u].[LASTNAME], [u].[NormalizedEmail], [u].[NORMALIZED_USER_NAME], [u].[PASSWORD_HASH], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[UPDATED_AT], [u].[UserName]
FROM [USERS] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0"
[20-06-2024 23:25:15477 +03:00 Microsoft.EntityFrameworkCore.Database.Command ] Executed DbCommand ("3"ms) [Parameters=["@p12='?' (Size = 450), @p0='?' (Size = 4000), @p13='?' (Size = 4000), @p1='?' (DbType = DateTime2), @p2='?' (Size = 256), @p3='?' (Size = 4000), @p4='?' (Size = 450), @p5='?' (Size = 256), @p6='?' (Size = 256), @p7='?' (Size = 512), @p8='?' (Size = 4000), @p9='?' (DbType = DateTime2), @p10='?' (DbType = DateTime2), @p11='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [USERS] SET [CONCURRENCY_STAMP] = @p0, [CREATED_AT] = @p1, [EMAIL] = @p2, [FIRSTNAME] = @p3, [LASTNAME] = @p4, [NormalizedEmail] = @p5, [NORMALIZED_USER_NAME] = @p6, [PASSWORD_HASH] = @p7, [RefreshToken] = @p8, [RefreshTokenExpiryTime] = @p9, [UPDATED_AT] = @p10, [UserName] = @p11
OUTPUT 1
WHERE [Id] = @p12 AND [CONCURRENCY_STAMP] = @p13;"
[20-06-2024 23:25:15478 +03:00 Project_Keystone.Core.Services.AuthService ] User with email "alex.santexis@gmail.com" updated successfully
[20-06-2024 23:25:15478 +03:00 Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor ] Executing "OkObjectResult", writing value of type '"<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]"'.
[20-06-2024 23:25:15479 +03:00 Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker ] Executed action "Project_Keystone.Api.Controllers.AuthController.UpdateUser (Project-Keystone)" in 21.7637ms
[20-06-2024 23:25:15480 +03:00 Microsoft.AspNetCore.Routing.EndpointMiddleware ] Executed endpoint '"Project_Keystone.Api.Controllers.AuthController.UpdateUser (Project-Keystone)"'
[20-06-2024 23:25:15480 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request finished "HTTP/2" "POST" "https"://"localhost:7298""""/api/auth/update""" - 200 null "application/json; charset=utf-8" 27.875ms
[20-06-2024 23:25:53763 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request starting "HTTP/2" "OPTIONS" "https"://"localhost:7298""""/api/auth/update""" - null null
[20-06-2024 23:25:53766 +03:00 Microsoft.AspNetCore.Cors.Infrastructure.CorsService ] CORS policy execution successful.
[20-06-2024 23:25:53767 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request finished "HTTP/2" "OPTIONS" "https"://"localhost:7298""""/api/auth/update""" - 204 null null 4.3377ms
[20-06-2024 23:25:53768 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request starting "HTTP/2" "POST" "https"://"localhost:7298""""/api/auth/update""" - "application/json" 100
[20-06-2024 23:25:53769 +03:00 Microsoft.AspNetCore.Cors.Infrastructure.CorsService ] CORS policy execution successful.
[20-06-2024 23:25:53770 +03:00 Microsoft.AspNetCore.Routing.EndpointMiddleware ] Executing endpoint '"Project_Keystone.Api.Controllers.AuthController.UpdateUser (Project-Keystone)"'
[20-06-2024 23:25:53770 +03:00 Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker ] Route matched with "{action = \"UpdateUser\", controller = \"Auth\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateUser(Project_Keystone.Api.Models.DTOs.UserUpdateDTO)" on controller "Project_Keystone.Api.Controllers.AuthController" ("Project-Keystone").
[20-06-2024 23:25:53772 +03:00 Project_Keystone.Api.Controllers.AuthController ] Authenticated user roles: "User"
[20-06-2024 23:25:53773 +03:00 Project_Keystone.Core.Services.AuthService ] Attempting to update user with email "user@example.com"
[20-06-2024 23:25:53774 +03:00 Microsoft.EntityFrameworkCore.Database.Command ] Executed DbCommand ("1"ms) [Parameters=["@__normalizedEmail_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[Id], [u].[CONCURRENCY_STAMP], [u].[CREATED_AT], [u].[EMAIL], [u].[FIRSTNAME], [u].[LASTNAME], [u].[NormalizedEmail], [u].[NORMALIZED_USER_NAME], [u].[PASSWORD_HASH], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[UPDATED_AT], [u].[UserName]
FROM [USERS] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0"
[20-06-2024 23:25:53775 +03:00 Project_Keystone.Core.Services.AuthService ] Update user failed. User with email "user@example.com" does not exist
[20-06-2024 23:25:53776 +03:00 Project_Keystone.Api.Controllers.AuthController ] User update failed for "user@example.com"
[20-06-2024 23:25:53776 +03:00 Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor ] Executing "BadRequestObjectResult", writing value of type '"<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]"'.
[20-06-2024 23:25:53777 +03:00 Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker ] Executed action "Project_Keystone.Api.Controllers.AuthController.UpdateUser (Project-Keystone)" in 5.921ms
[20-06-2024 23:25:53777 +03:00 Microsoft.AspNetCore.Routing.EndpointMiddleware ] Executed endpoint '"Project_Keystone.Api.Controllers.AuthController.UpdateUser (Project-Keystone)"'
[20-06-2024 23:25:53778 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request finished "HTTP/2" "POST" "https"://"localhost:7298""""/api/auth/update""" - 400 null "application/json; charset=utf-8" 9.8675ms
[20-06-2024 23:27:18056 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request starting "HTTP/2" "OPTIONS" "https"://"localhost:7298""""/api/auth/me""" - null null
[20-06-2024 23:27:18060 +03:00 Microsoft.AspNetCore.Cors.Infrastructure.CorsService ] CORS policy execution successful.
[20-06-2024 23:27:18060 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request finished "HTTP/2" "OPTIONS" "https"://"localhost:7298""""/api/auth/me""" - 204 null null 4.273ms
[20-06-2024 23:27:18061 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request starting "HTTP/2" "GET" "https"://"localhost:7298""""/api/auth/me""" - null null
[20-06-2024 23:27:18063 +03:00 Microsoft.AspNetCore.Cors.Infrastructure.CorsService ] CORS policy execution successful.
[20-06-2024 23:27:18063 +03:00 Microsoft.AspNetCore.Routing.EndpointMiddleware ] Executing endpoint '"Project_Keystone.Api.Controllers.AuthController.GetCurrentUser (Project-Keystone)"'
[20-06-2024 23:27:18064 +03:00 Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker ] Route matched with "{action = \"GetCurrentUser\", controller = \"Auth\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCurrentUser()" on controller "Project_Keystone.Api.Controllers.AuthController" ("Project-Keystone").
[20-06-2024 23:27:18068 +03:00 Microsoft.EntityFrameworkCore.Database.Command ] Executed DbCommand ("2"ms) [Parameters=["@__p_0='?' (Size = 450)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[CONCURRENCY_STAMP], [u].[CREATED_AT], [u].[EMAIL], [u].[FIRSTNAME], [u].[LASTNAME], [u].[NormalizedEmail], [u].[NORMALIZED_USER_NAME], [u].[PASSWORD_HASH], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[UPDATED_AT], [u].[UserName]
FROM [USERS] AS [u]
WHERE [u].[Id] = @__p_0"
[20-06-2024 23:27:18070 +03:00 Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor ] Executing "OkObjectResult", writing value of type '"Project_Keystone.Api.Models.DTOs.UserDTO"'.
[20-06-2024 23:27:18070 +03:00 Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker ] Executed action "Project_Keystone.Api.Controllers.AuthController.GetCurrentUser (Project-Keystone)" in 5.6493ms
[20-06-2024 23:27:18071 +03:00 Microsoft.AspNetCore.Routing.EndpointMiddleware ] Executed endpoint '"Project_Keystone.Api.Controllers.AuthController.GetCurrentUser (Project-Keystone)"'
[20-06-2024 23:27:18071 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request finished "HTTP/2" "GET" "https"://"localhost:7298""""/api/auth/me""" - 200 null "application/json; charset=utf-8" 9.9561ms
[20-06-2024 23:27:34639 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request starting "HTTP/2" "OPTIONS" "https"://"localhost:7298""""/api/auth/update""" - null null
[20-06-2024 23:27:34640 +03:00 Microsoft.AspNetCore.Cors.Infrastructure.CorsService ] CORS policy execution successful.
[20-06-2024 23:27:34640 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request finished "HTTP/2" "OPTIONS" "https"://"localhost:7298""""/api/auth/update""" - 204 null null 1.4874ms
[20-06-2024 23:27:34641 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request starting "HTTP/2" "POST" "https"://"localhost:7298""""/api/auth/update""" - "application/json" 110
[20-06-2024 23:27:34642 +03:00 Microsoft.AspNetCore.Cors.Infrastructure.CorsService ] CORS policy execution successful.
[20-06-2024 23:27:34643 +03:00 Microsoft.AspNetCore.Routing.EndpointMiddleware ] Executing endpoint '"Project_Keystone.Api.Controllers.AuthController.UpdateUser (Project-Keystone)"'
[20-06-2024 23:27:34643 +03:00 Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker ] Route matched with "{action = \"UpdateUser\", controller = \"Auth\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateUser(Project_Keystone.Api.Models.DTOs.UserUpdateDTO)" on controller "Project_Keystone.Api.Controllers.AuthController" ("Project-Keystone").
[20-06-2024 23:27:34645 +03:00 Project_Keystone.Api.Controllers.AuthController ] Authenticated user roles: "User"
[20-06-2024 23:27:34646 +03:00 Project_Keystone.Core.Services.AuthService ] Attempting to update user with email "user@example.com"
[20-06-2024 23:27:34648 +03:00 Microsoft.EntityFrameworkCore.Database.Command ] Executed DbCommand ("2"ms) [Parameters=["@__normalizedEmail_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[Id], [u].[CONCURRENCY_STAMP], [u].[CREATED_AT], [u].[EMAIL], [u].[FIRSTNAME], [u].[LASTNAME], [u].[NormalizedEmail], [u].[NORMALIZED_USER_NAME], [u].[PASSWORD_HASH], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[UPDATED_AT], [u].[UserName]
FROM [USERS] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0"
[20-06-2024 23:27:34649 +03:00 Project_Keystone.Core.Services.AuthService ] Update user failed. User with email "user@example.com" does not exist
[20-06-2024 23:27:34649 +03:00 Project_Keystone.Api.Controllers.AuthController ] User update failed for "user@example.com"
[20-06-2024 23:27:34650 +03:00 Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor ] Executing "BadRequestObjectResult", writing value of type '"<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]"'.
[20-06-2024 23:27:34650 +03:00 Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker ] Executed action "Project_Keystone.Api.Controllers.AuthController.UpdateUser (Project-Keystone)" in 6.2987ms
[20-06-2024 23:27:34651 +03:00 Microsoft.AspNetCore.Routing.EndpointMiddleware ] Executed endpoint '"Project_Keystone.Api.Controllers.AuthController.UpdateUser (Project-Keystone)"'
[20-06-2024 23:27:34651 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request finished "HTTP/2" "POST" "https"://"localhost:7298""""/api/auth/update""" - 400 null "application/json; charset=utf-8" 10.1642ms
[20-06-2024 23:30:36879 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request starting "HTTP/2" "OPTIONS" "https"://"localhost:7298""""/api/auth/me""" - null null
[20-06-2024 23:30:36882 +03:00 Microsoft.AspNetCore.Cors.Infrastructure.CorsService ] CORS policy execution successful.
[20-06-2024 23:30:36882 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request finished "HTTP/2" "OPTIONS" "https"://"localhost:7298""""/api/auth/me""" - 204 null null 4.0877ms
[20-06-2024 23:30:36885 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request starting "HTTP/2" "GET" "https"://"localhost:7298""""/api/auth/me""" - null null
[20-06-2024 23:30:36887 +03:00 Microsoft.AspNetCore.Cors.Infrastructure.CorsService ] CORS policy execution successful.
[20-06-2024 23:30:36887 +03:00 Microsoft.AspNetCore.Routing.EndpointMiddleware ] Executing endpoint '"Project_Keystone.Api.Controllers.AuthController.GetCurrentUser (Project-Keystone)"'
[20-06-2024 23:30:36888 +03:00 Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker ] Route matched with "{action = \"GetCurrentUser\", controller = \"Auth\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCurrentUser()" on controller "Project_Keystone.Api.Controllers.AuthController" ("Project-Keystone").
[20-06-2024 23:30:36891 +03:00 Microsoft.EntityFrameworkCore.Database.Command ] Executed DbCommand ("2"ms) [Parameters=["@__p_0='?' (Size = 450)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[CONCURRENCY_STAMP], [u].[CREATED_AT], [u].[EMAIL], [u].[FIRSTNAME], [u].[LASTNAME], [u].[NormalizedEmail], [u].[NORMALIZED_USER_NAME], [u].[PASSWORD_HASH], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[UPDATED_AT], [u].[UserName]
FROM [USERS] AS [u]
WHERE [u].[Id] = @__p_0"
[20-06-2024 23:30:36893 +03:00 Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor ] Executing "OkObjectResult", writing value of type '"Project_Keystone.Api.Models.DTOs.UserDTO"'.
[20-06-2024 23:30:36893 +03:00 Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker ] Executed action "Project_Keystone.Api.Controllers.AuthController.GetCurrentUser (Project-Keystone)" in 5.1735ms
[20-06-2024 23:30:36894 +03:00 Microsoft.AspNetCore.Routing.EndpointMiddleware ] Executed endpoint '"Project_Keystone.Api.Controllers.AuthController.GetCurrentUser (Project-Keystone)"'
[20-06-2024 23:30:36894 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request finished "HTTP/2" "GET" "https"://"localhost:7298""""/api/auth/me""" - 200 null "application/json; charset=utf-8" 9.8341ms
[20-06-2024 23:30:52012 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request starting "HTTP/2" "OPTIONS" "https"://"localhost:7298""""/api/auth/login""" - null null
[20-06-2024 23:30:52013 +03:00 Microsoft.AspNetCore.Cors.Infrastructure.CorsService ] CORS policy execution successful.
[20-06-2024 23:30:52014 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request finished "HTTP/2" "OPTIONS" "https"://"localhost:7298""""/api/auth/login""" - 204 null null 1.4848ms
[20-06-2024 23:30:52015 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request starting "HTTP/2" "POST" "https"://"localhost:7298""""/api/auth/login""" - "application/json" 64
[20-06-2024 23:30:52016 +03:00 Microsoft.AspNetCore.Cors.Infrastructure.CorsService ] CORS policy execution successful.
[20-06-2024 23:30:52016 +03:00 Microsoft.AspNetCore.Routing.EndpointMiddleware ] Executing endpoint '"Project_Keystone.Api.Controllers.AuthController.Login (Project-Keystone)"'
[20-06-2024 23:30:52017 +03:00 Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker ] Route matched with "{action = \"Login\", controller = \"Auth\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(Project_Keystone.Api.Models.DTOs.UserLoginDTO)" on controller "Project_Keystone.Api.Controllers.AuthController" ("Project-Keystone").
[20-06-2024 23:30:52021 +03:00 Microsoft.EntityFrameworkCore.Database.Command ] Executed DbCommand ("2"ms) [Parameters=["@__normalizedEmail_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[Id], [u].[CONCURRENCY_STAMP], [u].[CREATED_AT], [u].[EMAIL], [u].[FIRSTNAME], [u].[LASTNAME], [u].[NormalizedEmail], [u].[NORMALIZED_USER_NAME], [u].[PASSWORD_HASH], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[UPDATED_AT], [u].[UserName]
FROM [USERS] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0"
[20-06-2024 23:30:52078 +03:00 Microsoft.EntityFrameworkCore.Database.Command ] Executed DbCommand ("1"ms) [Parameters=["@__normalizedUserName_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[CONCURRENCY_STAMP], [u].[CREATED_AT], [u].[EMAIL], [u].[FIRSTNAME], [u].[LASTNAME], [u].[NormalizedEmail], [u].[NORMALIZED_USER_NAME], [u].[PASSWORD_HASH], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[UPDATED_AT], [u].[UserName]
FROM [USERS] AS [u]
WHERE [u].[NORMALIZED_USER_NAME] = @__normalizedUserName_0"
[20-06-2024 23:30:52080 +03:00 Microsoft.EntityFrameworkCore.Database.Command ] Executed DbCommand ("0"ms) [Parameters=["@__normalizedEmail_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[Id], [u].[CONCURRENCY_STAMP], [u].[CREATED_AT], [u].[EMAIL], [u].[FIRSTNAME], [u].[LASTNAME], [u].[NormalizedEmail], [u].[NORMALIZED_USER_NAME], [u].[PASSWORD_HASH], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[UPDATED_AT], [u].[UserName]
FROM [USERS] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0"
[20-06-2024 23:30:52084 +03:00 Microsoft.EntityFrameworkCore.Database.Command ] Executed DbCommand ("3"ms) [Parameters=["@p12='?' (Size = 450), @p0='?' (Size = 4000), @p13='?' (Size = 4000), @p1='?' (DbType = DateTime2), @p2='?' (Size = 256), @p3='?' (Size = 4000), @p4='?' (Size = 450), @p5='?' (Size = 256), @p6='?' (Size = 256), @p7='?' (Size = 512), @p8='?' (Size = 4000), @p9='?' (DbType = DateTime2), @p10='?' (DbType = DateTime2), @p11='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [USERS] SET [CONCURRENCY_STAMP] = @p0, [CREATED_AT] = @p1, [EMAIL] = @p2, [FIRSTNAME] = @p3, [LASTNAME] = @p4, [NormalizedEmail] = @p5, [NORMALIZED_USER_NAME] = @p6, [PASSWORD_HASH] = @p7, [RefreshToken] = @p8, [RefreshTokenExpiryTime] = @p9, [UPDATED_AT] = @p10, [UserName] = @p11
OUTPUT 1
WHERE [Id] = @p12 AND [CONCURRENCY_STAMP] = @p13;"
[20-06-2024 23:30:52088 +03:00 Microsoft.EntityFrameworkCore.Database.Command ] Executed DbCommand ("2"ms) [Parameters=["@__userId_0='?' (Size = 450)"], CommandType='Text', CommandTimeout='30']"
""SELECT [r].[Name]
FROM [USER_ROLES] AS [u]
INNER JOIN [ROLES] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[UserId] = @__userId_0"
[20-06-2024 23:30:52089 +03:00 Project_Keystone.Core.Services.AuthService ] User "alex.santexis@gmail.com" logged in successfully.
[20-06-2024 23:30:52089 +03:00 Project_Keystone.Api.Controllers.AuthController ] User "alex.santexis@gmail.com" logged in successfully
[20-06-2024 23:30:52089 +03:00 Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor ] Executing "OkObjectResult", writing value of type '"<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]"'.
[20-06-2024 23:30:52090 +03:00 Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker ] Executed action "Project_Keystone.Api.Controllers.AuthController.Login (Project-Keystone)" in 72.2872ms
[20-06-2024 23:30:52090 +03:00 Microsoft.AspNetCore.Routing.EndpointMiddleware ] Executed endpoint '"Project_Keystone.Api.Controllers.AuthController.Login (Project-Keystone)"'
[20-06-2024 23:30:52091 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request finished "HTTP/2" "POST" "https"://"localhost:7298""""/api/auth/login""" - 200 null "application/json; charset=utf-8" 76.1405ms
[20-06-2024 23:30:53272 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request starting "HTTP/2" "OPTIONS" "https"://"localhost:7298""""/api/auth/me""" - null null
[20-06-2024 23:30:53273 +03:00 Microsoft.AspNetCore.Cors.Infrastructure.CorsService ] CORS policy execution successful.
[20-06-2024 23:30:53274 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request finished "HTTP/2" "OPTIONS" "https"://"localhost:7298""""/api/auth/me""" - 204 null null 1.6244ms
[20-06-2024 23:30:53274 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request starting "HTTP/2" "GET" "https"://"localhost:7298""""/api/auth/me""" - null null
[20-06-2024 23:30:53276 +03:00 Microsoft.AspNetCore.Cors.Infrastructure.CorsService ] CORS policy execution successful.
[20-06-2024 23:30:53276 +03:00 Microsoft.AspNetCore.Routing.EndpointMiddleware ] Executing endpoint '"Project_Keystone.Api.Controllers.AuthController.GetCurrentUser (Project-Keystone)"'
[20-06-2024 23:30:53277 +03:00 Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker ] Route matched with "{action = \"GetCurrentUser\", controller = \"Auth\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCurrentUser()" on controller "Project_Keystone.Api.Controllers.AuthController" ("Project-Keystone").
[20-06-2024 23:30:53279 +03:00 Microsoft.EntityFrameworkCore.Database.Command ] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 450)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[CONCURRENCY_STAMP], [u].[CREATED_AT], [u].[EMAIL], [u].[FIRSTNAME], [u].[LASTNAME], [u].[NormalizedEmail], [u].[NORMALIZED_USER_NAME], [u].[PASSWORD_HASH], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[UPDATED_AT], [u].[UserName]
FROM [USERS] AS [u]
WHERE [u].[Id] = @__p_0"
[20-06-2024 23:30:53281 +03:00 Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor ] Executing "OkObjectResult", writing value of type '"Project_Keystone.Api.Models.DTOs.UserDTO"'.
[20-06-2024 23:30:53282 +03:00 Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker ] Executed action "Project_Keystone.Api.Controllers.AuthController.GetCurrentUser (Project-Keystone)" in 4.4496ms
[20-06-2024 23:30:53282 +03:00 Microsoft.AspNetCore.Routing.EndpointMiddleware ] Executed endpoint '"Project_Keystone.Api.Controllers.AuthController.GetCurrentUser (Project-Keystone)"'
[20-06-2024 23:30:53283 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request finished "HTTP/2" "GET" "https"://"localhost:7298""""/api/auth/me""" - 200 null "application/json; charset=utf-8" 8.3311ms
[20-06-2024 23:31:12559 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request starting "HTTP/2" "OPTIONS" "https"://"localhost:7298""""/api/auth/update""" - null null
[20-06-2024 23:31:12560 +03:00 Microsoft.AspNetCore.Cors.Infrastructure.CorsService ] CORS policy execution successful.
[20-06-2024 23:31:12560 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request finished "HTTP/2" "OPTIONS" "https"://"localhost:7298""""/api/auth/update""" - 204 null null 1.5836ms
[20-06-2024 23:31:12561 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request starting "HTTP/2" "POST" "https"://"localhost:7298""""/api/auth/update""" - "application/json" 100
[20-06-2024 23:31:12562 +03:00 Microsoft.AspNetCore.Cors.Infrastructure.CorsService ] CORS policy execution successful.
[20-06-2024 23:31:12563 +03:00 Microsoft.AspNetCore.Routing.EndpointMiddleware ] Executing endpoint '"Project_Keystone.Api.Controllers.AuthController.UpdateUser (Project-Keystone)"'
[20-06-2024 23:31:12563 +03:00 Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker ] Route matched with "{action = \"UpdateUser\", controller = \"Auth\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateUser(Project_Keystone.Api.Models.DTOs.UserUpdateDTO)" on controller "Project_Keystone.Api.Controllers.AuthController" ("Project-Keystone").
[20-06-2024 23:31:12565 +03:00 Project_Keystone.Api.Controllers.AuthController ] Authenticated user roles: "User"
[20-06-2024 23:31:12565 +03:00 Project_Keystone.Core.Services.AuthService ] Attempting to update user with email "user@example.com"
[20-06-2024 23:31:12566 +03:00 Microsoft.EntityFrameworkCore.Database.Command ] Executed DbCommand ("1"ms) [Parameters=["@__normalizedEmail_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[Id], [u].[CONCURRENCY_STAMP], [u].[CREATED_AT], [u].[EMAIL], [u].[FIRSTNAME], [u].[LASTNAME], [u].[NormalizedEmail], [u].[NORMALIZED_USER_NAME], [u].[PASSWORD_HASH], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[UPDATED_AT], [u].[UserName]
FROM [USERS] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0"
[20-06-2024 23:31:12568 +03:00 Project_Keystone.Core.Services.AuthService ] User found. Updating user details.
[20-06-2024 23:31:12569 +03:00 Microsoft.EntityFrameworkCore.Database.Command ] Executed DbCommand ("0"ms) [Parameters=["@__normalizedUserName_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[CONCURRENCY_STAMP], [u].[CREATED_AT], [u].[EMAIL], [u].[FIRSTNAME], [u].[LASTNAME], [u].[NormalizedEmail], [u].[NORMALIZED_USER_NAME], [u].[PASSWORD_HASH], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[UPDATED_AT], [u].[UserName]
FROM [USERS] AS [u]
WHERE [u].[NORMALIZED_USER_NAME] = @__normalizedUserName_0"
[20-06-2024 23:31:12571 +03:00 Microsoft.EntityFrameworkCore.Database.Command ] Executed DbCommand ("0"ms) [Parameters=["@__normalizedEmail_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[Id], [u].[CONCURRENCY_STAMP], [u].[CREATED_AT], [u].[EMAIL], [u].[FIRSTNAME], [u].[LASTNAME], [u].[NormalizedEmail], [u].[NORMALIZED_USER_NAME], [u].[PASSWORD_HASH], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[UPDATED_AT], [u].[UserName]
FROM [USERS] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0"
[20-06-2024 23:31:12572 +03:00 Microsoft.EntityFrameworkCore.Database.Command ] Executed DbCommand ("1"ms) [Parameters=["@p12='?' (Size = 450), @p0='?' (Size = 4000), @p13='?' (Size = 4000), @p1='?' (DbType = DateTime2), @p2='?' (Size = 256), @p3='?' (Size = 4000), @p4='?' (Size = 450), @p5='?' (Size = 256), @p6='?' (Size = 256), @p7='?' (Size = 512), @p8='?' (Size = 4000), @p9='?' (DbType = DateTime2), @p10='?' (DbType = DateTime2), @p11='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [USERS] SET [CONCURRENCY_STAMP] = @p0, [CREATED_AT] = @p1, [EMAIL] = @p2, [FIRSTNAME] = @p3, [LASTNAME] = @p4, [NormalizedEmail] = @p5, [NORMALIZED_USER_NAME] = @p6, [PASSWORD_HASH] = @p7, [RefreshToken] = @p8, [RefreshTokenExpiryTime] = @p9, [UPDATED_AT] = @p10, [UserName] = @p11
OUTPUT 1
WHERE [Id] = @p12 AND [CONCURRENCY_STAMP] = @p13;"
[20-06-2024 23:31:12574 +03:00 Project_Keystone.Core.Services.AuthService ] User with email "user@example.com" updated successfully
[20-06-2024 23:31:12574 +03:00 Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor ] Executing "OkObjectResult", writing value of type '"<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]"'.
[20-06-2024 23:31:12575 +03:00 Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker ] Executed action "Project_Keystone.Api.Controllers.AuthController.UpdateUser (Project-Keystone)" in 10.9244ms
[20-06-2024 23:31:12575 +03:00 Microsoft.AspNetCore.Routing.EndpointMiddleware ] Executed endpoint '"Project_Keystone.Api.Controllers.AuthController.UpdateUser (Project-Keystone)"'
[20-06-2024 23:31:12575 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request finished "HTTP/2" "POST" "https"://"localhost:7298""""/api/auth/update""" - 200 null "application/json; charset=utf-8" 14.603ms
[20-06-2024 23:31:32133 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request starting "HTTP/2" "OPTIONS" "https"://"localhost:7298""""/api/auth/me""" - null null
[20-06-2024 23:31:32134 +03:00 Microsoft.AspNetCore.Cors.Infrastructure.CorsService ] CORS policy execution successful.
[20-06-2024 23:31:32135 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request finished "HTTP/2" "OPTIONS" "https"://"localhost:7298""""/api/auth/me""" - 204 null null 1.7634ms
[20-06-2024 23:31:32136 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request starting "HTTP/2" "GET" "https"://"localhost:7298""""/api/auth/me""" - null null
[20-06-2024 23:31:32137 +03:00 Microsoft.AspNetCore.Cors.Infrastructure.CorsService ] CORS policy execution successful.
[20-06-2024 23:31:32138 +03:00 Microsoft.AspNetCore.Routing.EndpointMiddleware ] Executing endpoint '"Project_Keystone.Api.Controllers.AuthController.GetCurrentUser (Project-Keystone)"'
[20-06-2024 23:31:32138 +03:00 Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker ] Route matched with "{action = \"GetCurrentUser\", controller = \"Auth\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCurrentUser()" on controller "Project_Keystone.Api.Controllers.AuthController" ("Project-Keystone").
[20-06-2024 23:31:32142 +03:00 Microsoft.EntityFrameworkCore.Database.Command ] Executed DbCommand ("2"ms) [Parameters=["@__p_0='?' (Size = 450)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[CONCURRENCY_STAMP], [u].[CREATED_AT], [u].[EMAIL], [u].[FIRSTNAME], [u].[LASTNAME], [u].[NormalizedEmail], [u].[NORMALIZED_USER_NAME], [u].[PASSWORD_HASH], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[UPDATED_AT], [u].[UserName]
FROM [USERS] AS [u]
WHERE [u].[Id] = @__p_0"
[20-06-2024 23:31:32144 +03:00 Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor ] Executing "OkObjectResult", writing value of type '"Project_Keystone.Api.Models.DTOs.UserDTO"'.
[20-06-2024 23:31:32144 +03:00 Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker ] Executed action "Project_Keystone.Api.Controllers.AuthController.GetCurrentUser (Project-Keystone)" in 5.6993ms
[20-06-2024 23:31:32145 +03:00 Microsoft.AspNetCore.Routing.EndpointMiddleware ] Executed endpoint '"Project_Keystone.Api.Controllers.AuthController.GetCurrentUser (Project-Keystone)"'
[20-06-2024 23:31:32145 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request finished "HTTP/2" "GET" "https"://"localhost:7298""""/api/auth/me""" - 200 null "application/json; charset=utf-8" 9.9177ms
[20-06-2024 23:31:59921 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request starting "HTTP/2" "OPTIONS" "https"://"localhost:7298""""/api/auth/update""" - null null
[20-06-2024 23:31:59925 +03:00 Microsoft.AspNetCore.Cors.Infrastructure.CorsService ] CORS policy execution successful.
[20-06-2024 23:31:59925 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request finished "HTTP/2" "OPTIONS" "https"://"localhost:7298""""/api/auth/update""" - 204 null null 4.1816ms
[20-06-2024 23:31:59928 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request starting "HTTP/2" "POST" "https"://"localhost:7298""""/api/auth/update""" - "application/json" 92
[20-06-2024 23:31:59929 +03:00 Microsoft.AspNetCore.Cors.Infrastructure.CorsService ] CORS policy execution successful.
[20-06-2024 23:31:59930 +03:00 Microsoft.AspNetCore.Routing.EndpointMiddleware ] Executing endpoint '"Project_Keystone.Api.Controllers.AuthController.UpdateUser (Project-Keystone)"'
[20-06-2024 23:31:59930 +03:00 Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker ] Route matched with "{action = \"UpdateUser\", controller = \"Auth\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateUser(Project_Keystone.Api.Models.DTOs.UserUpdateDTO)" on controller "Project_Keystone.Api.Controllers.AuthController" ("Project-Keystone").
[20-06-2024 23:31:59932 +03:00 Project_Keystone.Api.Controllers.AuthController ] Authenticated user roles: "User"
[20-06-2024 23:31:59932 +03:00 Project_Keystone.Core.Services.AuthService ] Attempting to update user with email "alex@santexis.com"
[20-06-2024 23:31:59934 +03:00 Microsoft.EntityFrameworkCore.Database.Command ] Executed DbCommand ("1"ms) [Parameters=["@__normalizedEmail_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[Id], [u].[CONCURRENCY_STAMP], [u].[CREATED_AT], [u].[EMAIL], [u].[FIRSTNAME], [u].[LASTNAME], [u].[NormalizedEmail], [u].[NORMALIZED_USER_NAME], [u].[PASSWORD_HASH], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[UPDATED_AT], [u].[UserName]
FROM [USERS] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0"
[20-06-2024 23:31:59935 +03:00 Project_Keystone.Core.Services.AuthService ] Update user failed. User with email "alex.santexis@gmail.com" does not exist
[20-06-2024 23:31:59935 +03:00 Project_Keystone.Api.Controllers.AuthController ] User update failed for "alex@santexis.com"
[20-06-2024 23:31:59936 +03:00 Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor ] Executing "BadRequestObjectResult", writing value of type '"<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]"'.
[20-06-2024 23:31:59936 +03:00 Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker ] Executed action "Project_Keystone.Api.Controllers.AuthController.UpdateUser (Project-Keystone)" in 5.3491ms
[20-06-2024 23:31:59937 +03:00 Microsoft.AspNetCore.Routing.EndpointMiddleware ] Executed endpoint '"Project_Keystone.Api.Controllers.AuthController.UpdateUser (Project-Keystone)"'
[20-06-2024 23:31:59937 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request finished "HTTP/2" "POST" "https"://"localhost:7298""""/api/auth/update""" - 400 null "application/json; charset=utf-8" 9.374ms
[20-06-2024 23:34:10431 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request starting "HTTP/2" "OPTIONS" "https"://"localhost:7298""""/api/auth/me""" - null null
[20-06-2024 23:34:10434 +03:00 Microsoft.AspNetCore.Cors.Infrastructure.CorsService ] CORS policy execution successful.
[20-06-2024 23:34:10435 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request finished "HTTP/2" "OPTIONS" "https"://"localhost:7298""""/api/auth/me""" - 204 null null 3.7949ms
[20-06-2024 23:34:10437 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request starting "HTTP/2" "GET" "https"://"localhost:7298""""/api/auth/me""" - null null
[20-06-2024 23:34:10439 +03:00 Microsoft.AspNetCore.Cors.Infrastructure.CorsService ] CORS policy execution successful.
[20-06-2024 23:34:10440 +03:00 Microsoft.AspNetCore.Routing.EndpointMiddleware ] Executing endpoint '"Project_Keystone.Api.Controllers.AuthController.GetCurrentUser (Project-Keystone)"'
[20-06-2024 23:34:10440 +03:00 Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker ] Route matched with "{action = \"GetCurrentUser\", controller = \"Auth\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCurrentUser()" on controller "Project_Keystone.Api.Controllers.AuthController" ("Project-Keystone").
[20-06-2024 23:34:10443 +03:00 Microsoft.EntityFrameworkCore.Database.Command ] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 450)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[CONCURRENCY_STAMP], [u].[CREATED_AT], [u].[EMAIL], [u].[FIRSTNAME], [u].[LASTNAME], [u].[NormalizedEmail], [u].[NORMALIZED_USER_NAME], [u].[PASSWORD_HASH], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[UPDATED_AT], [u].[UserName]
FROM [USERS] AS [u]
WHERE [u].[Id] = @__p_0"
[20-06-2024 23:34:10445 +03:00 Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor ] Executing "OkObjectResult", writing value of type '"Project_Keystone.Api.Models.DTOs.UserDTO"'.
[20-06-2024 23:34:10445 +03:00 Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker ] Executed action "Project_Keystone.Api.Controllers.AuthController.GetCurrentUser (Project-Keystone)" in 4.9435ms
[20-06-2024 23:34:10446 +03:00 Microsoft.AspNetCore.Routing.EndpointMiddleware ] Executed endpoint '"Project_Keystone.Api.Controllers.AuthController.GetCurrentUser (Project-Keystone)"'
[20-06-2024 23:34:10446 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request finished "HTTP/2" "GET" "https"://"localhost:7298""""/api/auth/me""" - 200 null "application/json; charset=utf-8" 9.3058ms
[20-06-2024 23:34:24828 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request starting "HTTP/2" "OPTIONS" "https"://"localhost:7298""""/api/auth/login""" - null null
[20-06-2024 23:34:24829 +03:00 Microsoft.AspNetCore.Cors.Infrastructure.CorsService ] CORS policy execution successful.
[20-06-2024 23:34:24830 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request finished "HTTP/2" "OPTIONS" "https"://"localhost:7298""""/api/auth/login""" - 204 null null 1.593ms
[20-06-2024 23:34:24830 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request starting "HTTP/2" "POST" "https"://"localhost:7298""""/api/auth/login""" - "application/json" 57
[20-06-2024 23:34:24832 +03:00 Microsoft.AspNetCore.Cors.Infrastructure.CorsService ] CORS policy execution successful.
[20-06-2024 23:34:24832 +03:00 Microsoft.AspNetCore.Routing.EndpointMiddleware ] Executing endpoint '"Project_Keystone.Api.Controllers.AuthController.Login (Project-Keystone)"'
[20-06-2024 23:34:24832 +03:00 Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker ] Route matched with "{action = \"Login\", controller = \"Auth\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(Project_Keystone.Api.Models.DTOs.UserLoginDTO)" on controller "Project_Keystone.Api.Controllers.AuthController" ("Project-Keystone").
[20-06-2024 23:34:24836 +03:00 Microsoft.EntityFrameworkCore.Database.Command ] Executed DbCommand ("2"ms) [Parameters=["@__normalizedEmail_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[Id], [u].[CONCURRENCY_STAMP], [u].[CREATED_AT], [u].[EMAIL], [u].[FIRSTNAME], [u].[LASTNAME], [u].[NormalizedEmail], [u].[NORMALIZED_USER_NAME], [u].[PASSWORD_HASH], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[UPDATED_AT], [u].[UserName]
FROM [USERS] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0"
[20-06-2024 23:34:24895 +03:00 Microsoft.EntityFrameworkCore.Database.Command ] Executed DbCommand ("1"ms) [Parameters=["@__normalizedUserName_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[CONCURRENCY_STAMP], [u].[CREATED_AT], [u].[EMAIL], [u].[FIRSTNAME], [u].[LASTNAME], [u].[NormalizedEmail], [u].[NORMALIZED_USER_NAME], [u].[PASSWORD_HASH], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[UPDATED_AT], [u].[UserName]
FROM [USERS] AS [u]
WHERE [u].[NORMALIZED_USER_NAME] = @__normalizedUserName_0"
[20-06-2024 23:34:24896 +03:00 Microsoft.EntityFrameworkCore.Database.Command ] Executed DbCommand ("0"ms) [Parameters=["@__normalizedEmail_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[Id], [u].[CONCURRENCY_STAMP], [u].[CREATED_AT], [u].[EMAIL], [u].[FIRSTNAME], [u].[LASTNAME], [u].[NormalizedEmail], [u].[NORMALIZED_USER_NAME], [u].[PASSWORD_HASH], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[UPDATED_AT], [u].[UserName]
FROM [USERS] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0"
[20-06-2024 23:34:24900 +03:00 Microsoft.EntityFrameworkCore.Database.Command ] Executed DbCommand ("3"ms) [Parameters=["@p12='?' (Size = 450), @p0='?' (Size = 4000), @p13='?' (Size = 4000), @p1='?' (DbType = DateTime2), @p2='?' (Size = 256), @p3='?' (Size = 4000), @p4='?' (Size = 450), @p5='?' (Size = 256), @p6='?' (Size = 256), @p7='?' (Size = 512), @p8='?' (Size = 4000), @p9='?' (DbType = DateTime2), @p10='?' (DbType = DateTime2), @p11='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [USERS] SET [CONCURRENCY_STAMP] = @p0, [CREATED_AT] = @p1, [EMAIL] = @p2, [FIRSTNAME] = @p3, [LASTNAME] = @p4, [NormalizedEmail] = @p5, [NORMALIZED_USER_NAME] = @p6, [PASSWORD_HASH] = @p7, [RefreshToken] = @p8, [RefreshTokenExpiryTime] = @p9, [UPDATED_AT] = @p10, [UserName] = @p11
OUTPUT 1
WHERE [Id] = @p12 AND [CONCURRENCY_STAMP] = @p13;"
[20-06-2024 23:34:24902 +03:00 Microsoft.EntityFrameworkCore.Database.Command ] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 450)"], CommandType='Text', CommandTimeout='30']"
""SELECT [r].[Name]
FROM [USER_ROLES] AS [u]
INNER JOIN [ROLES] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[UserId] = @__userId_0"
[20-06-2024 23:34:24903 +03:00 Project_Keystone.Core.Services.AuthService ] User "user@example.com" logged in successfully.
[20-06-2024 23:34:24904 +03:00 Project_Keystone.Api.Controllers.AuthController ] User "user@example.com" logged in successfully
[20-06-2024 23:34:24904 +03:00 Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor ] Executing "OkObjectResult", writing value of type '"<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]"'.
[20-06-2024 23:34:24904 +03:00 Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker ] Executed action "Project_Keystone.Api.Controllers.AuthController.Login (Project-Keystone)" in 71.4764ms
[20-06-2024 23:34:24905 +03:00 Microsoft.AspNetCore.Routing.EndpointMiddleware ] Executed endpoint '"Project_Keystone.Api.Controllers.AuthController.Login (Project-Keystone)"'
[20-06-2024 23:34:24905 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request finished "HTTP/2" "POST" "https"://"localhost:7298""""/api/auth/login""" - 200 null "application/json; charset=utf-8" 74.8517ms
[20-06-2024 23:34:26006 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request starting "HTTP/2" "OPTIONS" "https"://"localhost:7298""""/api/auth/me""" - null null
[20-06-2024 23:34:26007 +03:00 Microsoft.AspNetCore.Cors.Infrastructure.CorsService ] CORS policy execution successful.
[20-06-2024 23:34:26007 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request finished "HTTP/2" "OPTIONS" "https"://"localhost:7298""""/api/auth/me""" - 204 null null 1.4395ms
[20-06-2024 23:34:26008 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request starting "HTTP/2" "GET" "https"://"localhost:7298""""/api/auth/me""" - null null
[20-06-2024 23:34:26009 +03:00 Microsoft.AspNetCore.Cors.Infrastructure.CorsService ] CORS policy execution successful.
[20-06-2024 23:34:26010 +03:00 Microsoft.AspNetCore.Routing.EndpointMiddleware ] Executing endpoint '"Project_Keystone.Api.Controllers.AuthController.GetCurrentUser (Project-Keystone)"'
[20-06-2024 23:34:26010 +03:00 Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker ] Route matched with "{action = \"GetCurrentUser\", controller = \"Auth\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCurrentUser()" on controller "Project_Keystone.Api.Controllers.AuthController" ("Project-Keystone").
[20-06-2024 23:34:26012 +03:00 Microsoft.EntityFrameworkCore.Database.Command ] Executed DbCommand ("0"ms) [Parameters=["@__p_0='?' (Size = 450)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[CONCURRENCY_STAMP], [u].[CREATED_AT], [u].[EMAIL], [u].[FIRSTNAME], [u].[LASTNAME], [u].[NormalizedEmail], [u].[NORMALIZED_USER_NAME], [u].[PASSWORD_HASH], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[UPDATED_AT], [u].[UserName]
FROM [USERS] AS [u]
WHERE [u].[Id] = @__p_0"
[20-06-2024 23:34:26014 +03:00 Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor ] Executing "OkObjectResult", writing value of type '"Project_Keystone.Api.Models.DTOs.UserDTO"'.
[20-06-2024 23:34:26015 +03:00 Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker ] Executed action "Project_Keystone.Api.Controllers.AuthController.GetCurrentUser (Project-Keystone)" in 4.2028ms
[20-06-2024 23:34:26015 +03:00 Microsoft.AspNetCore.Routing.EndpointMiddleware ] Executed endpoint '"Project_Keystone.Api.Controllers.AuthController.GetCurrentUser (Project-Keystone)"'
[20-06-2024 23:34:26016 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request finished "HTTP/2" "GET" "https"://"localhost:7298""""/api/auth/me""" - 200 null "application/json; charset=utf-8" 7.791ms
[20-06-2024 23:36:08185 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request starting "HTTP/2" "OPTIONS" "https"://"localhost:7298""""/api/auth/update""" - null null
[20-06-2024 23:36:08189 +03:00 Microsoft.AspNetCore.Cors.Infrastructure.CorsService ] CORS policy execution successful.
[20-06-2024 23:36:08189 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request finished "HTTP/2" "OPTIONS" "https"://"localhost:7298""""/api/auth/update""" - 204 null null 4.1348ms
[20-06-2024 23:36:08190 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request starting "HTTP/2" "POST" "https"://"localhost:7298""""/api/auth/update""" - "application/json" 122
[20-06-2024 23:36:08194 +03:00 Microsoft.AspNetCore.Cors.Infrastructure.CorsService ] CORS policy execution successful.
[20-06-2024 23:36:08194 +03:00 Microsoft.AspNetCore.Routing.EndpointMiddleware ] Executing endpoint '"Project_Keystone.Api.Controllers.AuthController.UpdateUser (Project-Keystone)"'
[20-06-2024 23:36:08194 +03:00 Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker ] Route matched with "{action = \"UpdateUser\", controller = \"Auth\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateUser(Project_Keystone.Api.Models.DTOs.UserUpdateDTO)" on controller "Project_Keystone.Api.Controllers.AuthController" ("Project-Keystone").
[20-06-2024 23:36:08196 +03:00 Project_Keystone.Api.Controllers.AuthController ] Authenticated user roles: "User"
[20-06-2024 23:36:08197 +03:00 Project_Keystone.Core.Services.AuthService ] Attempting to update user with email "alex.santexis@gmail.com"
[20-06-2024 23:36:08199 +03:00 Microsoft.EntityFrameworkCore.Database.Command ] Executed DbCommand ("2"ms) [Parameters=["@__normalizedEmail_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[Id], [u].[CONCURRENCY_STAMP], [u].[CREATED_AT], [u].[EMAIL], [u].[FIRSTNAME], [u].[LASTNAME], [u].[NormalizedEmail], [u].[NORMALIZED_USER_NAME], [u].[PASSWORD_HASH], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[UPDATED_AT], [u].[UserName]
FROM [USERS] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0"
[20-06-2024 23:36:08200 +03:00 Project_Keystone.Core.Services.AuthService ] User found. Updating user details.
[20-06-2024 23:36:08202 +03:00 Microsoft.EntityFrameworkCore.Database.Command ] Executed DbCommand ("1"ms) [Parameters=["@__normalizedUserName_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[CONCURRENCY_STAMP], [u].[CREATED_AT], [u].[EMAIL], [u].[FIRSTNAME], [u].[LASTNAME], [u].[NormalizedEmail], [u].[NORMALIZED_USER_NAME], [u].[PASSWORD_HASH], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[UPDATED_AT], [u].[UserName]
FROM [USERS] AS [u]
WHERE [u].[NORMALIZED_USER_NAME] = @__normalizedUserName_0"
[20-06-2024 23:36:08204 +03:00 Microsoft.EntityFrameworkCore.Database.Command ] Executed DbCommand ("0"ms) [Parameters=["@__normalizedEmail_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[Id], [u].[CONCURRENCY_STAMP], [u].[CREATED_AT], [u].[EMAIL], [u].[FIRSTNAME], [u].[LASTNAME], [u].[NormalizedEmail], [u].[NORMALIZED_USER_NAME], [u].[PASSWORD_HASH], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[UPDATED_AT], [u].[UserName]
FROM [USERS] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0"
[20-06-2024 23:36:08208 +03:00 Microsoft.EntityFrameworkCore.Database.Command ] Executed DbCommand ("3"ms) [Parameters=["@p12='?' (Size = 450), @p0='?' (Size = 4000), @p13='?' (Size = 4000), @p1='?' (DbType = DateTime2), @p2='?' (Size = 256), @p3='?' (Size = 4000), @p4='?' (Size = 450), @p5='?' (Size = 256), @p6='?' (Size = 256), @p7='?' (Size = 512), @p8='?' (Size = 4000), @p9='?' (DbType = DateTime2), @p10='?' (DbType = DateTime2), @p11='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [USERS] SET [CONCURRENCY_STAMP] = @p0, [CREATED_AT] = @p1, [EMAIL] = @p2, [FIRSTNAME] = @p3, [LASTNAME] = @p4, [NormalizedEmail] = @p5, [NORMALIZED_USER_NAME] = @p6, [PASSWORD_HASH] = @p7, [RefreshToken] = @p8, [RefreshTokenExpiryTime] = @p9, [UPDATED_AT] = @p10, [UserName] = @p11
OUTPUT 1
WHERE [Id] = @p12 AND [CONCURRENCY_STAMP] = @p13;"
[20-06-2024 23:36:08209 +03:00 Project_Keystone.Core.Services.AuthService ] User with email "alex.santexis@gmail.com" updated successfully
[20-06-2024 23:36:08209 +03:00 Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor ] Executing "OkObjectResult", writing value of type '"<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]"'.
[20-06-2024 23:36:08210 +03:00 Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker ] Executed action "Project_Keystone.Api.Controllers.AuthController.UpdateUser (Project-Keystone)" in 14.9147ms
[20-06-2024 23:36:08210 +03:00 Microsoft.AspNetCore.Routing.EndpointMiddleware ] Executed endpoint '"Project_Keystone.Api.Controllers.AuthController.UpdateUser (Project-Keystone)"'
[20-06-2024 23:36:08211 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request finished "HTTP/2" "POST" "https"://"localhost:7298""""/api/auth/update""" - 200 null "application/json; charset=utf-8" 20.6383ms
[20-06-2024 23:36:10974 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request starting "HTTP/2" "OPTIONS" "https"://"localhost:7298""""/api/auth/me""" - null null
[20-06-2024 23:36:10975 +03:00 Microsoft.AspNetCore.Cors.Infrastructure.CorsService ] CORS policy execution successful.
[20-06-2024 23:36:10975 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request finished "HTTP/2" "OPTIONS" "https"://"localhost:7298""""/api/auth/me""" - 204 null null 1.3092ms
[20-06-2024 23:36:10976 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request starting "HTTP/2" "GET" "https"://"localhost:7298""""/api/auth/me""" - null null
[20-06-2024 23:36:10978 +03:00 Microsoft.AspNetCore.Cors.Infrastructure.CorsService ] CORS policy execution successful.
[20-06-2024 23:36:10978 +03:00 Microsoft.AspNetCore.Routing.EndpointMiddleware ] Executing endpoint '"Project_Keystone.Api.Controllers.AuthController.GetCurrentUser (Project-Keystone)"'
[20-06-2024 23:36:10979 +03:00 Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker ] Route matched with "{action = \"GetCurrentUser\", controller = \"Auth\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCurrentUser()" on controller "Project_Keystone.Api.Controllers.AuthController" ("Project-Keystone").
[20-06-2024 23:36:10982 +03:00 Microsoft.EntityFrameworkCore.Database.Command ] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 450)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[CONCURRENCY_STAMP], [u].[CREATED_AT], [u].[EMAIL], [u].[FIRSTNAME], [u].[LASTNAME], [u].[NormalizedEmail], [u].[NORMALIZED_USER_NAME], [u].[PASSWORD_HASH], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[UPDATED_AT], [u].[UserName]
FROM [USERS] AS [u]
WHERE [u].[Id] = @__p_0"
[20-06-2024 23:36:10983 +03:00 Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor ] Executing "OkObjectResult", writing value of type '"Project_Keystone.Api.Models.DTOs.UserDTO"'.
[20-06-2024 23:36:10984 +03:00 Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker ] Executed action "Project_Keystone.Api.Controllers.AuthController.GetCurrentUser (Project-Keystone)" in 4.7071ms
[20-06-2024 23:36:10984 +03:00 Microsoft.AspNetCore.Routing.EndpointMiddleware ] Executed endpoint '"Project_Keystone.Api.Controllers.AuthController.GetCurrentUser (Project-Keystone)"'
[20-06-2024 23:36:10985 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request finished "HTTP/2" "GET" "https"://"localhost:7298""""/api/auth/me""" - 200 null "application/json; charset=utf-8" 8.5379ms
[20-06-2024 23:36:16264 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request starting "HTTP/2" "OPTIONS" "https"://"localhost:7298""""/api/auth/update""" - null null
[20-06-2024 23:36:16265 +03:00 Microsoft.AspNetCore.Cors.Infrastructure.CorsService ] CORS policy execution successful.
[20-06-2024 23:36:16265 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request finished "HTTP/2" "OPTIONS" "https"://"localhost:7298""""/api/auth/update""" - 204 null null 1.475ms
[20-06-2024 23:36:16266 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request starting "HTTP/2" "POST" "https"://"localhost:7298""""/api/auth/update""" - "application/json" 108
[20-06-2024 23:36:16268 +03:00 Microsoft.AspNetCore.Cors.Infrastructure.CorsService ] CORS policy execution successful.
[20-06-2024 23:36:16268 +03:00 Microsoft.AspNetCore.Routing.EndpointMiddleware ] Executing endpoint '"Project_Keystone.Api.Controllers.AuthController.UpdateUser (Project-Keystone)"'
[20-06-2024 23:36:16269 +03:00 Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker ] Route matched with "{action = \"UpdateUser\", controller = \"Auth\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateUser(Project_Keystone.Api.Models.DTOs.UserUpdateDTO)" on controller "Project_Keystone.Api.Controllers.AuthController" ("Project-Keystone").
[20-06-2024 23:36:16271 +03:00 Project_Keystone.Api.Controllers.AuthController ] Authenticated user roles: "User"
[20-06-2024 23:36:16271 +03:00 Project_Keystone.Core.Services.AuthService ] Attempting to update user with email "alex.santexis@gmail.com"
[20-06-2024 23:36:16272 +03:00 Microsoft.EntityFrameworkCore.Database.Command ] Executed DbCommand ("0"ms) [Parameters=["@__normalizedEmail_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[Id], [u].[CONCURRENCY_STAMP], [u].[CREATED_AT], [u].[EMAIL], [u].[FIRSTNAME], [u].[LASTNAME], [u].[NormalizedEmail], [u].[NORMALIZED_USER_NAME], [u].[PASSWORD_HASH], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[UPDATED_AT], [u].[UserName]
FROM [USERS] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0"
[20-06-2024 23:36:16273 +03:00 Project_Keystone.Core.Services.AuthService ] Update user failed. User with email "user@example.com" does not exist
[20-06-2024 23:36:16274 +03:00 Project_Keystone.Api.Controllers.AuthController ] User update failed for "alex.santexis@gmail.com"
[20-06-2024 23:36:16274 +03:00 Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor ] Executing "BadRequestObjectResult", writing value of type '"<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]"'.
[20-06-2024 23:36:16274 +03:00 Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker ] Executed action "Project_Keystone.Api.Controllers.AuthController.UpdateUser (Project-Keystone)" in 5.1083ms
[20-06-2024 23:36:16275 +03:00 Microsoft.AspNetCore.Routing.EndpointMiddleware ] Executed endpoint '"Project_Keystone.Api.Controllers.AuthController.UpdateUser (Project-Keystone)"'
[20-06-2024 23:36:16275 +03:00 Microsoft.AspNetCore.Hosting.Diagnostics ] Request finished "HTTP/2" "POST" "https"://"localhost:7298""""/api/auth/update""" - 400 null "application/json; charset=utf-8" 9.1064ms
